(window.webpackJsonp=window.webpackJsonp||[]).push([["plugins/metadata-plugin"],{"./MapStore2/web/client/selectors/map.js":function(e,t,n){"use strict";n.d(t,"l",(function(){return a})),n.d(t,"o",(function(){return u})),n.d(t,"g",(function(){return c})),n.d(t,"i",(function(){return l})),n.d(t,"h",(function(){return s})),n.d(t,"j",(function(){return d})),n.d(t,"n",(function(){return f})),n.d(t,"c",(function(){return p})),n.d(t,"a",(function(){return g})),n.d(t,"b",(function(){return b})),n.d(t,"m",(function(){return y})),n.d(t,"p",(function(){return x})),n.d(t,"k",(function(){return v})),n.d(t,"d",(function(){return j})),n.d(t,"e",(function(){return S})),n.d(t,"f",(function(){return O}));var r=n("./MapStore2/web/client/utils/CoordinatesUtils.js"),o=n("./MapStore2/node_modules/reselect/es/index.js"),i=n("./MapStore2/node_modules/lodash/lodash.js"),a=function(e){return e.map&&e.map.present||e.map||e.config&&e.config.map||null},u=Object(o.a)([a],(function(e){return e&&e.projection})),c=function(e){return Object(i.get)(e,"mapInitialConfig.mapId")&&parseInt(Object(i.get)(e,"mapInitialConfig.mapId"),10)||function(e){return Object(i.get)(a(e),"mapId")&&parseInt(Object(i.get)(a(e),"mapId"),10)||null}(e)},l=function(e){return Object(i.get)(a(e),"info")},s=function(e){return Object(i.get)(l(e),"details")},d=function(e){var t=Object(i.get)(l(e),"canEdit");return void 0===t?Object(i.get)(e,"context.resource.canEdit"):t},f=function(e){return e.localConfig&&e.localConfig.projectionDefs||[]},m=function(e){return e.localConfig&&e.localConfig.mapConstraints||{}},p=function(e){return m(e).restrictedExtent},g=function(e){return m(e).crs},b=function(e){var t=m(e),n=u(e);return n&&Object(i.get)(t,'projectionsConstraints["'.concat(n,'"].minZoom'))||Object(i.get)(t,"minZoom")},y=function(e){return Object(i.get)(function(e){return Object(i.get)(a(e),"limits")}(e),"minZoom")},x=Object(o.a)([function(e){return Object(i.get)(a(e),"resolutions")},u],(function(e,t){if(e&&t){var n=r.default.getUnits(t);return e.map((function(e){return e*(100/2.54*96)*("degrees"===n?111194.87428468118:1)}))}return[]})),v=function(e){return e.map&&e.map.present&&e.map.present.info&&e.map.present.info.name||""},h=function(e){return Object(i.get)(a(e),"eventListeners.mousemove",[])},j=function(e){return!!h(e).length},S=function(e){return h(e).includes("mouseposition")},O=function(e){return h(e).includes("identifyFloatingTool")}},"./MapStore2/web/client/utils/CoordinatesUtils.js":function(e,t,n){"use strict";n.r(t),n.d(t,"FORMULAS",(function(){return N})),n.d(t,"getProjUrl",(function(){return F})),n.d(t,"determineCrs",(function(){return _})),n.d(t,"normalizePoint",(function(){return R})),n.d(t,"reproject",(function(){return D})),n.d(t,"reprojectExtent",(function(){return U})),n.d(t,"getPolygonFromExtent",(function(){return V})),n.d(t,"getExtentFromNormalized",(function(){return k})),n.d(t,"crsCodeTable",(function(){return $})),n.d(t,"setCrsLabels",(function(){return J})),n.d(t,"getUnits",(function(){return W})),n.d(t,"getProjectedBBox",(function(){return H})),n.d(t,"createBBox",(function(){return X})),n.d(t,"reprojectGeoJson",(function(){return q})),n.d(t,"lineIntersectPolygon",(function(){return Z})),n.d(t,"normalizeLng",(function(){return Y})),n.d(t,"reprojectBbox",(function(){return K})),n.d(t,"bboxToFeatureGeometry",(function(){return Q})),n.d(t,"getCompatibleSRS",(function(){return ee})),n.d(t,"getEquivalentSRS",(function(){return te})),n.d(t,"getEPSGCode",(function(){return ne})),n.d(t,"normalizeSRS",(function(){return re})),n.d(t,"isAllowedSRS",(function(){return oe})),n.d(t,"getAvailableCRS",(function(){return ie})),n.d(t,"filterCRSList",(function(){return ae})),n.d(t,"calculateAzimuth",(function(){return ue})),n.d(t,"calculateDistance",(function(){return ce})),n.d(t,"extendExtent",(function(){return le})),n.d(t,"getGeoJSONExtent",(function(){return se})),n.d(t,"isValidExtent",(function(){return de})),n.d(t,"calculateCircleCoordinates",(function(){return fe})),n.d(t,"transformLineToArcs",(function(){return me})),n.d(t,"transformArcsToLine",(function(){return pe})),n.d(t,"coordsOLtoLeaflet",(function(){return ge})),n.d(t,"mergeToPolyGeom",(function(){return be})),n.d(t,"getViewportGeometry",(function(){return ye})),n.d(t,"getExtentFromViewport",(function(){return xe})),n.d(t,"fetchProjRemotely",(function(){return ve})),n.d(t,"parseURN",(function(){return he})),n.d(t,"parseString",(function(){return je})),n.d(t,"getWMSBoundingBox",(function(){return Se})),n.d(t,"isSRSAllowed",(function(){return Oe})),n.d(t,"getNormalizedLatLon",(function(){return Ee})),n.d(t,"isInsideVisibleArea",(function(){return Pe})),n.d(t,"centerToVisibleArea",(function(){return Me})),n.d(t,"calculateCircleRadiusFromPixel",(function(){return Ge})),n.d(t,"roundCoord",(function(){return we})),n.d(t,"midpoint",(function(){return Ae})),n.d(t,"pointObjectToArray",(function(){return Ce})),n.d(t,"isPointInsideExtent",(function(){return Ne})),n.d(t,"isBboxCompatible",(function(){return Ie})),n.d(t,"extractCrsFromURN",(function(){return Fe})),n.d(t,"makeNumericEPSG",(function(){return Te})),n.d(t,"makeBboxFromOWS",(function(){return _e}));var r=n("./MapStore2/node_modules/node-geo-distance/index.js"),o=n.n(r),i=n("./MapStore2/web/client/libs/proj4.js"),a=n.n(i),u=n("./MapStore2/web/client/libs/ajax.js"),c=n.n(u),l=n("./MapStore2/node_modules/object-assign/index.js"),s=n.n(l),d=n("./MapStore2/node_modules/lodash/lodash.js"),f=n("./MapStore2/node_modules/@turf/line-intersect/index.js"),m=n.n(f),p=n("./MapStore2/node_modules/@turf/polygon-to-linestring/index.js"),g=n.n(p),b=n("./MapStore2/node_modules/@turf/great-circle/main.es.js"),y=n("./MapStore2/node_modules/turf-point/index.js"),x=n.n(y),v=n("./MapStore2/node_modules/@turf/bbox-polygon/main.es.js"),h=n("./MapStore2/node_modules/@turf/boolean-overlap/main.es.js"),j=n("./MapStore2/node_modules/@turf/boolean-contains/main.es.js");function S(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function O(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?S(Object(n),!0).forEach((function(t){E(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):S(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function E(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function P(e){return function(e){if(Array.isArray(e))return w(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||G(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function M(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,o=!1,i=void 0;try{for(var a,u=e[Symbol.iterator]();!(r=(a=u.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{r||null==u.return||u.return()}finally{if(o)throw i}}return n}(e,t)||G(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function G(e,t){if(e){if("string"==typeof e)return w(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?w(e,t):void 0}}function w(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var A,C=a.a,N={vincenty:function(e){for(var t=0,n=0;n<e.length-1;++n){var r=e[n],i=e[n+1],a=M(r,2),u=a[0],c=a[1],l=M(i,2),s=l[0],d=l[1];t+=parseFloat(o.a.vincentySync({longitude:u,latitude:c},{longitude:s,latitude:d}))}return t},haversine:function(e){for(var t=0,n=0;n<e.length-1;++n){var r=e[n],i=e[n+1],a=M(r,2),u=a[0],c=a[1],l=M(i,2),s=l[0],d=l[1];t+=parseFloat(o.a.haversineSync({longitude:u,latitude:c},{longitude:s,latitude:d}))}return t}};function I(e,t){return(n=e).length>=2&&"number"==typeof n[0]&&"number"==typeof n[1]?t(e):e.map((function(e){return I(e,t)}));var n}var F=function(e){return"http://spatialreference.org/ref/epsg/".concat(e,"/proj4/")};function T(e,t,n){if(null===e)return e;var r=Object(d.cloneDeep)(e);return"Feature"===e.type?r.geometry=T(e.geometry,t,n):"FeatureCollection"===e.type?r.features=r.features.map((function(e){return T(e,t,n)})):"GeometryCollection"===e.type?r.geometries=r.geometries.map((function(e){return T(e,t,n)})):t&&t(r),n&&n(r),r}function _(e){return"string"==typeof e||e instanceof String?a.a.defs(e)?new a.a.Proj(e):null:e}var L={"EPSG:4326":"WGS 84","EPSG:3857":"EPSG:3857"},R=function(e){return{x:e.x||0,y:e.y||0,srs:e.srs||e.crs||"EPSG:4326",crs:e.srs||e.crs||"EPSG:4326"}},z=function(e){var t=e;return Object(d.isNumber)(e.x)||(t.x=parseFloat(e.x)),Object(d.isNumber)(e.y)||(t.y=parseFloat(e.y)),t},D=function(e,t,n){var r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],o=t&&a.a.defs(t)?new a.a.Proj(t):null,i=n&&a.a.defs(n)?new a.a.Proj(n):null;if(o&&i){var u=Object(d.isArray)(e)?a.a.toPoint(e):a.a.toPoint([e.x,e.y]),c=s()({},t===n?z(u):a.a.transform(o,i,z(u)),{srs:n});return r?R(c):c}return null},B=["EPSG:900913","EPSG:4326","EPSG:3857"],U=function(e,t,n){return"EPSG:4326"===t?e:n?e.map((function(e){return[D([e[0],e[1]],"EPSG:4326",t),D([e[2],e[3]],"EPSG:4326",t)].reduce((function(e,t){return[].concat(P(e),[t.x,t.y])}),[])})):[D([e[0],e[1]],"EPSG:4326",t),D([e[2],e[3]],"EPSG:4326",t)].reduce((function(e,t){return[].concat(P(e),[t.x,t.y])}),[])},V=function(e){return e?e.hasOwnProperty("geometry")&&"Polygon"===e.geometry.type?e:Object(v.a)(e):null},k=function(e,t){var n=function(e,t){var n="EPSG:4326"!==t?[D([parseFloat(e.minx),parseFloat(e.miny)],t,"EPSG:4326"),D([parseFloat(e.maxx),parseFloat(e.maxy)],t,"EPSG:4326")].reduce((function(e,t){return[].concat(P(e),[t.x,t.y])}),[]):[parseFloat(e.minx),parseFloat(e.miny),parseFloat(e.maxx),parseFloat(e.maxy)],r=!1;return"EPSG:4326"===t?r=Math.abs(e.maxx-e.minx)>=360:"EPSG:900913"!==t&&"EPSG:3857"!==t||(r=Math.abs(e.maxx-e.minx)>=40075016.68557849),r?[0,n[1],360,n[3]]:[(n[0]+180)%360,n[1],(n[2]+180)%360,n[3]].map((function(e,t){return t%2==0&&e<0?360+e:e}))}(e,t),r=n[2]<n[0];return r?{extent:U([[-180,n[1],n[2]-180,n[3]],[n[0]-180,n[1],180,n[3]]],t,r),isIDL:r}:{extent:U([n[0]-180,n[1],n[2]-180,n[3]],t,r),isIDL:r}},$={wgs84:4326,wgs1984:4326,crs84:4326,ogccrs84:4326,lambert93:2154,rgflambert93:2154},J=function(e){L=s()({},L,e)},W=function(e){return new a.a.Proj(e).units||"degrees"},H=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3?arguments[3]:void 0,o=t*r[0]/2,i=t*r[1]/2,a=Math.cos(n),u=Math.sin(n),c=o*a,l=o*u,s=i*a,d=i*u,f=e.x,m=e.y,p=f-c+d,g=f-c-d,b=f+c-d,y=f+c+d,x=m-l-s,v=m-l+s,h=m+l+s,j=m+l-s,S=A.createBBox(Math.min(p,g,b,y),Math.min(x,v,h,j),Math.max(p,g,b,y),Math.max(x,v,h,j));return S},X=function(e,t,n,r){return{minx:e,miny:t,maxx:n,maxy:r}},q=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"EPSG:4326",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"EPSG:4326",r=t,o=n;"string"==typeof r&&(r=_(r)),"string"==typeof o&&(o=_(o));var i=C(r,o);return T(e,(function(e){e.crs&&delete e.crs,e.coordinates=I(e.coordinates,(function(e){var t=M(e,2),n=t[0],r=t[1];return i.forward([n,r])}))}),(function(e){var t,n;e.bbox&&(e.bbox=(t=[Number.MAX_VALUE,Number.MAX_VALUE],n=[-Number.MAX_VALUE,-Number.MAX_VALUE],T(e,(function(e){I(e.coordinates,(function(e){t[0]=Math.min(t[0],e[0]),t[1]=Math.min(t[1],e[1]),n[0]=Math.max(n[0],e[0]),n[1]=Math.max(n[1],e[1])}))})),[t[0],t[1],n[0],n[1]]))}))},Z=function(e,t){var n=g()(t).features[0];return 0!==m()(e,n).features.length},Y=function(e){var t=e/360%1*360;return t<-180?t+=360:t>180&&(t-=360),t},K=function(e,t,n){var r,o=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];r=Object(d.isArray)(e)?{sw:[e[0],e[1]],ne:[e[2],e[3]]}:{sw:[e.minx,e.miny],ne:[e.maxx,e.maxy]};var i=[];for(var a in r)if(r.hasOwnProperty(a)){var u=A.reproject(r[a],t,n,o);if(!u)return null;var c=u.x,l=u.y;i.push(c),i.push(l)}return i},Q=function(e){var t=Object(d.isArray)(e)?{minx:e[0],miny:e[1],maxx:e[2],maxy:e[3]}:e,n=t.minx,r=t.miny,o=t.maxx,i=t.maxy;return{type:"Polygon",coordinates:[[[n,r],[n,i],[o,i],[o,r],[n,r]]]}},ee=function(e,t){return"EPSG:900913"===e&&!t["EPSG:900913"]&&t["EPSG:3857"]?"EPSG:3857":"EPSG:3857"===e&&!t["EPSG:3857"]&&t["EPSG:900913"]?"EPSG:900913":e},te=function(e){return"EPSG:900913"===e||"EPSG:3857"===e?["EPSG:3857","EPSG:900913"]:[e]},ne=function(e){return-1!==e.indexOf(":")?"EPSG:"+e.substring(e.lastIndexOf(":")+1):e},re=function(e,t){var n="EPSG:900913"===e?"EPSG:3857":e;return t&&!t[n]?A.getCompatibleSRS(n,t):n},oe=function(e,t){return t[A.getCompatibleSRS(e,t)]},ie=function(){var e={};for(var t in a.a.defs)a.a.defs.hasOwnProperty(t)&&(e[t]={label:L[t]||t});return e},ae=function(e,t,n,r){var o=Object.keys(e).reduce((function(n,r){return s()({},-1===t.indexOf(r)?n:O(O({},n),{},E({},r,e[r])))}),{}),i=r.map((function(e){return e.code})),a=Object.keys(n).reduce((function(e,t){return s()({},-1===i.indexOf(t)?e:O(O({},e),{},E({},t,n[t])))}),{});return s()({},o,a)},ue=function(e,t,n){var r=A.reproject(e,n,"EPSG:4326"),o=A.reproject(t,n,"EPSG:4326"),i=r.x*Math.PI/180,a=r.y*Math.PI/180,u=o.x*Math.PI/180,c=o.y*Math.PI/180,l=u-i,s=Math.sin(l)*Math.cos(c),d=Math.cos(a)*Math.sin(c)-Math.sin(a)*Math.cos(c)*Math.cos(l);return(180*Math.atan2(s,d)/Math.PI+360)%360},ce=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"haversine";return e.length>=2&&-1!==Object.keys(N).indexOf(t)?N[t](e):0},le=function(e,t){var n=e.slice();return t[0]<e[0]&&(n[0]=t[0]),t[2]>e[2]&&(n[2]=t[2]),t[1]<e[1]&&(n[1]=t[1]),t[3]>e[3]&&(n[3]=t[3]),n},se=function(e){var t=this,n=[1/0,1/0,-1/0,-1/0],r=function(e,n){var r=A.getGeoJSONExtent(n);return t.isValidExtent(r)?t.extendExtent(r,e):r};if(e.coordinates){if("Point"===e.type){var o=e.coordinates;n[0]=o[0]-.01*o[0],n[1]=o[1]-.01*o[1],n[2]=o[0]+.01*o[0],n[3]=o[1]+.01*o[1]}return Object(d.chunk)(Object(d.flattenDeep)(e.coordinates),2).reduce((function(e,t){return[t[0]<e[0]?t[0]:e[0],t[1]<e[1]?t[1]:e[1],t[0]>e[2]?t[0]:e[2],t[1]>e[3]?t[1]:e[3]]}),n)}if("GeometryCollection"===e.type)return e.geometries.reduce(r,n);if(e.type){if("FeatureCollection"===e.type)return e.features.reduce(r,n);if("Feature"===e.type&&e.geometry)return A.getGeoJSONExtent(e.geometry)}return n},de=function(e){return!(-1!==e.indexOf(1/0)||-1!==e.indexOf(-1/0)||e[0]>e[2]||e[1]>e[3])},fe=function(e,t,n,r){var o,i,a,u=Math.PI*(1/n-.5);r&&(u+=r/180*Math.PI);for(var c=[[]],l=0;l<n;l++)o=u+2*l*Math.PI/n,i=e.x+t*Math.cos(o),a=e.y+t*Math.sin(o),c[0].push([i,a]);return c[0].push(c[0][0]),c},me=function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{npoints:100,offset:10,properties:{}},n=[],r=0;r<e.length-1;++r){var o=e[r],i=e[r+1],a=x()(o),u=x()(i);if(o[0]!==i[0]||o[1]!==i[1]){var c=Object(b.a)(a,u,t);n=[].concat(P(n),P(c.geometry.coordinates))}}return n},pe=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100;return e.length<=t?[Object(d.head)(e),Object(d.last)(e)]:e.length>t?[Object(d.head)(e)].concat(A.transformArcsToLine(Object(d.slice)(e,t))):[]},ge=function(e){var t=e.coordinates;switch(e.type){case"Polygon":return t.map((function(e){return e.map((function(e){return e.reverse()}))}));case"LineString":return t.map((function(e){return e.reverse()}));case"Point":return t.reverse();default:return[]}},be=function(e){return 1===e.length?e[0].geometry:{type:"GeometryCollection",geometries:e.map((function(e){return e.geometry}))}},ye=function(e,t){if(Object(d.head)(B.filter((function(e){return e===t})))){var n=k(e,t),r=n.extent,o=n.isIDL,i=(o?r:[r]).map((function(e){var t=[e[0],e[1]],n=[e[2],e[3]];return[[t,[t[0],n[1]],n,[n[0],t[1]],t]]}));if(o){var a=r[1][0]+(Math.abs(r[0][0]-r[0][2])+Math.abs(r[1][0]-r[1][2]))/2;return{type:"MultiPolygon",radius:0,projection:t,coordinates:i,extent:r,center:[a=a>180?a-360:a,(r[0][1]+r[0][3])/2]}}return{type:"Polygon",radius:0,projection:t,coordinates:i[0],extent:r,center:[(r[0]+r[2])/2,(r[1]+r[3])/2]}}var u=[e.minx,e.miny,e.maxx,e.maxy],c=[u[0],u[1]],l=[u[2],u[3]];return{type:"Polygon",radius:0,projection:t,coordinates:[[c,[c[0],l[1]],l,[l[0],c[1]],c]],extent:u,center:[(u[0]+u[2])/2,(u[1]+u[3])/2]}},xe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.bounds,n=e.crs,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"EPSG:4326";if(!t||!n)return null;var o=A.getViewportGeometry(t,n),i=o.extent;if(4===i.length)return A.reprojectBbox(i,n,r);var a=i.map((function(e){return e[2]-e[0]})),u=M(a,2),c=u[0],l=u[1];return c>l?A.reprojectBbox(i[0],n,r):A.reprojectBbox(i[1],n,r)},ve=function(e,t){var n=2===e.split(":").length?e.split(":")[1]:"3857";return c.a.get(t||F(n),null,{timeout:2e3})},he=function(e){var t=e&&e.properties&&e.properties.name||e&&e.name||e&&e.properties&&e.properties.code||e,n=t&&Object(d.last)(t.split(":"));return"WGS 1984"===n||"WGS84"===n?"EPSG:4326":n?"EPSG:"+n:null},je=function(e){var t=e.split(" "),n=parseFloat(t[0]),r=parseFloat(t[1]);return!isNaN(n)&&!isNaN(r)&&{x:n,y:r}||null},Se=function(e,t){var n=t||"EPSG:3857",r=e&&Object(d.isArray)(e)&&Object(d.head)(e.filter((function(e){return e&&e.$&&e.$.SRS===n&&e.$.maxx&&e.$.maxy&&e.$.minx&&e.$.miny})).map((function(e){return e&&e.$&&A.reprojectBbox([parseFloat(e.$.minx),parseFloat(e.$.miny),parseFloat(e.$.maxx),parseFloat(e.$.maxy)],n,"EPSG:4326")})));return Object(d.isArray)(r)&&{minx:r[0],miny:r[1],maxx:r[2],maxy:r[3]}||null},Oe=function(e){return!!a.a.defs(e)},Ee=function(e){var t=e.lng,n=void 0===t?1:t,r=e.lat;return{lat:void 0===r?1:r,lng:A.normalizeLng(n)}},Pe=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,o=A.getNormalizedLatLon(e),i=D([o.lng,o.lat],"EPSG:4326",t.projection);if(!t.bbox)return!1;var a=A.reprojectBbox(t.bbox.bounds,t.bbox.crs,t.projection),u=O({left:0,right:0,top:0,bottom:0},n),c={minx:a[0]+u.left*r,miny:a[1]+u.bottom*r,maxx:a[2]-u.right*r,maxy:a[3]-u.top*r},l=A.getViewportGeometry(c,t.projection),s=4===l.extent.length?[P(l.extent)]:P(l.extent);return Object(d.head)(s.map((function(e){return i.x>=e[0]&&i.y>=e[1]&&i.x<=e[2]&&i.y<=e[3]})).filter((function(e){return e})))||!1},Me=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,o=A.getNormalizedLatLon(e),i=D([o.lng,o.lat],"EPSG:4326",t.projection),a=O({left:0,right:0,top:0,bottom:0},n),u={width:(t.size.width-a.right-a.left)*r,height:(t.size.height-a.top-a.bottom)*r},c={minx:i.x-u.width/2-a.left*r,miny:i.y-u.height/2-a.bottom*r,maxx:i.x+u.width/2+a.right*r,maxy:i.y+u.height/2+a.top*r},l=A.getViewportGeometry(c,t.projection);if(4===l.extent.length)return{pos:D([l.extent[0]+t.size.width/2*r,l.extent[1]+t.size.height/2*r],t.projection,"EPSG:4326"),zoom:t.zoom,crs:"EPSG:4326"};if(Math.abs(l.extent[0][2]-l.extent[0][0])>Math.abs(l.extent[1][2]-l.extent[1][0])){var s=D([l.extent[0][2]-t.size.width/2*r,l.extent[0][3]-t.size.height/2*r],t.projection,"EPSG:4326"),d=O(O({},s),{},{x:s.x+(o.lng>s.x?360:0)});return{pos:d,zoom:t.zoom,crs:"EPSG:4326"}}return{pos:D([l.extent[1][0]+t.size.width/2*r,l.extent[1][1]+t.size.height/2*r],t.projection,"EPSG:4326"),zoom:t.zoom,crs:"EPSG:4326"}},Ge=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3?arguments[3]:void 0,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:.01,i=Object(d.isArray)(n)?n:[n.x,n.y];if(Object(d.isNumber)(i[0])&&!isNaN(i[0])&&Object(d.isNumber)(i[1])&&!isNaN(i[1])&&Object(d.isNumber)(t.x)&&!isNaN(t.x)&&Object(d.isNumber)(t.y)&&!isNaN(t.y)){var a=Object(d.isFunction)(e)?e([t.x,t.y>=r?t.y-r:t.y+r]):null,u=a&&(Object(d.isArray)(a)?a:[a.x,a.y]);return Object(d.isArray)(u)?Math.sqrt((i[0]-u[0])*(i[0]-u[0])+(i[1]-u[1])*(i[1]-u[1])):o}return o},we=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.roundingBehaviour,n=void 0===t?"round":t,r=e.value,o=void 0===r?0:r,i=e.maximumFractionDigits,a=void 0===i?0:i;return 0===a&&Math[n]?Math[n](o):o},Ae=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=Object(d.isArray)(e)?{x:e[0],y:e[1]}:e,o=Object(d.isArray)(t)?{x:t[0],y:t[1]}:t,i={x:.5*(r.x+o.x),y:.5*(r.y+o.y)};return n?[i.x,i.y]:i},Ce=function(e){return Object(d.isObject)(e)&&Object(d.isNumber)(e.x)&&Object(d.isNumber)(e.y)?[e.x,e.y]:e},Ne=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{lat:1,lng:1},t=arguments.length>1?arguments[1]:void 0;return Object(j.a)(V(t),x()([e.lng,e.lat]))},Ie=function(e,t){return Object(h.a)(e,t)||Object(j.a)(e,t)||Object(j.a)(t,e)},Fe=function(e){if(e){var t=e.split(":");if(!("urn"!==t[0]||"ogc"!==t[1]&&"x-ogc"!==t[1]||"def"!==t[2]||"crs"!==t[3]||!t[4]&&!t[6])){var n=t[4],r=t[6];return n?"".concat(n,":").concat(r):r}}return null},Te=function(e){if(!e||"EPSG:"!==e.slice(0,5))return null;var t=e.slice(5),n=parseInt(t,10);if(n>=1024&&n<=32767)return e;var r=t.replace(" ","").replace(":","").toLowerCase(),o=$[r];return o>=1024&&o<=32767?"EPSG:".concat(o):null},_e=function(e,t){var n=[e[0],e[1]],r=[t[0],t[1]];if(n[1]>r[1]){var o=n;n=r,r=o}if(n[0]>r[0]){var i=n.slice(),a=r.slice();n=[a[0],i[1]],r=[i[0],a[1]]}return[n[0],n[1],r[0],r[1]]};A={setCrsLabels:J,getUnits:W,reproject:D,getProjectedBBox:H,createBBox:X,reprojectGeoJson:q,lineIntersectPolygon:Z,normalizePoint:R,normalizeLng:Y,reprojectBbox:K,getCompatibleSRS:ee,getEquivalentSRS:te,getEPSGCode:ne,normalizeSRS:re,isAllowedSRS:oe,getAvailableCRS:ie,filterCRSList:ae,calculateAzimuth:ue,calculateDistance:ce,FORMULAS:N,extendExtent:le,getGeoJSONExtent:se,isValidExtent:de,calculateCircleCoordinates:fe,transformLineToArcs:me,transformArcsToLine:pe,coordsOLtoLeaflet:ge,mergeToPolyGeom:be,getViewportGeometry:ye,getProjUrl:F,getExtentFromViewport:xe,fetchProjRemotely:ve,parseURN:he,determineCrs:_,parseString:je,getWMSBoundingBox:Se,isSRSAllowed:Oe,getNormalizedLatLon:Ee,isInsideVisibleArea:Pe,centerToVisibleArea:Me,calculateCircleRadiusFromPixel:Ge,roundCoord:we,midpoint:Ae,pointObjectToArray:Ce,getExtentFromNormalized:k,getPolygonFromExtent:V,isPointInsideExtent:Ne,isBboxCompatible:Ie,extractCrsFromURN:Fe,crsCodeTable:$,makeNumericEPSG:Te,makeBboxFromOWS:_e},t.default=A},"./js/plugins/GeonodeMetadata.jsx":function(e,t,n){"use strict";n.r(t),n.d(t,"getMetadataBySlugName",(function(){return S})),n.d(t,"gnmetadataresource",(function(){return O})),n.d(t,"gnGetMetadata",(function(){return E}));var r=n("./MapStore2/node_modules/react/index.js"),o=n.n(r),i=n("./MapStore2/node_modules/axios/index.js"),a=n.n(i),u=n("./MapStore2/node_modules/prop-types/index.js"),c=n.n(u),l=n("./MapStore2/node_modules/rxjs/Rx.js"),s=n("./MapStore2/web/client/utils/PluginsUtils.js"),d=n("./MapStore2/node_modules/react-bootstrap/es/index.js"),f=n("./MapStore2/web/client/actions/controls.js"),m=n("./MapStore2/node_modules/reselect/es/index.js"),p=n("./MapStore2/web/client/selectors/security.js"),g=n("./MapStore2/web/client/selectors/map.js"),b=n("./MapStore2/node_modules/react-redux/es/index.js"),y=n("./MapStore2/web/client/components/misc/ResizableModal.jsx"),x=n("./MapStore2/web/client/components/misc/Loader.jsx");function v(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function h(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?v(Object(n),!0).forEach((function(t){j(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):v(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function j(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var S=function(){var e="".concat(window.location.href.replace("#",""),"/metadata_detail/article");return a.a.get(e).then((function(e){return e.data}))};function O(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FETCH_GEONODE_METADATA":return h(h({},e),{},{loading:!0});case"SET_GEONODE_METADATA":return{error:null,data:t.data,loading:!1};case"GEONODE_METADATA_ERROR":return{data:null,error:t.error,loading:!1};default:return e}}var E=function(e,t){return e.ofType("FETCH_GEONODE_METADATA").switchMap((function(e){return l.Observable.defer((function(){return S()})).switchMap((function(e){return l.Observable.of(function(e){return{type:"SET_GEONODE_METADATA",data:e}}(e))})).catch((function(e){return l.Observable.of(function(e){return{type:"GEONODE_METADATA_ERROR",error:e}}(e.data||e.message))}))}))};function P(e){var t=e.resourceId,n=e.enabled,i=e.loading,a=e.error,u=e.data,c=e.onClose,l=e.onInit,s=Object(r.useRef)();return s.current={resourceId:t,data:u},Object(r.useEffect)((function(){n&&!u&&l(s.current.resourceId)}),[n]),o.a.createElement(y.a,{modalClassName:"gn-metadata-modal",title:"Map Metadata",show:n,size:"lg",fitContent:!0,enableFooter:!1,clickOutEnabled:!1,onClose:function(){return c()}},o.a.createElement("div",{style:{top:0,left:0,minHeight:600,maxHeight:600,width:"100%",height:"100%",backgroundColor:"rgba(255, 255, 255, 0.8)",zIndex:2,display:"flex",alignItems:"center",justifyContent:"center"}},a&&o.a.createElement(d.Alert,{bsStyle:"danger",style:{margin:0}},o.a.createElement("div",null,"Metadata cannot be fetched")),u&&o.a.createElement("div",{style:{overflowY:"scroll",height:600,paddingLeft:20,paddingRight:20},dangerouslySetInnerHTML:{__html:u}}),i&&o.a.createElement(x.a,{size:80})))}P.propTypes={resourceId:c.a.oneOfType([c.a.number,c.a.string]),enabled:c.a.bool,loading:c.a.bool,error:c.a.obj,data:c.a.string,onClose:c.a.func,onInit:c.a.func},P.defaultProps={resourceId:null,enabled:!1,loading:!1,error:null,data:"",onClose:function(){},onInit:function(){}};var M=Object(b.connect)(Object(m.a)([function(e){var t,n;return null==e||null===(t=e.controls)||void 0===t||null===(n=t.metadata)||void 0===n?void 0:n.enabled},g.i,function(e){var t;return null==e||null===(t=e.gnmetadataresource)||void 0===t?void 0:t.data},function(e){var t;return null==e||null===(t=e.gnmetadataresource)||void 0===t?void 0:t.loading},function(e){var t;return null==e||null===(t=e.gnmetadataresource)||void 0===t?void 0:t.error}],(function(e,t,n,r,o){return{enabled:e,resourceId:null==t?void 0:t.id,data:n,loading:r,error:o}})),{onClose:f.i.bind(null,"metadata",null),onInit:function(e){return{type:"FETCH_GEONODE_METADATA",id:e}}})(P);t.default=Object(s.d)("GeonodeMetadata",{component:M,containers:{BurgerMenu:{name:"geonode-metadata",position:30,text:"Map Metadata",icon:o.a.createElement(d.Glyphicon,{glyph:"list-alt"}),action:f.i.bind(null,"metadata",null),selector:Object(m.a)(p.b,g.i,(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=(t.canEdit,t.id);return{style:window.location.href.includes("/view/")&&n?{}:{display:"none"}}}))}},epics:{gnGetMetadata:E},reducers:{gnmetadataresource:O}})}}]);