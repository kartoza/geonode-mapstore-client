(window.webpackJsonp=window.webpackJsonp||[]).push([["map-library-leaflet-js",8,21,23],{"./MapStore2/node_modules/leaflet-plugins/layer/tile/Bing.js":function(e,t){L.BingLayer=L.TileLayer.extend({options:{subdomains:[0,1,2,3],type:"Aerial",attribution:"Bing",culture:""},initialize:function(e,t){L.Util.setOptions(this,t),this._key=e,this._url=null,this._providers=[],this.metaRequested=!1},tile2quad:function(e,t,r){for(var n="",o=r;o>0;o--){var i=0,a=1<<o-1;0!=(e&a)&&(i+=1),0!=(t&a)&&(i+=2),n+=i}return n},getTileUrl:function(e){var t=this._getZoomForUrl(),r=this.options.subdomains,n=this.options.subdomains[Math.abs((e.x+e.y)%r.length)];return this._url.replace("{subdomain}",n).replace("{quadkey}",this.tile2quad(e.x,e.y,t)).replace("{culture}",this.options.culture)},loadMetadata:function(){if(!this.metaRequested){this.metaRequested=!0;var e=this,t="_bing_metadata_"+L.Util.stamp(this);window[t]=function(r){window[t]=void 0;var n=document.getElementById(t);if(n.parentNode.removeChild(n),r.errorDetails)throw new Error(r.errorDetails);e.initMetadata(r)};var r="file:"===document.location.protocol?"http":document.location.protocol.slice(0,-1),n=r+"://dev.virtualearth.net/REST/v1/Imagery/Metadata/"+this.options.type+"?include=ImageryProviders&jsonp="+t+"&key="+this._key+"&UriScheme="+r,o=document.createElement("script");o.type="text/javascript",o.src=n,o.id=t,document.getElementsByTagName("head")[0].appendChild(o)}},initMetadata:function(e){var t=e.resourceSets[0].resources[0];if(this.options.subdomains=t.imageUrlSubdomains,this._url=t.imageUrl,t.imageryProviders)for(var r=0;r<t.imageryProviders.length;r++)for(var n=t.imageryProviders[r],o=0;o<n.coverageAreas.length;o++){var i=n.coverageAreas[o],a={zoomMin:i.zoomMin,zoomMax:i.zoomMax,active:!1},s=new L.LatLngBounds(new L.LatLng(i.bbox[0]+.01,i.bbox[1]+.01),new L.LatLng(i.bbox[2]-.01,i.bbox[3]-.01));a.bounds=s,a.attrib=n.attribution,this._providers.push(a)}this._update()},_update:function(){null!==this._url&&this._map&&(this._update_attribution(),L.TileLayer.prototype._update.apply(this,[]))},_update_attribution:function(){for(var e=L.latLngBounds(this._map.getBounds().getSouthWest().wrap(),this._map.getBounds().getNorthEast().wrap()),t=this._map.getZoom(),r=0;r<this._providers.length;r++){var n=this._providers[r];t<=n.zoomMax&&t>=n.zoomMin&&e.intersects(n.bounds)?(!n.active&&this._map.attributionControl&&this._map.attributionControl.addAttribution(n.attrib),n.active=!0):(n.active&&this._map.attributionControl&&this._map.attributionControl.removeAttribution(n.attrib),n.active=!1)}},onAdd:function(e){this.loadMetadata(),L.TileLayer.prototype.onAdd.apply(this,[e])},onRemove:function(e){for(var t=0;t<this._providers.length;t++){var r=this._providers[t];r.active&&this._map.attributionControl&&(this._map.attributionControl.removeAttribution(r.attrib),r.active=!1)}L.TileLayer.prototype.onRemove.apply(this,[e])}}),L.bingLayer=function(e,t){return new L.BingLayer(e,t)}},"./MapStore2/node_modules/leaflet-simple-graticule/L.SimpleGraticule.css":function(e,t,r){var n=r("./node_modules/css-loader/index.js!./node_modules/postcss-loader/src/index.js?!./MapStore2/node_modules/leaflet-simple-graticule/L.SimpleGraticule.css");"string"==typeof n&&(n=[[e.i,n,""]]);r("./node_modules/style-loader/addStyles.js")(n,{});n.locals&&(e.exports=n.locals)},"./MapStore2/node_modules/leaflet-simple-graticule/L.SimpleGraticule.js":function(e,t,r){var n=r("./MapStore2/web/client/libs/leaflet.js"),o=n.LayerGroup.extend({options:{interval:20,showOriginLabel:!0,redraw:"move"},lineStyle:{stroke:!0,color:"#111",opacity:.6,weight:1},initialize:function(e){n.LayerGroup.prototype.initialize.call(this),n.Util.setOptions(this,e)},onAdd:function(e){this._map=e;var t=this.redraw();this._map.on("viewreset "+this.options.redraw,t.redraw,t),this.eachLayer(e.addLayer,e)},onRemove:function(e){e.off("viewreset "+this.options.redraw,this.map),this.eachLayer(this.removeLayer,this)},redraw:function(){return this._bounds=this._map.getBounds().pad(.5),this.clearLayers(),this.constructLines(this.getMins(),this.getLineCounts()),this.options.showOriginLabel&&this.addLayer(this.addOriginLabel()),this},getLineCounts:function(){return{x:Math.ceil((this._bounds.getEast()-this._bounds.getWest())/this.options.interval),y:Math.ceil((this._bounds.getNorth()-this._bounds.getSouth())/this.options.interval)}},getMins:function(){var e=this.options.interval;return{x:Math.floor(this._bounds.getWest()/e)*e,y:Math.floor(this._bounds.getSouth()/e)*e}},constructLines:function(e,t){for(var r=new Array(t.x+t.y),n=new Array(t.x+t.y),o=0;o<=t.x;o++){var i=e.x+o*this.options.interval;r[o]=this.buildXLine(i),n[o]=this.buildLabel("gridlabel-horiz",i)}for(var a=0;a<=t.y;a++){var s=e.y+a*this.options.interval;r[a+o]=this.buildYLine(s),n[a+o]=this.buildLabel("gridlabel-vert",s)}r.forEach(this.addLayer,this),n.forEach(this.addLayer,this)},buildXLine:function(e){var t=new n.LatLng(this._bounds.getSouth(),e),r=new n.LatLng(this._bounds.getNorth(),e);return new n.Polyline([t,r],this.lineStyle)},buildYLine:function(e){var t=new n.LatLng(e,this._bounds.getWest()),r=new n.LatLng(e,this._bounds.getEast());return new n.Polyline([t,r],this.lineStyle)},buildLabel:function(e,t){var r,o=this._map.getBounds().pad(-.003);return r="gridlabel-horiz"==e?new n.LatLng(o.getNorth(),t):new n.LatLng(t,o.getWest()),n.marker(r,{icon:n.divIcon({iconSize:[0,0],className:"leaflet-grid-label",html:'<div class="'+e+'">'+t+"</div>"})})},addOriginLabel:function(){return n.marker([0,0],{icon:n.divIcon({iconSize:[0,0],className:"leaflet-grid-label",html:'<div class="gridlabel-horiz">(0,0)</div>'})})}});e.exports=o},"./MapStore2/node_modules/leaflet.gridlayer.googlemutant/Leaflet.GoogleMutant.js":function(e,t){L.GridLayer.GoogleMutant=L.GridLayer.extend({options:{minZoom:0,maxZoom:23,tileSize:256,subdomains:"abc",errorTileUrl:"",attribution:"",opacity:1,continuousWorld:!1,noWrap:!1,type:"roadmap",maxNativeZoom:21},initialize:function(e){L.GridLayer.prototype.initialize.call(this,e),this._ready=!!window.google&&!!window.google.maps&&!!window.google.maps.Map,this._GAPIPromise=this._ready?Promise.resolve(window.google):new Promise((function(e,t){var r=0,n=null;n=setInterval((function(){return r>=10?(clearInterval(n),t(new Error("window.google not found after 10 attempts"))):window.google&&window.google.maps&&window.google.maps.Map?(clearInterval(n),e(window.google)):void r++}),500)})),this._tileCallbacks={},this._freshTiles={},this._imagesPerTile="hybrid"===this.options.type?2:1},onAdd:function(e){L.GridLayer.prototype.onAdd.call(this,e),this._initMutantContainer(),this._GAPIPromise.then(function(){if(this._ready=!0,this._map=e,this._initMutant(),e.on("viewreset",this._reset,this),e.on("move",this._update,this),e.on("zoomend",this._handleZoomAnim,this),e.on("resize",this._resize,this),google.maps.event.addListenerOnce(this._mutant,"idle",function(){this._checkZoomLevels(),this._mutantIsReady=!0}.bind(this)),e._controlCorners.bottomright.style.marginBottom="20px",e._controlCorners.bottomleft.style.marginBottom="20px",this._reset(),this._update(),this._subLayers)for(var t in this._subLayers)this._subLayers[t].setMap(this._mutant)}.bind(this))},onRemove:function(e){L.GridLayer.prototype.onRemove.call(this,e),e._container.removeChild(this._mutantContainer),this._mutantContainer=void 0,google.maps.event.clearListeners(e,"idle"),google.maps.event.clearListeners(this._mutant,"idle"),e.off("viewreset",this._reset,this),e.off("move",this._update,this),e.off("zoomend",this._handleZoomAnim,this),e.off("resize",this._resize,this),e._controlCorners&&(e._controlCorners.bottomright.style.marginBottom="0em",e._controlCorners.bottomleft.style.marginBottom="0em")},getAttribution:function(){return this.options.attribution},setOpacity:function(e){this.options.opacity=e,e<1&&L.DomUtil.setOpacity(this._mutantContainer,e)},setElementSize:function(e,t){e.style.width=t.x+"px",e.style.height=t.y+"px"},addGoogleLayer:function(e,t){return this._subLayers||(this._subLayers={}),this._GAPIPromise.then(function(){var r=new(0,google.maps[e])(t);return r.setMap(this._mutant),this._subLayers[e]=r,r}.bind(this))},removeGoogleLayer:function(e){var t=this._subLayers&&this._subLayers[e];t&&(t.setMap(null),delete this._subLayers[e])},_initMutantContainer:function(){this._mutantContainer||(this._mutantContainer=L.DomUtil.create("div","leaflet-google-mutant leaflet-top leaflet-left"),this._mutantContainer.id="_MutantContainer_"+L.Util.stamp(this._mutantContainer),this._mutantContainer.style.zIndex="800",this._mutantContainer.style.pointerEvents="none",this._map.getContainer().appendChild(this._mutantContainer)),this.setOpacity(this.options.opacity),this.setElementSize(this._mutantContainer,this._map.getSize()),this._attachObserver(this._mutantContainer)},_initMutant:function(){if(this._ready&&this._mutantContainer){this._mutantCenter=new google.maps.LatLng(0,0);var e=new google.maps.Map(this._mutantContainer,{center:this._mutantCenter,zoom:0,tilt:0,mapTypeId:this.options.type,disableDefaultUI:!0,keyboardShortcuts:!1,draggable:!1,disableDoubleClickZoom:!0,scrollwheel:!1,streetViewControl:!1,styles:this.options.styles||{},backgroundColor:"transparent"});this._mutant=e,google.maps.event.addListenerOnce(e,"idle",function(){for(var e=this._mutantContainer.querySelectorAll("a"),t=0;t<e.length;t++)e[t].style.pointerEvents="auto"}.bind(this)),this.fire("spawned",{mapObject:e})}},_attachObserver:function(e){new MutationObserver(this._onMutations.bind(this)).observe(e,{childList:!0,subtree:!0})},_onMutations:function(e){for(var t=0;t<e.length;++t)for(var r=e[t],n=0;n<r.addedNodes.length;++n){var o=r.addedNodes[n];o instanceof HTMLImageElement?this._onMutatedImage(o):o instanceof HTMLElement&&Array.prototype.forEach.call(o.querySelectorAll("img"),this._onMutatedImage.bind(this))}},_roadRegexp:/!1i(\d+)!2i(\d+)!3i(\d+)!/,_satRegexp:/x=(\d+)&y=(\d+)&z=(\d+)/,_staticRegExp:/StaticMapService\.GetMapImage/,_onMutatedImage:function(e){var t,r=e.src.match(this._roadRegexp),n=0;if(r?(t={z:r[1],x:r[2],y:r[3]},this._imagesPerTile>1&&(e.style.zIndex=1,n=1)):((r=e.src.match(this._satRegexp))&&(t={x:r[1],y:r[2],z:r[3]}),n=0),t){var o=this._tileCoordsToKey(t);e.style.position="absolute",e.style.visibility="hidden";var i=o+"/"+n;if(this._freshTiles[i]=e,i in this._tileCallbacks&&this._tileCallbacks[i])this._tileCallbacks[i].pop()(e),this._tileCallbacks[i].length||delete this._tileCallbacks[i];else if(this._tiles[o]){var a=this._tiles[o].el,s=0===n?a.firstChild:a.firstChild.nextSibling,l=this._clone(e);a.replaceChild(l,s)}}else e.src.match(this._staticRegExp)&&(e.style.visibility="hidden")},createTile:function(e,t){var r=this._tileCoordsToKey(e),n=L.DomUtil.create("div");n.dataset.pending=this._imagesPerTile,t=t.bind(this,null,n);for(var o=0;o<this._imagesPerTile;o++){var i=r+"/"+o;if(i in this._freshTiles){var a=this._freshTiles[i];n.appendChild(this._clone(a)),n.dataset.pending--}else this._tileCallbacks[i]=this._tileCallbacks[i]||[],this._tileCallbacks[i].push(function(e){return function(r){e.appendChild(this._clone(r)),e.dataset.pending--,parseInt(e.dataset.pending)||t()}.bind(this)}.bind(this)(n))}return parseInt(n.dataset.pending)||L.Util.requestAnimFrame(t),n},_clone:function(e){var t=e.cloneNode(!0);return t.style.visibility="visible",t},_checkZoomLevels:function(){var e=this._map.getZoom(),t=this._mutant.getZoom();e&&t&&(t!==e||t>this.options.maxNativeZoom)&&this._setMaxNativeZoom(t)},_setMaxNativeZoom:function(e){e!=this.options.maxNativeZoom&&(this.options.maxNativeZoom=e,this._resetView())},_reset:function(){this._initContainer()},_update:function(){if(this._mutant){var e=this._map.getCenter(),t=new google.maps.LatLng(e.lat,e.lng);this._mutant.setCenter(t);var r=this._map.getZoom(),n=r!==Math.round(r),o=this._mutant.getZoom();n||r==o||(this._mutant.setZoom(r),this._mutantIsReady&&this._checkZoomLevels())}L.GridLayer.prototype._update.call(this)},_resize:function(){var e=this._map.getSize();this._mutantContainer.style.width===e.x&&this._mutantContainer.style.height===e.y||(this.setElementSize(this._mutantContainer,e),this._mutant&&google.maps.event.trigger(this._mutant,"resize"))},_handleZoomAnim:function(){if(this._mutant){var e=this._map.getCenter(),t=new google.maps.LatLng(e.lat,e.lng);this._mutant.setCenter(t),this._mutant.setZoom(Math.round(this._map.getZoom()))}},_removeTile:function(e){if(this._mutant)return setTimeout(this._pruneTile.bind(this,e),1e3),L.GridLayer.prototype._removeTile.call(this,e)},_pruneTile:function(e){for(var t=this._mutant.getZoom(),r=e.split(":")[2],n=this._mutant.getBounds(),o=n.getSouthWest(),i=n.getNorthEast(),a=L.latLngBounds([[o.lat(),o.lng()],[i.lat(),i.lng()]]),s=0;s<this._imagesPerTile;s++){var l=e+"/"+s;if(l in this._freshTiles){var u=this._map&&this._keyToBounds(e);this._map&&u.overlaps(a)&&r==t||delete this._freshTiles[l]}}}}),L.gridLayer.googleMutant=function(e){return new L.GridLayer.GoogleMutant(e)}},"./MapStore2/node_modules/leaflet.nontiledlayer/dist/NonTiledLayer-src.js":function(e,t,r){(function(t){e.exports=function e(t,r,n){function o(a,s){if(!r[a]){if(!t[a]){if(i)return i(a,!0);var l=new Error("Cannot find module '"+a+"'");throw l.code="MODULE_NOT_FOUND",l}var u=r[a]={exports:{}};t[a][0].call(u.exports,(function(e){var r=t[a][1][e];return o(r||e)}),u,u.exports,e,t,r,n)}return r[a].exports}for(var i=!1,a=0;a<n.length;a++)o(n[a]);return o}({1:[function(e,r,n){(function(e){"use strict";var t="undefined"!=typeof window?window.L:void 0!==e?e.L:null;t.NonTiledLayer.WMS=t.NonTiledLayer.extend({defaultWmsParams:{service:"WMS",request:"GetMap",version:"1.1.1",layers:"",styles:"",format:"image/jpeg",transparent:!1},options:{crs:null,uppercase:!1},initialize:function(e,r){this._wmsUrl=e;var n=t.extend({},this.defaultWmsParams);for(var o in r)t.NonTiledLayer.prototype.options.hasOwnProperty(o)||t.Layer&&t.Layer.prototype.options.hasOwnProperty(o)||(n[o]=r[o]);this.wmsParams=n,t.setOptions(this,r)},onAdd:function(e){this._crs=this.options.crs||e.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var r=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[r]=this._crs.code,t.NonTiledLayer.prototype.onAdd.call(this,e)},getImageUrl:function(e,r,n){var o=this.wmsParams;o.width=r,o.height=n;var i=this._crs.project(e.getNorthWest()),a=this._crs.project(e.getSouthEast()),s=this._wmsUrl,l=l=(this._wmsVersion>=1.3&&this._crs===t.CRS.EPSG4326?[a.y,i.x,i.y,a.x]:[i.x,a.y,a.x,i.y]).join(",");return s+t.Util.getParamString(this.wmsParams,s,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+l},setParams:function(e,r){return t.extend(this.wmsParams,e),r||this.redraw(),this}}),t.nonTiledLayer.wms=function(e,r){return new t.NonTiledLayer.WMS(e,r)},r.exports=t.NonTiledLayer.WMS}).call(this,void 0!==t?t:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],2:[function(e,r,n){(function(e){"use strict";var t="undefined"!=typeof window?window.L:void 0!==e?e.L:null;t.NonTiledLayer=(t.Layer||t.Class).extend({includes:t.Evented||t.Mixin.Events,emptyImageUrl:"data:image/gif;base64,R0lGODlhAQABAHAAACH5BAUAAAAALAAAAAABAAEAAAICRAEAOw==",options:{attribution:"",opacity:1,zIndex:void 0,minZoom:0,maxZoom:18,pointerEvents:null,errorImageUrl:"data:image/gif;base64,R0lGODlhAQABAHAAACH5BAUAAAAALAAAAAABAAEAAAICRAEAOw==",bounds:t.latLngBounds([-85.05,-180],[85.05,180]),useCanvas:void 0},key:"",initialize:function(e){t.setOptions(this,e)},onAdd:function(e){this._map=e,void 0===this._zoomAnimated&&(this._zoomAnimated=t.DomUtil.TRANSITION&&t.Browser.any3d&&!t.Browser.mobileOpera&&this._map.options.zoomAnimation),t.version<"1.0"&&this._map.on(this.getEvents(),this),this._div||(this._div=t.DomUtil.create("div","leaflet-image-layer"),this.options.pointerEvents&&(this._div.style["pointer-events"]=this.options.pointerEvents),void 0!==this.options.zIndex&&(this._div.style.zIndex=this.options.zIndex),void 0!==this.options.opacity&&(this._div.style.opacity=this.options.opacity)),this.getPane().appendChild(this._div);var r=!!window.HTMLCanvasElement;void 0===this.options.useCanvas?this._useCanvas=r:this._useCanvas=this.options.useCanvas,this._useCanvas?(this._bufferCanvas=this._initCanvas(),this._currentCanvas=this._initCanvas()):(this._bufferImage=this._initImage(),this._currentImage=this._initImage()),this._update()},getPane:function(){return t.Layer?t.Layer.prototype.getPane.call(this):(this.options.pane?this._pane=this.options.pane:this._pane=this._map.getPanes().overlayPane,this._pane)},onRemove:function(e){t.version<"1.0"&&this._map.off(this.getEvents(),this),this.getPane().removeChild(this._div),this._useCanvas?(this._div.removeChild(this._bufferCanvas),this._div.removeChild(this._currentCanvas)):(this._div.removeChild(this._bufferImage),this._div.removeChild(this._currentImage))},addTo:function(e){return e.addLayer(this),this},_setZoom:function(){this._useCanvas?(this._currentCanvas._bounds&&this._resetImageScale(this._currentCanvas,!0),this._bufferCanvas._bounds&&this._resetImageScale(this._bufferCanvas)):(this._currentImage._bounds&&this._resetImageScale(this._currentImage,!0),this._bufferImage._bounds&&this._resetImageScale(this._bufferImage))},getEvents:function(){var e={moveend:this._update};return this._zoomAnimated&&(e.zoomanim=this._animateZoom),t.version>="1.0"&&(e.zoom=this._setZoom),e},getElement:function(){return this._div},setOpacity:function(e){return this.options.opacity=e,this._div&&t.DomUtil.setOpacity(this._div,this.options.opacity),this},setZIndex:function(e){return e&&(this.options.zIndex=e,this._div&&(this._div.style.zIndex=e)),this},bringToFront:function(){return this._div&&this.getPane().appendChild(this._div),this},bringToBack:function(){return this._div&&this.getPane().insertBefore(this._div,this.getPane().firstChild),this},getAttribution:function(){return this.options.attribution},_initCanvas:function(){var e=t.DomUtil.create("canvas","leaflet-image-layer");return this._div.appendChild(e),e._image=new Image,this._ctx=e.getContext("2d"),this._map.options.zoomAnimation&&t.Browser.any3d?t.DomUtil.addClass(e,"leaflet-zoom-animated"):t.DomUtil.addClass(e,"leaflet-zoom-hide"),t.extend(e._image,{onload:t.bind(this._onImageLoad,this),onerror:t.bind(this._onImageError,this)}),e},_initImage:function(){var e=t.DomUtil.create("img","leaflet-image-layer");return this._div.appendChild(e),this._map.options.zoomAnimation&&t.Browser.any3d?t.DomUtil.addClass(e,"leaflet-zoom-animated"):t.DomUtil.addClass(e,"leaflet-zoom-hide"),t.extend(e,{galleryimg:"no",onselectstart:t.Util.falseFn,onmousemove:t.Util.falseFn,onload:t.bind(this._onImageLoad,this),onerror:t.bind(this._onImageError,this)}),e},redraw:function(){return this._map&&this._update(),this},_animateZoom:function(e){this._useCanvas?(this._currentCanvas._bounds&&this._animateImage(this._currentCanvas,e),this._bufferCanvas._bounds&&this._animateImage(this._bufferCanvas,e)):(this._currentImage._bounds&&this._animateImage(this._currentImage,e),this._bufferImage._bounds&&this._animateImage(this._bufferImage,e))},_animateImage:function(e,r){if(void 0===t.DomUtil.setTransform){var n=this._map,o=e._scale*n.getZoomScale(r.zoom),i=e._bounds.getNorthWest(),a=e._bounds.getSouthEast(),s=n._latLngToNewLayerPoint(i,r.zoom,r.center),l=n._latLngToNewLayerPoint(a,r.zoom,r.center)._subtract(s),u=s._add(l._multiplyBy(.5*(1-1/o)));e.style[t.DomUtil.TRANSFORM]=t.DomUtil.getTranslateString(u)+" scale("+o+") "}else n=this._map,o=e._scale*e._sscale*n.getZoomScale(r.zoom),i=e._bounds.getNorthWest(),a=e._bounds.getSouthEast(),s=n._latLngToNewLayerPoint(i,r.zoom,r.center),t.DomUtil.setTransform(e,s,o);e._lastScale=o},_resetImageScale:function(e,r){var n=new t.Bounds(this._map.latLngToLayerPoint(e._bounds.getNorthWest()),this._map.latLngToLayerPoint(e._bounds.getSouthEast())),o=e._orgBounds.getSize().y,i=n.getSize().y/o;e._sscale=i,t.DomUtil.setTransform(e,n.min,i)},_resetImage:function(e){var r=new t.Bounds(this._map.latLngToLayerPoint(e._bounds.getNorthWest()),this._map.latLngToLayerPoint(e._bounds.getSouthEast())),n=r.getSize();t.DomUtil.setPosition(e,r.min),e._orgBounds=r,e._sscale=1,this._useCanvas?(e.width=n.x,e.height=n.y):(e.style.width=n.x+"px",e.style.height=n.y+"px")},_getClippedBounds:function(){var e=this._map.getBounds(),r=e.getSouth(),n=e.getNorth(),o=e.getWest(),i=e.getEast(),a=this.options.bounds.getSouth(),s=this.options.bounds.getNorth(),l=this.options.bounds.getWest(),u=this.options.bounds.getEast();r<a&&(r=a),n>s&&(n=s),o<l&&(o=l),i>u&&(i=u);var c=new t.LatLng(n,o),p=new t.LatLng(r,i);return new t.LatLngBounds(c,p)},_update:function(){var e,r=this._getClippedBounds(),n=this._map.latLngToContainerPoint(r.getNorthWest()),o=this._map.latLngToContainerPoint(r.getSouthEast()),i=o.x-n.x,a=o.y-n.y;if(this._useCanvas?(this._bufferCanvas._scale=this._bufferCanvas._lastScale,this._currentCanvas._scale=this._currentCanvas._lastScale=1,this._bufferCanvas._sscale=1,this._currentCanvas._bounds=r,this._resetImage(this._currentCanvas),e=this._currentCanvas._image,t.DomUtil.setOpacity(e,0)):(this._bufferImage._scale=this._bufferImage._lastScale,this._currentImage._scale=this._currentImage._lastScale=1,this._bufferImage._sscale=1,this._currentImage._bounds=r,this._resetImage(this._currentImage),e=this._currentImage,t.DomUtil.setOpacity(e,0)),this._map.getZoom()<this.options.minZoom||this._map.getZoom()>this.options.maxZoom||i<32||a<32)return this._div.style.visibility="hidden",e.src=this.emptyImageUrl,this.key=e.key="<empty>",void(e.tag=null);this.fire("loading"),this.key=r.getNorthWest()+", "+r.getSouthEast()+", "+i+", "+a,this.getImageUrl?(e.src=this.getImageUrl(r,i,a),e.key=this.key):this.getImageUrlAsync(r,i,a,this.key,(function(t,r,n){e.key=t,e.src=r,e.tag=n}))},_onImageError:function(e){this.fire("error",e),t.DomUtil.addClass(e.target,"invalid"),e.target.src!==this.options.errorImageUrl&&(e.target.src=this.options.errorImageUrl)},_onImageLoad:function(e){(e.target.src===this.options.errorImageUrl||(t.DomUtil.removeClass(e.target,"invalid"),e.target.key&&e.target.key===this.key))&&(this._onImageDone(e),this.fire("load",e))},_onImageDone:function(e){if(this._useCanvas)this._renderCanvas(e);else{t.DomUtil.setOpacity(this._currentImage,1),t.DomUtil.setOpacity(this._bufferImage,0),this._addInteraction&&this._currentImage.tag&&this._addInteraction(this._currentImage.tag);var r=this._bufferImage;this._bufferImage=this._currentImage,this._currentImage=r}"<empty>"!==e.target.key&&(this._div.style.visibility="visible")},_renderCanvas:function(e){this._currentCanvas.getContext("2d").drawImage(this._currentCanvas._image,0,0),t.DomUtil.setOpacity(this._currentCanvas,1),t.DomUtil.setOpacity(this._bufferCanvas,0),this._addInteraction&&this._currentCanvas._image.tag&&this._addInteraction(this._currentCanvas._image.tag);var r=this._bufferCanvas;this._bufferCanvas=this._currentCanvas,this._currentCanvas=r}}),t.nonTiledLayer=function(){return new t.NonTiledLayer},r.exports=t.NonTiledLayer}).call(this,void 0!==t?t:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}]},{},[2,1])(2)}).call(this,r("./node_modules/webpack/buildin/global.js"))},"./MapStore2/node_modules/lodash/_baseAssign.js":function(e,t,r){var n=r("./MapStore2/node_modules/lodash/_copyObject.js"),o=r("./MapStore2/node_modules/lodash/keys.js");e.exports=function(e,t){return e&&n(t,o(t),e)}},"./MapStore2/node_modules/lodash/_baseAssignIn.js":function(e,t,r){var n=r("./MapStore2/node_modules/lodash/_copyObject.js"),o=r("./MapStore2/node_modules/lodash/keysIn.js");e.exports=function(e,t){return e&&n(t,o(t),e)}},"./MapStore2/node_modules/lodash/_baseClone.js":function(e,t,r){var n=r("./MapStore2/node_modules/lodash/_Stack.js"),o=r("./MapStore2/node_modules/lodash/_arrayEach.js"),i=r("./MapStore2/node_modules/lodash/_assignValue.js"),a=r("./MapStore2/node_modules/lodash/_baseAssign.js"),s=r("./MapStore2/node_modules/lodash/_baseAssignIn.js"),l=r("./MapStore2/node_modules/lodash/_cloneBuffer.js"),u=r("./MapStore2/node_modules/lodash/_copyArray.js"),c=r("./MapStore2/node_modules/lodash/_copySymbols.js"),p=r("./MapStore2/node_modules/lodash/_copySymbolsIn.js"),f=r("./MapStore2/node_modules/lodash/_getAllKeys.js"),d=r("./MapStore2/node_modules/lodash/_getAllKeysIn.js"),m=r("./MapStore2/node_modules/lodash/_getTag.js"),y=r("./MapStore2/node_modules/lodash/_initCloneArray.js"),h=r("./MapStore2/node_modules/lodash/_initCloneByTag.js"),g=r("./MapStore2/node_modules/lodash/_initCloneObject.js"),b=r("./MapStore2/node_modules/lodash/isArray.js"),v=r("./MapStore2/node_modules/lodash/isBuffer.js"),S=r("./MapStore2/node_modules/lodash/isMap.js"),O=r("./MapStore2/node_modules/lodash/isObject.js"),w=r("./MapStore2/node_modules/lodash/isSet.js"),j=r("./MapStore2/node_modules/lodash/keys.js"),_={};_["[object Arguments]"]=_["[object Array]"]=_["[object ArrayBuffer]"]=_["[object DataView]"]=_["[object Boolean]"]=_["[object Date]"]=_["[object Float32Array]"]=_["[object Float64Array]"]=_["[object Int8Array]"]=_["[object Int16Array]"]=_["[object Int32Array]"]=_["[object Map]"]=_["[object Number]"]=_["[object Object]"]=_["[object RegExp]"]=_["[object Set]"]=_["[object String]"]=_["[object Symbol]"]=_["[object Uint8Array]"]=_["[object Uint8ClampedArray]"]=_["[object Uint16Array]"]=_["[object Uint32Array]"]=!0,_["[object Error]"]=_["[object Function]"]=_["[object WeakMap]"]=!1,e.exports=function e(t,r,M,x,P,E){var L,C=1&r,T=2&r,I=4&r;if(M&&(L=P?M(t,x,P,E):M(t)),void 0!==L)return L;if(!O(t))return t;var A=b(t);if(A){if(L=y(t),!C)return u(t,L)}else{var N=m(t),R="[object Function]"==N||"[object GeneratorFunction]"==N;if(v(t))return l(t,C);if("[object Object]"==N||"[object Arguments]"==N||R&&!P){if(L=T||R?{}:g(t),!C)return T?p(t,s(L,t)):c(t,a(L,t))}else{if(!_[N])return P?t:{};L=h(t,N,C)}}E||(E=new n);var F=E.get(t);if(F)return F;E.set(t,L),w(t)?t.forEach((function(n){L.add(e(n,r,M,n,t,E))})):S(t)&&t.forEach((function(n,o){L.set(o,e(n,r,M,o,t,E))}));var k=I?T?d:f:T?keysIn:j,D=A?void 0:k(t);return o(D||t,(function(n,o){D&&(n=t[o=n]),i(L,o,e(n,r,M,o,t,E))})),L}},"./MapStore2/node_modules/lodash/_baseIsMap.js":function(e,t,r){var n=r("./MapStore2/node_modules/lodash/_getTag.js"),o=r("./MapStore2/node_modules/lodash/isObjectLike.js");e.exports=function(e){return o(e)&&"[object Map]"==n(e)}},"./MapStore2/node_modules/lodash/_baseIsSet.js":function(e,t,r){var n=r("./MapStore2/node_modules/lodash/_getTag.js"),o=r("./MapStore2/node_modules/lodash/isObjectLike.js");e.exports=function(e){return o(e)&&"[object Set]"==n(e)}},"./MapStore2/node_modules/lodash/_baseSlice.js":function(e,t){e.exports=function(e,t,r){var n=-1,o=e.length;t<0&&(t=-t>o?0:o+t),(r=r>o?o:r)<0&&(r+=o),o=t>r?0:r-t>>>0,t>>>=0;for(var i=Array(o);++n<o;)i[n]=e[n+t];return i}},"./MapStore2/node_modules/lodash/_baseUnset.js":function(e,t,r){var n=r("./MapStore2/node_modules/lodash/_castPath.js"),o=r("./MapStore2/node_modules/lodash/last.js"),i=r("./MapStore2/node_modules/lodash/_parent.js"),a=r("./MapStore2/node_modules/lodash/_toKey.js");e.exports=function(e,t){return t=n(t,e),null==(e=i(e,t))||delete e[a(o(t))]}},"./MapStore2/node_modules/lodash/_cloneDataView.js":function(e,t,r){var n=r("./MapStore2/node_modules/lodash/_cloneArrayBuffer.js");e.exports=function(e,t){var r=t?n(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.byteLength)}},"./MapStore2/node_modules/lodash/_cloneRegExp.js":function(e,t){var r=/\w*$/;e.exports=function(e){var t=new e.constructor(e.source,r.exec(e));return t.lastIndex=e.lastIndex,t}},"./MapStore2/node_modules/lodash/_cloneSymbol.js":function(e,t,r){var n=r("./MapStore2/node_modules/lodash/_Symbol.js"),o=n?n.prototype:void 0,i=o?o.valueOf:void 0;e.exports=function(e){return i?Object(i.call(e)):{}}},"./MapStore2/node_modules/lodash/_copySymbols.js":function(e,t,r){var n=r("./MapStore2/node_modules/lodash/_copyObject.js"),o=r("./MapStore2/node_modules/lodash/_getSymbols.js");e.exports=function(e,t){return n(e,o(e),t)}},"./MapStore2/node_modules/lodash/_copySymbolsIn.js":function(e,t,r){var n=r("./MapStore2/node_modules/lodash/_copyObject.js"),o=r("./MapStore2/node_modules/lodash/_getSymbolsIn.js");e.exports=function(e,t){return n(e,o(e),t)}},"./MapStore2/node_modules/lodash/_createFlow.js":function(e,t,r){var n=r("./MapStore2/node_modules/lodash/_LodashWrapper.js"),o=r("./MapStore2/node_modules/lodash/_flatRest.js"),i=r("./MapStore2/node_modules/lodash/_getData.js"),a=r("./MapStore2/node_modules/lodash/_getFuncName.js"),s=r("./MapStore2/node_modules/lodash/isArray.js"),l=r("./MapStore2/node_modules/lodash/_isLaziable.js");e.exports=function(e){return o((function(t){var r=t.length,o=r,u=n.prototype.thru;for(e&&t.reverse();o--;){var c=t[o];if("function"!=typeof c)throw new TypeError("Expected a function");if(u&&!p&&"wrapper"==a(c))var p=new n([],!0)}for(o=p?o:r;++o<r;){c=t[o];var f=a(c),d="wrapper"==f?i(c):void 0;p=d&&l(d[0])&&424==d[1]&&!d[4].length&&1==d[9]?p[a(d[0])].apply(p,d[3]):1==c.length&&l(c)?p[f]():p.thru(c)}return function(){var e=arguments,n=e[0];if(p&&1==e.length&&s(n))return p.plant(n).value();for(var o=0,i=r?t[o].apply(this,e):n;++o<r;)i=t[o].call(this,i);return i}}))}},"./MapStore2/node_modules/lodash/_getAllKeysIn.js":function(e,t,r){var n=r("./MapStore2/node_modules/lodash/_baseGetAllKeys.js"),o=r("./MapStore2/node_modules/lodash/_getSymbolsIn.js"),i=r("./MapStore2/node_modules/lodash/keysIn.js");e.exports=function(e){return n(e,i,o)}},"./MapStore2/node_modules/lodash/_getSymbolsIn.js":function(e,t,r){var n=r("./MapStore2/node_modules/lodash/_arrayPush.js"),o=r("./MapStore2/node_modules/lodash/_getPrototype.js"),i=r("./MapStore2/node_modules/lodash/_getSymbols.js"),a=r("./MapStore2/node_modules/lodash/stubArray.js"),s=Object.getOwnPropertySymbols?function(e){for(var t=[];e;)n(t,i(e)),e=o(e);return t}:a;e.exports=s},"./MapStore2/node_modules/lodash/_initCloneArray.js":function(e,t){var r=Object.prototype.hasOwnProperty;e.exports=function(e){var t=e.length,n=new e.constructor(t);return t&&"string"==typeof e[0]&&r.call(e,"index")&&(n.index=e.index,n.input=e.input),n}},"./MapStore2/node_modules/lodash/_initCloneByTag.js":function(e,t,r){var n=r("./MapStore2/node_modules/lodash/_cloneArrayBuffer.js"),o=r("./MapStore2/node_modules/lodash/_cloneDataView.js"),i=r("./MapStore2/node_modules/lodash/_cloneRegExp.js"),a=r("./MapStore2/node_modules/lodash/_cloneSymbol.js"),s=r("./MapStore2/node_modules/lodash/_cloneTypedArray.js");e.exports=function(e,t,r){var l=e.constructor;switch(t){case"[object ArrayBuffer]":return n(e);case"[object Boolean]":case"[object Date]":return new l(+e);case"[object DataView]":return o(e,r);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return s(e,r);case"[object Map]":return new l;case"[object Number]":case"[object String]":return new l(e);case"[object RegExp]":return i(e);case"[object Set]":return new l;case"[object Symbol]":return a(e)}}},"./MapStore2/node_modules/lodash/_parent.js":function(e,t,r){var n=r("./MapStore2/node_modules/lodash/_baseGet.js"),o=r("./MapStore2/node_modules/lodash/_baseSlice.js");e.exports=function(e,t){return t.length<2?e:n(e,o(t,0,-1))}},"./MapStore2/node_modules/lodash/ary.js":function(e,t,r){var n=r("./MapStore2/node_modules/lodash/_createWrap.js");e.exports=function(e,t,r){return t=r?void 0:t,t=e&&null==t?e.length:t,n(e,128,void 0,void 0,void 0,void 0,t)}},"./MapStore2/node_modules/lodash/clone.js":function(e,t,r){var n=r("./MapStore2/node_modules/lodash/_baseClone.js");e.exports=function(e){return n(e,4)}},"./MapStore2/node_modules/lodash/flowRight.js":function(e,t,r){var n=r("./MapStore2/node_modules/lodash/_createFlow.js")(!0);e.exports=n},"./MapStore2/node_modules/lodash/fp/_baseConvert.js":function(e,t,r){var n=r("./MapStore2/node_modules/lodash/fp/_mapping.js"),o=r("./MapStore2/node_modules/lodash/fp/placeholder.js"),i=Array.prototype.push;function a(e,t){return 2==t?function(t,r){return e(t,r)}:function(t){return e(t)}}function s(e){for(var t=e?e.length:0,r=Array(t);t--;)r[t]=e[t];return r}function l(e,t){return function(){var r=arguments.length;if(r){for(var n=Array(r);r--;)n[r]=arguments[r];var o=n[0]=t.apply(void 0,n);return e.apply(void 0,n),o}}}e.exports=function e(t,r,u,c){var p="function"==typeof r,f=r===Object(r);if(f&&(c=u,u=r,r=void 0),null==u)throw new TypeError;c||(c={});var d=!("cap"in c)||c.cap,m=!("curry"in c)||c.curry,y=!("fixed"in c)||c.fixed,h=!("immutable"in c)||c.immutable,g=!("rearg"in c)||c.rearg,b=p?u:o,v="curry"in c&&c.curry,S="fixed"in c&&c.fixed,O="rearg"in c&&c.rearg,w=p?u.runInContext():void 0,j=p?u:{ary:t.ary,assign:t.assign,clone:t.clone,curry:t.curry,forEach:t.forEach,isArray:t.isArray,isError:t.isError,isFunction:t.isFunction,isWeakMap:t.isWeakMap,iteratee:t.iteratee,keys:t.keys,rearg:t.rearg,toInteger:t.toInteger,toPath:t.toPath},_=j.ary,M=j.assign,x=j.clone,P=j.curry,E=j.forEach,L=j.isArray,C=j.isError,T=j.isFunction,I=j.isWeakMap,A=j.keys,N=j.rearg,R=j.toInteger,F=j.toPath,k=A(n.aryMethod),D={castArray:function(e){return function(){var t=arguments[0];return L(t)?e(s(t)):e.apply(void 0,arguments)}},iteratee:function(e){return function(){var t=arguments[0],r=arguments[1],n=e(t,r),o=n.length;return d&&"number"==typeof r?(r=r>2?r-2:1,o&&o<=r?n:a(n,r)):n}},mixin:function(e){return function(t){var r=this;if(!T(r))return e(r,Object(t));var n=[];return E(A(t),(function(e){T(t[e])&&n.push([e,r.prototype[e]])})),e(r,Object(t)),E(n,(function(e){var t=e[1];T(t)?r.prototype[e[0]]=t:delete r.prototype[e[0]]})),r}},nthArg:function(e){return function(t){var r=t<0?1:R(t)+1;return P(e(t),r)}},rearg:function(e){return function(t,r){var n=r?r.length:0;return P(e(t,r),n)}},runInContext:function(r){return function(n){return e(t,r(n),c)}}};function G(e,t){if(d){var r=n.iterateeRearg[e];if(r)return function(e,t){return W(e,(function(e){var r=t.length;return function(e,t){return 2==t?function(t,r){return e.apply(void 0,arguments)}:function(t){return e.apply(void 0,arguments)}}(N(a(e,r),t),r)}))}(t,r);var o=!p&&n.iterateeAry[e];if(o)return function(e,t){return W(e,(function(e){return"function"==typeof e?a(e,t):e}))}(t,o)}return t}function U(e,t,r){if(y&&(S||!n.skipFixed[e])){var o=n.methodSpread[e],a=o&&o.start;return void 0===a?_(t,r):function(e,t){return function(){for(var r=arguments.length,n=r-1,o=Array(r);r--;)o[r]=arguments[r];var a=o[t],s=o.slice(0,t);return a&&i.apply(s,a),t!=n&&i.apply(s,o.slice(t+1)),e.apply(this,s)}}(t,a)}return t}function B(e,t,r){return g&&r>1&&(O||!n.skipRearg[e])?N(t,n.methodRearg[e]||n.aryRearg[r]):t}function z(e,t){for(var r=-1,n=(t=F(t)).length,o=n-1,i=x(Object(e)),a=i;null!=a&&++r<n;){var s=t[r],l=a[s];null==l||T(l)||C(l)||I(l)||(a[s]=x(r==o?l:Object(l))),a=a[s]}return i}function q(t,r){var o=n.aliasToReal[t]||t,i=n.remap[o]||o,a=c;return function(t){var n=p?w:j,s=p?w[i]:r,l=M(M({},a),t);return e(n,o,s,l)}}function W(e,t){return function(){var r=arguments.length;if(!r)return e();for(var n=Array(r);r--;)n[r]=arguments[r];var o=g?0:r-1;return n[o]=t(n[o]),e.apply(void 0,n)}}function Z(e,t,r){var o,i=n.aliasToReal[e]||e,a=t,u=D[i];return u?a=u(t):h&&(n.mutate.array[i]?a=l(t,s):n.mutate.object[i]?a=l(t,function(e){return function(t){return e({},t)}}(t)):n.mutate.set[i]&&(a=l(t,z))),E(k,(function(e){return E(n.aryMethod[e],(function(t){if(i==t){var r=n.methodSpread[i],s=r&&r.afterRearg;return o=s?U(i,B(i,a,e),e):B(i,U(i,a,e),e),o=function(e,t,r){return v||m&&r>1?P(t,r):t}(0,o=G(i,o),e),!1}})),!o})),o||(o=a),o==t&&(o=v?P(o,1):function(){return t.apply(this,arguments)}),o.convert=q(i,t),o.placeholder=t.placeholder=r,o}if(!f)return Z(r,u,b);var V=u,H=[];return E(k,(function(e){E(n.aryMethod[e],(function(e){var t=V[n.remap[e]||e];t&&H.push([e,Z(e,t,V)])}))})),E(A(V),(function(e){var t=V[e];if("function"==typeof t){for(var r=H.length;r--;)if(H[r][0]==e)return;t.convert=q(e,t),H.push([e,t])}})),E(H,(function(e){V[e[0]]=e[1]})),V.convert=function(e){return V.runInContext.convert(e)(void 0)},V.placeholder=V,E(A(V),(function(e){E(n.realToAlias[e]||[],(function(t){V[t]=V[e]}))})),V}},"./MapStore2/node_modules/lodash/fp/_mapping.js":function(e,t){t.aliasToReal={each:"forEach",eachRight:"forEachRight",entries:"toPairs",entriesIn:"toPairsIn",extend:"assignIn",extendAll:"assignInAll",extendAllWith:"assignInAllWith",extendWith:"assignInWith",first:"head",conforms:"conformsTo",matches:"isMatch",property:"get",__:"placeholder",F:"stubFalse",T:"stubTrue",all:"every",allPass:"overEvery",always:"constant",any:"some",anyPass:"overSome",apply:"spread",assoc:"set",assocPath:"set",complement:"negate",compose:"flowRight",contains:"includes",dissoc:"unset",dissocPath:"unset",dropLast:"dropRight",dropLastWhile:"dropRightWhile",equals:"isEqual",identical:"eq",indexBy:"keyBy",init:"initial",invertObj:"invert",juxt:"over",omitAll:"omit",nAry:"ary",path:"get",pathEq:"matchesProperty",pathOr:"getOr",paths:"at",pickAll:"pick",pipe:"flow",pluck:"map",prop:"get",propEq:"matchesProperty",propOr:"getOr",props:"at",symmetricDifference:"xor",symmetricDifferenceBy:"xorBy",symmetricDifferenceWith:"xorWith",takeLast:"takeRight",takeLastWhile:"takeRightWhile",unapply:"rest",unnest:"flatten",useWith:"overArgs",where:"conformsTo",whereEq:"isMatch",zipObj:"zipObject"},t.aryMethod={1:["assignAll","assignInAll","attempt","castArray","ceil","create","curry","curryRight","defaultsAll","defaultsDeepAll","floor","flow","flowRight","fromPairs","invert","iteratee","memoize","method","mergeAll","methodOf","mixin","nthArg","over","overEvery","overSome","rest","reverse","round","runInContext","spread","template","trim","trimEnd","trimStart","uniqueId","words","zipAll"],2:["add","after","ary","assign","assignAllWith","assignIn","assignInAllWith","at","before","bind","bindAll","bindKey","chunk","cloneDeepWith","cloneWith","concat","conformsTo","countBy","curryN","curryRightN","debounce","defaults","defaultsDeep","defaultTo","delay","difference","divide","drop","dropRight","dropRightWhile","dropWhile","endsWith","eq","every","filter","find","findIndex","findKey","findLast","findLastIndex","findLastKey","flatMap","flatMapDeep","flattenDepth","forEach","forEachRight","forIn","forInRight","forOwn","forOwnRight","get","groupBy","gt","gte","has","hasIn","includes","indexOf","intersection","invertBy","invoke","invokeMap","isEqual","isMatch","join","keyBy","lastIndexOf","lt","lte","map","mapKeys","mapValues","matchesProperty","maxBy","meanBy","merge","mergeAllWith","minBy","multiply","nth","omit","omitBy","overArgs","pad","padEnd","padStart","parseInt","partial","partialRight","partition","pick","pickBy","propertyOf","pull","pullAll","pullAt","random","range","rangeRight","rearg","reject","remove","repeat","restFrom","result","sampleSize","some","sortBy","sortedIndex","sortedIndexOf","sortedLastIndex","sortedLastIndexOf","sortedUniqBy","split","spreadFrom","startsWith","subtract","sumBy","take","takeRight","takeRightWhile","takeWhile","tap","throttle","thru","times","trimChars","trimCharsEnd","trimCharsStart","truncate","union","uniqBy","uniqWith","unset","unzipWith","without","wrap","xor","zip","zipObject","zipObjectDeep"],3:["assignInWith","assignWith","clamp","differenceBy","differenceWith","findFrom","findIndexFrom","findLastFrom","findLastIndexFrom","getOr","includesFrom","indexOfFrom","inRange","intersectionBy","intersectionWith","invokeArgs","invokeArgsMap","isEqualWith","isMatchWith","flatMapDepth","lastIndexOfFrom","mergeWith","orderBy","padChars","padCharsEnd","padCharsStart","pullAllBy","pullAllWith","rangeStep","rangeStepRight","reduce","reduceRight","replace","set","slice","sortedIndexBy","sortedLastIndexBy","transform","unionBy","unionWith","update","xorBy","xorWith","zipWith"],4:["fill","setWith","updateWith"]},t.aryRearg={2:[1,0],3:[2,0,1],4:[3,2,0,1]},t.iterateeAry={dropRightWhile:1,dropWhile:1,every:1,filter:1,find:1,findFrom:1,findIndex:1,findIndexFrom:1,findKey:1,findLast:1,findLastFrom:1,findLastIndex:1,findLastIndexFrom:1,findLastKey:1,flatMap:1,flatMapDeep:1,flatMapDepth:1,forEach:1,forEachRight:1,forIn:1,forInRight:1,forOwn:1,forOwnRight:1,map:1,mapKeys:1,mapValues:1,partition:1,reduce:2,reduceRight:2,reject:1,remove:1,some:1,takeRightWhile:1,takeWhile:1,times:1,transform:2},t.iterateeRearg={mapKeys:[1],reduceRight:[1,0]},t.methodRearg={assignInAllWith:[1,0],assignInWith:[1,2,0],assignAllWith:[1,0],assignWith:[1,2,0],differenceBy:[1,2,0],differenceWith:[1,2,0],getOr:[2,1,0],intersectionBy:[1,2,0],intersectionWith:[1,2,0],isEqualWith:[1,2,0],isMatchWith:[2,1,0],mergeAllWith:[1,0],mergeWith:[1,2,0],padChars:[2,1,0],padCharsEnd:[2,1,0],padCharsStart:[2,1,0],pullAllBy:[2,1,0],pullAllWith:[2,1,0],rangeStep:[1,2,0],rangeStepRight:[1,2,0],setWith:[3,1,2,0],sortedIndexBy:[2,1,0],sortedLastIndexBy:[2,1,0],unionBy:[1,2,0],unionWith:[1,2,0],updateWith:[3,1,2,0],xorBy:[1,2,0],xorWith:[1,2,0],zipWith:[1,2,0]},t.methodSpread={assignAll:{start:0},assignAllWith:{start:0},assignInAll:{start:0},assignInAllWith:{start:0},defaultsAll:{start:0},defaultsDeepAll:{start:0},invokeArgs:{start:2},invokeArgsMap:{start:2},mergeAll:{start:0},mergeAllWith:{start:0},partial:{start:1},partialRight:{start:1},without:{start:1},zipAll:{start:0}},t.mutate={array:{fill:!0,pull:!0,pullAll:!0,pullAllBy:!0,pullAllWith:!0,pullAt:!0,remove:!0,reverse:!0},object:{assign:!0,assignAll:!0,assignAllWith:!0,assignIn:!0,assignInAll:!0,assignInAllWith:!0,assignInWith:!0,assignWith:!0,defaults:!0,defaultsAll:!0,defaultsDeep:!0,defaultsDeepAll:!0,merge:!0,mergeAll:!0,mergeAllWith:!0,mergeWith:!0},set:{set:!0,setWith:!0,unset:!0,update:!0,updateWith:!0}},t.realToAlias=function(){var e=Object.prototype.hasOwnProperty,r=t.aliasToReal,n={};for(var o in r){var i=r[o];e.call(n,i)?n[i].push(o):n[i]=[o]}return n}(),t.remap={assignAll:"assign",assignAllWith:"assignWith",assignInAll:"assignIn",assignInAllWith:"assignInWith",curryN:"curry",curryRightN:"curryRight",defaultsAll:"defaults",defaultsDeepAll:"defaultsDeep",findFrom:"find",findIndexFrom:"findIndex",findLastFrom:"findLast",findLastIndexFrom:"findLastIndex",getOr:"get",includesFrom:"includes",indexOfFrom:"indexOf",invokeArgs:"invoke",invokeArgsMap:"invokeMap",lastIndexOfFrom:"lastIndexOf",mergeAll:"merge",mergeAllWith:"mergeWith",padChars:"pad",padCharsEnd:"padEnd",padCharsStart:"padStart",propertyOf:"get",rangeStep:"range",rangeStepRight:"rangeRight",restFrom:"rest",spreadFrom:"spread",trimChars:"trim",trimCharsEnd:"trimEnd",trimCharsStart:"trimStart",zipAll:"zip"},t.skipFixed={castArray:!0,flow:!0,flowRight:!0,iteratee:!0,mixin:!0,rearg:!0,runInContext:!0},t.skipRearg={add:!0,assign:!0,assignIn:!0,bind:!0,bindKey:!0,concat:!0,difference:!0,divide:!0,eq:!0,gt:!0,gte:!0,isEqual:!0,lt:!0,lte:!0,matchesProperty:!0,merge:!0,multiply:!0,overArgs:!0,partial:!0,partialRight:!0,propertyOf:!0,random:!0,range:!0,rangeRight:!0,subtract:!0,zip:!0,zipObject:!0,zipObjectDeep:!0}},"./MapStore2/node_modules/lodash/fp/_util.js":function(e,t,r){e.exports={ary:r("./MapStore2/node_modules/lodash/ary.js"),assign:r("./MapStore2/node_modules/lodash/_baseAssign.js"),clone:r("./MapStore2/node_modules/lodash/clone.js"),curry:r("./MapStore2/node_modules/lodash/curry.js"),forEach:r("./MapStore2/node_modules/lodash/_arrayEach.js"),isArray:r("./MapStore2/node_modules/lodash/isArray.js"),isError:r("./MapStore2/node_modules/lodash/isError.js"),isFunction:r("./MapStore2/node_modules/lodash/isFunction.js"),isWeakMap:r("./MapStore2/node_modules/lodash/isWeakMap.js"),iteratee:r("./MapStore2/node_modules/lodash/iteratee.js"),keys:r("./MapStore2/node_modules/lodash/_baseKeys.js"),rearg:r("./MapStore2/node_modules/lodash/rearg.js"),toInteger:r("./MapStore2/node_modules/lodash/toInteger.js"),toPath:r("./MapStore2/node_modules/lodash/toPath.js")}},"./MapStore2/node_modules/lodash/fp/compose.js":function(e,t,r){e.exports=r("./MapStore2/node_modules/lodash/fp/flowRight.js")},"./MapStore2/node_modules/lodash/fp/convert.js":function(e,t,r){var n=r("./MapStore2/node_modules/lodash/fp/_baseConvert.js"),o=r("./MapStore2/node_modules/lodash/fp/_util.js");e.exports=function(e,t,r){return n(o,e,t,r)}},"./MapStore2/node_modules/lodash/fp/flowRight.js":function(e,t,r){var n=r("./MapStore2/node_modules/lodash/fp/convert.js")("flowRight",r("./MapStore2/node_modules/lodash/flowRight.js"));n.placeholder=r("./MapStore2/node_modules/lodash/fp/placeholder.js"),e.exports=n},"./MapStore2/node_modules/lodash/fp/placeholder.js":function(e,t){e.exports={}},"./MapStore2/node_modules/lodash/fp/set.js":function(e,t,r){var n=r("./MapStore2/node_modules/lodash/fp/convert.js")("set",r("./MapStore2/node_modules/lodash/set.js"));n.placeholder=r("./MapStore2/node_modules/lodash/fp/placeholder.js"),e.exports=n},"./MapStore2/node_modules/lodash/fp/unset.js":function(e,t,r){var n=r("./MapStore2/node_modules/lodash/fp/convert.js")("unset",r("./MapStore2/node_modules/lodash/unset.js"));n.placeholder=r("./MapStore2/node_modules/lodash/fp/placeholder.js"),e.exports=n},"./MapStore2/node_modules/lodash/isError.js":function(e,t,r){var n=r("./MapStore2/node_modules/lodash/_baseGetTag.js"),o=r("./MapStore2/node_modules/lodash/isObjectLike.js"),i=r("./MapStore2/node_modules/lodash/isPlainObject.js");e.exports=function(e){if(!o(e))return!1;var t=n(e);return"[object Error]"==t||"[object DOMException]"==t||"string"==typeof e.message&&"string"==typeof e.name&&!i(e)}},"./MapStore2/node_modules/lodash/isMap.js":function(e,t,r){var n=r("./MapStore2/node_modules/lodash/_baseIsMap.js"),o=r("./MapStore2/node_modules/lodash/_baseUnary.js"),i=r("./MapStore2/node_modules/lodash/_nodeUtil.js"),a=i&&i.isMap,s=a?o(a):n;e.exports=s},"./MapStore2/node_modules/lodash/isSet.js":function(e,t,r){var n=r("./MapStore2/node_modules/lodash/_baseIsSet.js"),o=r("./MapStore2/node_modules/lodash/_baseUnary.js"),i=r("./MapStore2/node_modules/lodash/_nodeUtil.js"),a=i&&i.isSet,s=a?o(a):n;e.exports=s},"./MapStore2/node_modules/lodash/isWeakMap.js":function(e,t,r){var n=r("./MapStore2/node_modules/lodash/_getTag.js"),o=r("./MapStore2/node_modules/lodash/isObjectLike.js");e.exports=function(e){return o(e)&&"[object WeakMap]"==n(e)}},"./MapStore2/node_modules/lodash/iteratee.js":function(e,t,r){var n=r("./MapStore2/node_modules/lodash/_baseClone.js"),o=r("./MapStore2/node_modules/lodash/_baseIteratee.js");e.exports=function(e){return o("function"==typeof e?e:n(e,1))}},"./MapStore2/node_modules/lodash/last.js":function(e,t){e.exports=function(e){var t=null==e?0:e.length;return t?e[t-1]:void 0}},"./MapStore2/node_modules/lodash/rearg.js":function(e,t,r){var n=r("./MapStore2/node_modules/lodash/_createWrap.js"),o=r("./MapStore2/node_modules/lodash/_flatRest.js"),i=o((function(e,t){return n(e,256,void 0,void 0,void 0,t)}));e.exports=i},"./MapStore2/node_modules/lodash/set.js":function(e,t,r){var n=r("./MapStore2/node_modules/lodash/_baseSet.js");e.exports=function(e,t,r){return null==e?e:n(e,t,r)}},"./MapStore2/node_modules/lodash/toPath.js":function(e,t,r){var n=r("./MapStore2/node_modules/lodash/_arrayMap.js"),o=r("./MapStore2/node_modules/lodash/_copyArray.js"),i=r("./MapStore2/node_modules/lodash/isArray.js"),a=r("./MapStore2/node_modules/lodash/isSymbol.js"),s=r("./MapStore2/node_modules/lodash/_stringToPath.js"),l=r("./MapStore2/node_modules/lodash/_toKey.js"),u=r("./MapStore2/node_modules/lodash/toString.js");e.exports=function(e){return i(e)?n(e,l):a(e)?[e]:o(s(u(e)))}},"./MapStore2/node_modules/lodash/unset.js":function(e,t,r){var n=r("./MapStore2/node_modules/lodash/_baseUnset.js");e.exports=function(e,t){return null==e||n(e,t)}},"./MapStore2/node_modules/lrucache/index.js":function(e,t,r){var n,o,i;!function(r,a){"use strict";"object"==typeof e.exports?e.exports=a():(o=[],void 0===(i="function"==typeof(n=a)?n.apply(t,o):n)||(e.exports=i))}("object"==typeof window&&window,(function(){"use strict";function e(t){if(!(this instanceof e))return new e(t);this._LRUCacheState=new r(t)}var t=e.prototype;function r(e){this.capacity=e>0?+e:Number.MAX_SAFE_INTEGER||Number.MAX_VALUE,this.data=Object.create?Object.create(null):{},this.hash=Object.create?Object.create(null):{},this.linkedList=new n}function n(){this.length=0,this.head=null,this.end=null}function o(e){this.key=e,this.p=null,this.n=null}function i(e,t){t!==e.head&&(e.end?e.end===t&&(e.end=t.n):e.end=t,a(t.n,t.p),a(t,e.head),e.head=t,e.head.n=null)}function a(e,t){e!==t&&(e&&(e.p=t),t&&(t.n=e))}return t.get=function(e){var t=this._LRUCacheState,r=t.hash[e];if(r)return i(t.linkedList,r),t.data[e]},t.set=function(e,t){var r=this._LRUCacheState,n=r.hash[e];return void 0===t||(n||(r.hash[e]=new o(e),r.linkedList.length+=1,n=r.hash[e]),i(r.linkedList,n),r.data[e]=t,r.linkedList.length>r.capacity&&this.remove(r.linkedList.end.key)),this},t.update=function(e,t){return this.has(e)&&this.set(e,t(this.get(e))),this},t.remove=function(e){var t=this._LRUCacheState,r=t.hash[e];return r?(r===t.linkedList.head&&(t.linkedList.head=r.p),r===t.linkedList.end&&(t.linkedList.end=r.n),a(r.n,r.p),delete t.hash[e],delete t.data[e],t.linkedList.length-=1,this):this},t.removeAll=function(){return this._LRUCacheState=new r(this._LRUCacheState.capacity),this},t.info=function(){var e=this._LRUCacheState;return{capacity:e.capacity,length:e.linkedList.length}},t.keys=function(){for(var e=[],t=this._LRUCacheState.linkedList.head;t;)e.push(t.key),t=t.p;return e},t.has=function(e){return!!this._LRUCacheState.hash[e]},t.staleKey=function(){return this._LRUCacheState.linkedList.end&&this._LRUCacheState.linkedList.end.key},t.popStale=function(){var e=this.staleKey();if(!e)return null;var t=[e,this._LRUCacheState.data[e]];return this.remove(e),t},e}))},"./MapStore2/node_modules/turf-center/index.js":function(e,t,r){var n=r("./MapStore2/node_modules/turf-bbox/index.js"),o=r("./MapStore2/node_modules/turf-helpers/index.js").point;e.exports=function(e){var t=n(e),r=(t[0]+t[2])/2,i=(t[1]+t[3])/2;return o([r,i])}},"./MapStore2/node_modules/turf-distance/index.js":function(e,t,r){var n=r("./MapStore2/node_modules/turf-invariant/index.js").getCoord,o=r("./MapStore2/node_modules/turf-helpers/index.js").radiansToDistance;e.exports=function(e,t,r){var i=Math.PI/180,a=n(e),s=n(t),l=i*(s[1]-a[1]),u=i*(s[0]-a[0]),c=i*a[1],p=i*s[1],f=Math.pow(Math.sin(l/2),2)+Math.pow(Math.sin(u/2),2)*Math.cos(c)*Math.cos(p);return o(2*Math.atan2(Math.sqrt(f),Math.sqrt(1-f)),r)}},"./MapStore2/node_modules/turf-explode/index.js":function(e,t,r){var n=r("./MapStore2/node_modules/turf-helpers/index.js").featureCollection,o=r("./MapStore2/node_modules/turf-meta/index.js").coordEach,i=r("./MapStore2/node_modules/turf-helpers/index.js").point;e.exports=function(e){var t=[];return o(e,(function(e){t.push(i(e))})),n(t)}},"./MapStore2/node_modules/turf-helpers/index.js":function(e,t){function r(e,t){return{type:"Feature",properties:t||{},geometry:e}}e.exports.feature=r,e.exports.point=function(e,t){if(!Array.isArray(e))throw new Error("Coordinates must be an array");if(e.length<2)throw new Error("Coordinates must be at least 2 numbers long");return r({type:"Point",coordinates:e.slice()},t)},e.exports.polygon=function(e,t){if(!e)throw new Error("No coordinates passed");for(var n=0;n<e.length;n++){var o=e[n];if(o.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var i=0;i<o[o.length-1].length;i++)if(o[o.length-1][i]!==o[0][i])throw new Error("First and last Position are not equivalent.")}return r({type:"Polygon",coordinates:e},t)},e.exports.lineString=function(e,t){if(!e)throw new Error("No coordinates passed");return r({type:"LineString",coordinates:e},t)},e.exports.featureCollection=function(e){return{type:"FeatureCollection",features:e}},e.exports.multiLineString=function(e,t){if(!e)throw new Error("No coordinates passed");return r({type:"MultiLineString",coordinates:e},t)},e.exports.multiPoint=function(e,t){if(!e)throw new Error("No coordinates passed");return r({type:"MultiPoint",coordinates:e},t)},e.exports.multiPolygon=function(e,t){if(!e)throw new Error("No coordinates passed");return r({type:"MultiPolygon",coordinates:e},t)},e.exports.geometryCollection=function(e,t){return r({type:"GeometryCollection",geometries:e},t)};var n={miles:3960,nauticalmiles:3441.145,degrees:57.2957795,radians:1,inches:250905600,yards:6969600,meters:6373e3,metres:6373e3,kilometers:6373,kilometres:6373};e.exports.radiansToDistance=function(e,t){var r=n[t||"kilometers"];if(void 0===r)throw new Error("Invalid unit");return e*r},e.exports.distanceToRadians=function(e,t){var r=n[t||"kilometers"];if(void 0===r)throw new Error("Invalid unit");return e/r},e.exports.distanceToDegrees=function(e,t){var r=n[t||"kilometers"];if(void 0===r)throw new Error("Invalid unit");return e/r*57.2958}},"./MapStore2/node_modules/turf-inside/index.js":function(e,t,r){var n=r("./MapStore2/node_modules/turf-invariant/index.js");function o(e,t){for(var r=!1,n=0,o=t.length-1;n<t.length;o=n++){var i=t[n][0],a=t[n][1],s=t[o][0],l=t[o][1];a>e[1]!=l>e[1]&&e[0]<(s-i)*(e[1]-a)/(l-a)+i&&(r=!r)}return r}e.exports=function(e,t){var r=n.getCoord(e),i=t.geometry.coordinates;"Polygon"===t.geometry.type&&(i=[i]);for(var a=0,s=!1;a<i.length&&!s;a++)if(o(r,i[a][0])){for(var l=!1,u=1;u<i[a].length&&!l;)o(r,i[a][u])&&(l=!0),u++;l||(s=!0)}return s}},"./MapStore2/node_modules/turf-invariant/index.js":function(e,t){e.exports.geojsonType=function(e,t,r){if(!t||!r)throw new Error("type and name required");if(!e||e.type!==t)throw new Error("Invalid input to "+r+": must be a "+t+", given "+e.type)},e.exports.collectionOf=function(e,t,r){if(!r)throw new Error(".collectionOf() requires a name");if(!e||"FeatureCollection"!==e.type)throw new Error("Invalid input to "+r+", FeatureCollection required");for(var n=0;n<e.features.length;n++){var o=e.features[n];if(!o||"Feature"!==o.type||!o.geometry)throw new Error("Invalid input to "+r+", Feature with geometry required");if(!o.geometry||o.geometry.type!==t)throw new Error("Invalid input to "+r+": must be a "+t+", given "+o.geometry.type)}},e.exports.featureOf=function(e,t,r){if(!r)throw new Error(".featureOf() requires a name");if(!e||"Feature"!==e.type||!e.geometry)throw new Error("Invalid input to "+r+", Feature with geometry required");if(!e.geometry||e.geometry.type!==t)throw new Error("Invalid input to "+r+": must be a "+t+", given "+e.geometry.type)},e.exports.getCoord=function(e){if(Array.isArray(e)&&"number"==typeof e[0]&&"number"==typeof e[1])return e;if(e){if("Feature"===e.type&&e.geometry&&"Point"===e.geometry.type&&Array.isArray(e.geometry.coordinates))return e.geometry.coordinates;if("Point"===e.type&&Array.isArray(e.coordinates))return e.coordinates}throw new Error("A coordinate, feature, or point geometry is required")}},"./MapStore2/node_modules/turf-point-on-surface/index.js":function(e,t,r){var n=r("./MapStore2/node_modules/turf-helpers/index.js").featureCollection,o=r("./MapStore2/node_modules/turf-center/index.js"),i=r("./MapStore2/node_modules/turf-distance/index.js"),a=r("./MapStore2/node_modules/turf-inside/index.js"),s=r("./MapStore2/node_modules/turf-explode/index.js");function l(e,t,r,n,o,i){if(Math.sqrt((o-r)*(o-r)+(i-n)*(i-n))===Math.sqrt((e-r)*(e-r)+(t-n)*(t-n))+Math.sqrt((o-e)*(o-e)+(i-t)*(i-t)))return!0}e.exports=function(e){"FeatureCollection"!==e.type&&("Feature"!==e.type&&(e={type:"Feature",geometry:e,properties:{}}),e=n([e]));for(var t=o(e),r=!1,u=0;!r&&u<e.features.length;){var c,p=e.features[u].geometry,f=!1;if("Point"===p.type)t.geometry.coordinates[0]===p.coordinates[0]&&t.geometry.coordinates[1]===p.coordinates[1]&&(r=!0);else if("MultiPoint"===p.type){var d=!1;for(c=0;!d&&c<p.coordinates.length;)t.geometry.coordinates[0]===p.coordinates[c][0]&&t.geometry.coordinates[1]===p.coordinates[c][1]&&(r=!0,d=!0),c++}else if("LineString"===p.type)for(c=0;!f&&c<p.coordinates.length-1;)l(t.geometry.coordinates[0],t.geometry.coordinates[1],p.coordinates[c][0],p.coordinates[c][1],p.coordinates[c+1][0],p.coordinates[c+1][1])&&(f=!0,r=!0),c++;else if("MultiLineString"===p.type)for(var m=0;m<p.coordinates.length;){f=!1,c=0;for(var y=p.coordinates[m];!f&&c<y.length-1;)l(t.geometry.coordinates[0],t.geometry.coordinates[1],y[c][0],y[c][1],y[c+1][0],y[c+1][1])&&(f=!0,r=!0),c++;m++}else if("Polygon"===p.type||"MultiPolygon"===p.type){a(t,{type:"Feature",geometry:p,properties:{}})&&(r=!0)}u++}if(r)return t;var h,g=n([]);for(u=0;u<e.features.length;u++)g.features=g.features.concat(s(e.features[u]).features);var b=1/0;for(u=0;u<g.features.length;u++){var v=i(t,g.features[u],"miles");v<b&&(b=v,h=g.features[u])}return h}},"./MapStore2/web/client/actions/mapInfo.js":function(e,t,r){"use strict";r.d(t,"n",(function(){return o})),r.d(t,"h",(function(){return i})),r.d(t,"i",(function(){return a})),r.d(t,"c",(function(){return s})),r.d(t,"o",(function(){return l})),r.d(t,"q",(function(){return u})),r.d(t,"b",(function(){return c})),r.d(t,"t",(function(){return p})),r.d(t,"l",(function(){return f})),r.d(t,"u",(function(){return d})),r.d(t,"m",(function(){return m})),r.d(t,"k",(function(){return y})),r.d(t,"p",(function(){return h})),r.d(t,"e",(function(){return g})),r.d(t,"j",(function(){return b})),r.d(t,"A",(function(){return v})),r.d(t,"w",(function(){return S})),r.d(t,"x",(function(){return O})),r.d(t,"z",(function(){return w})),r.d(t,"d",(function(){return j})),r.d(t,"f",(function(){return _})),r.d(t,"a",(function(){return M})),r.d(t,"y",(function(){return x})),r.d(t,"g",(function(){return P})),r.d(t,"r",(function(){return E})),r.d(t,"s",(function(){return L})),r.d(t,"v",(function(){return C})),r.d(t,"N",(function(){return T})),r.d(t,"H",(function(){return I})),r.d(t,"I",(function(){return A})),r.d(t,"P",(function(){return N})),r.d(t,"E",(function(){return R})),r.d(t,"O",(function(){return F})),r.d(t,"K",(function(){return k})),r.d(t,"Q",(function(){return D})),r.d(t,"C",(function(){return G})),r.d(t,"T",(function(){return U})),r.d(t,"L",(function(){return B})),r.d(t,"U",(function(){return q})),r.d(t,"M",(function(){return W})),r.d(t,"W",(function(){return Z})),r.d(t,"Y",(function(){return V})),r.d(t,"J",(function(){return H})),r.d(t,"Z",(function(){return K})),r.d(t,"V",(function(){return Y})),r.d(t,"D",(function(){return X})),r.d(t,"F",(function(){return J})),r.d(t,"B",(function(){return Q})),r.d(t,"X",(function(){return $})),r.d(t,"G",(function(){return ee})),r.d(t,"R",(function(){return te})),r.d(t,"S",(function(){return re}));var n=r("./MapStore2/web/client/api/Nominatim.js"),o="LOAD_FEATURE_INFO",i="ERROR_FEATURE_INFO",a="EXCEPTIONS_FEATURE_INFO",s="CHANGE_MAPINFO_STATE",l="NEW_MAPINFO_REQUEST",u="PURGE_MAPINFO_RESULTS",c="CHANGE_MAPINFO_FORMAT",p="SHOW_MAPINFO_MARKER",f="HIDE_MAPINFO_MARKER",d="SHOW_REVERSE_GEOCODE",m="HIDE_REVERSE_GEOCODE",y="GET_VECTOR_INFO",h="NO_QUERYABLE_LAYERS",g="CLEAR_WARNING",b="FEATURE_INFO_CLICK",v="IDENTIFY:UPDATE_FEATURE_INFO_CLICK_POINT",S="IDENTIFY:TOGGLE_HIGHLIGHT_FEATURE",O="TOGGLE_MAPINFO_STATE",w="UPDATE_CENTER_TO_MARKER",j="IDENTIFY:CHANGE_PAGE",_="IDENTIFY:CLOSE_IDENTIFY",M="IDENTIFY:CHANGE_FORMAT",x="IDENTIFY:TOGGLE_SHOW_COORD_EDITOR",P="IDENTIFY:EDIT_LAYER_FEATURES",E="IDENTIFY:CURRENT_EDIT_FEATURE_QUERY",L="IDENTIFY:SET_MAP_TRIGGER",C="IDENTIFY:TOGGLE_EMPTY_MESSAGE_GFI";function T(e,t,r,n,i){return{type:o,data:t,reqId:e,requestParams:r,layerMetadata:n,layer:i}}function I(e,t,r,n){return{type:i,error:t,reqId:e,requestParams:r,layerMetadata:n}}function A(e,t,r,n){return{type:a,reqId:e,exceptions:t,requestParams:r,layerMetadata:n}}function N(){return{type:h}}function R(){return{type:g}}function F(e,t){return{type:l,reqId:e,request:t}}function k(e,t,r,n){return{type:y,layer:e,request:t,metadata:r,queryableLayers:n}}function D(){return{type:u}}function G(e){return{type:c,infoFormat:e}}function U(){return{type:p}}function B(){return{type:f}}function z(e){return{type:d,reverseGeocodeData:e.data}}function q(e){return function(t){n.default.reverseGeocode(e).then((function(e){t(z(e))})).catch((function(e){t(z(e))}))}}function W(){return{type:m}}function Z(){return{type:O}}function V(e){return{type:w,status:e}}function H(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;return{type:b,point:e,layer:t,filterNameList:r,overrideParams:n,itemId:o}}function K(e){return{type:v,point:e}}function Y(e){return{type:S,enabled:e}}function X(e){return{type:j,index:e}}var J=function(){return{type:_}},Q=function(e){return{type:M,format:e}},$=function(e){return{type:x,showCoordinateEditor:e}},ee=function(e){return{type:P,layer:e}},te=function(e){return{type:E,query:e}},re=function(e){return{type:L,trigger:e}}},"./MapStore2/web/client/api/Nominatim.js":function(e,t,r){"use strict";r.r(t);var n=r("./MapStore2/web/client/libs/ajax.js"),o=r.n(n),i=r("./node_modules/url/url.js"),a=r.n(i),s=r("./MapStore2/node_modules/object-assign/index.js"),l=r.n(s),u={format:"json",bounded:0,polygon_geojson:1,priority:5},c={geocode:function(e,t){var r=l()({q:e},u,t||{}),n=a.a.format({protocol:"https",host:"nominatim.openstreetmap.org",query:r});return o.a.get(n)},reverseGeocode:function(e,t){var r=l()({lat:e.lat,lon:e.lng},t||{},u),n=a.a.format({protocol:"https",host:"nominatim.openstreetmap.org/reverse",query:r});return o.a.get(n)}};t.default=c},"./MapStore2/web/client/api/WFS.js":function(e,t,r){"use strict";r.r(t),r.d(t,"toDescribeURL",(function(){return m})),r.d(t,"getFeatureSimple",(function(){return y})),r.d(t,"getCapabilitiesURL",(function(){return h})),r.d(t,"getFeatureURL",(function(){return g})),r.d(t,"getFeature",(function(){return b})),r.d(t,"getCapabilities",(function(){return v})),r.d(t,"describeFeatureTypeOGCSchemas",(function(){return S})),r.d(t,"describeFeatureType",(function(){return O}));var n=r("./MapStore2/web/client/libs/ajax.js"),o=r.n(n),i=r("./node_modules/url/url.js"),a=r.n(i),s=r("./MapStore2/node_modules/object-assign/index.js"),l=r.n(s);function u(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}function c(e){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function p(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function f(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?p(Object(r),!0).forEach((function(t){d(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):p(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function d(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var m=function(e,t){var r=a.a.parse(e,!0);return a.a.format(f(f({},r),{},{search:void 0,query:f(f({},r.query),{},{service:"WFS",version:"1.1.0",typeName:t,outputFormat:"application/json",request:"DescribeFeatureType"})}))},y=function(e,t){return o.a.get(e+"?service=WFS&version=1.1.0&request=GetFeature",{params:l()({outputFormat:"application/json"},t)}).then((function(e){return"object"!==c(e.data)?JSON.parse(e.data):e.data}))},h=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.version,n=void 0===r?"1.1.0":r,o=a.a.parse(e,!0);return a.a.format(l()({},o,{query:l()({service:"WFS",version:n,request:"GetCapabilities"},o.query)}))},g=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=r.version,o=void 0===n?"1.1.0":n,i=u(r,["version"]),s=a.a.parse(e,!0);return a.a.format(l()({},s,{query:l()(f({service:"WFS",typeName:t,version:o,request:"GetFeature"},i),s.query)}))},b=function(e,t,r){return o.a.get(g(e,t,r))},v=function(e){return o.a.get(h(e))},S=function(e,t){var n=a.a.parse(e,!0),i=a.a.format(l()({},n,{query:l()({service:"WFS",version:"1.1.0",typeName:t,request:"DescribeFeatureType"},n.query)}));return new Promise((function(e){Promise.all([r.e(1),r.e(33)]).then(function(){var t=r("./MapStore2/web/client/utils/ogc/WFS/index.js").unmarshaller;e(o.a.get(i).then((function(e){var r=t.unmarshalString(e.data);return r&&r.value})))}.bind(null,r)).catch(r.oe)}))},O=function(e,t){return o.a.get(m(e,t)).then((function(e){return e.data}))}},"./MapStore2/web/client/components/data/identify/DefaultViewer.jsx":function(e,t,r){"use strict";var n=r("./MapStore2/node_modules/react/index.js"),o=r.n(n),i=r("./MapStore2/node_modules/prop-types/index.js"),a=r.n(i),s=r("./MapStore2/web/client/utils/MapInfoUtils.js"),l=r("./MapStore2/web/client/components/I18N/HTML.jsx"),u=r("./MapStore2/web/client/components/I18N/Message.jsx"),c=r("./MapStore2/node_modules/react-bootstrap/es/index.js");function p(e){return(p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function d(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function m(e,t){return(m=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function y(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=b(e);if(t){var o=b(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return h(this,r)}}function h(e,t){return!t||"object"!==p(t)&&"function"!=typeof t?g(e):t}function g(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function b(e){return(b=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function v(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var S=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&m(e,t)}(a,e);var t,r,n,i=y(a);function a(){var e;f(this,a);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return v(g(e=i.call.apply(i,[this].concat(r))),"onTouchStart",(function(t){var r=t.touches[0];e.startX=r.pageX,e.startY=r.pageY,e.setState({scrolling:!1})})),v(g(e),"onTouchMove",(function(t){var r=t.touches[0],n=t.currentTarget;if(e.state.scrolling)t.stopPropagation();else if(Math.abs(e.startY-r.pageY)>Math.abs(e.startX-r.pageX))t.stopPropagation();else{var o=e.startX<r.pageX?"left":"right";(n&&"left"===o&&n.clientWidth<n.scrollWidth&&0!==n.scrollLeft||n&&"right"===o&&n.clientWidth+n.scrollLeft!==n.scrollWidth)&&(e.setState({scrolling:!0}),t.stopPropagation())}})),v(g(e),"onTouchEnd",(function(){e.setState({scrolling:!1})})),v(g(e),"renderPage",(function(){var t="function"==typeof e.props.viewers?e.props.viewers:e.props.viewers[e.props.format];return t?o.a.createElement(t,{response:e.props.response,layer:e.props.layer}):null})),e}return t=a,(r=[{key:"render",value:function(){return o.a.createElement("div",{style:{width:"100%",height:"100%",overflowX:"auto"},onTouchMove:this.onTouchMove,onTouchStart:this.onTouchStart,onTouchEnd:this.onTouchEnd},this.renderPage())}}])&&d(t.prototype,r),n&&d(t,n),a}(o.a.Component);v(S,"propTypes",{format:a.a.string,viewers:a.a.oneOfType([a.a.func,a.a.object]),response:a.a.oneOfType([a.a.string,a.a.object,a.a.node]),layer:a.a.object});var O=r("./MapStore2/node_modules/lodash/lodash.js"),w=r("./MapStore2/web/client/utils/IdentifyUtils.js");function j(e){return(j="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _(){return(_=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function M(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function x(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function P(e,t){return(P=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function E(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=T(e);if(t){var o=T(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return L(this,r)}}function L(e,t){return!t||"object"!==j(t)&&"function"!=typeof t?C(e):t}function C(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function T(e){return(T=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function I(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var A=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&P(e,t)}(a,e);var t,r,n,i=E(a);function a(){var e;M(this,a);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return I(C(e=i.call.apply(i,[this].concat(r))),"getResponseProperties",(function(){var t=e.props.validator(e.props.format),r=e.props.responses.map((function(e){return void 0===e?{}:e})),n=e.props.renderEmpty?t.getValidResponses(r,e.props.renderEmpty):r,o=t.getNoValidResponses(e.props.responses),i=e.props.requests.length===o.length;return{validResponses:n,currResponse:e.getCurrentResponse(n[e.props.index]),emptyResponses:i,invalidResponses:o}})),I(C(e),"getCurrentResponse",(function(t){return e.props.validator(e.props.format).getValidResponses([t],!0)})),I(C(e),"renderEmptyLayers",(function(){var t=e.getResponseProperties(),r=t.invalidResponses,n=t.emptyResponses;if(0===e.props.missingResponses&&n)return null;var i=0!==r.length;if(e.props.renderEmpty||(i=i&&0===e.props.missingResponses),i){var a=r.map((function(e){return e.layerMetadata.title}));return e.props.showEmptyMessageGFI?o.a.createElement(c.Alert,{bsStyle:"info"},o.a.createElement(u.default,{msgId:"noInfoForLayers"}),o.a.createElement("b",null,a.join(", "))):null}return null})),I(C(e),"renderPage",(function(t){var r=e.props.viewers[e.props.format];return r?o.a.createElement(r,{response:t}):null})),I(C(e),"renderEmptyPages",(function(){var t=e.getResponseProperties().emptyResponses;return 0===e.props.missingResponses&&t?o.a.createElement(c.Alert,{bsStyle:"danger"},o.a.createElement("h4",null,o.a.createElement(l.a,{msgId:"noFeatureInfo"}))):null})),I(C(e),"renderPages",(function(){var t=e.getResponseProperties().validResponses;return t.map((function(r,n){var i,a,l=r.response,u=r.layerMetadata,p=Object(w.a)(r,e.props),f=e.props.header;return(null==u||null===(i=u.viewer)||void 0===i?void 0:i.type)&&(a=Object(s.j)(u.viewer.type)),o.a.createElement(c.Panel,{eventKey:n,key:n,collapsible:e.props.collapsible,header:f?o.a.createElement("span",null,o.a.createElement(f,_({size:t.length},e.props.headerOptions,u,{index:e.props.index,onNext:function(){return e.props.onNext()},onPrevious:function(){return e.props.onPrevious()}}))):null,style:e.props.style},o.a.createElement(S,{response:l,format:p,viewers:a||e.props.viewers,layer:u}))}))})),I(C(e),"containerStyle",(function(t){return Object(O.isEmpty)(t)&&e.props.isMobile?{height:"100%"}:{display:Object(O.isEmpty)(t)?"none":"block"}})),e}return t=a,(r=[{key:"shouldComponentUpdate",value:function(e){return e.responses!==this.props.responses||e.missingResponses!==this.props.missingResponses||e.index!==this.props.index}},{key:"render",value:function(){var e=this,t=this.props.container,r=this.getResponseProperties(),n=r.currResponse,i=r.emptyResponses,a=[this.renderEmptyLayers(),o.a.createElement(t,_({},this.props.containerProps,{onChangeIndex:function(t){e.props.setIndex(t)},ref:"container",index:this.props.index||0,key:"swiper",style:this.containerStyle(n),className:"swipeable-view"}),this.renderPages())];return a=this.props.isMobile?a:Object(O.reverse)(a),o.a.createElement("div",{className:"mapstore-identify-viewer"},i?this.renderEmptyPages():a.map((function(e){return e})))}}])&&x(t.prototype,r),n&&x(t,n),a}(o.a.Component);I(A,"propTypes",{format:a.a.string,collapsible:a.a.bool,requests:a.a.array,responses:a.a.array,missingResponses:a.a.number,container:a.a.oneOfType([a.a.object,a.a.func]),header:a.a.oneOfType([a.a.object,a.a.func]),headerOptions:a.a.object,validator:a.a.func,viewers:a.a.object,style:a.a.object,containerProps:a.a.object,index:a.a.number,onNext:a.a.func,onPrevious:a.a.func,onUpdateIndex:a.a.func,setIndex:a.a.func,showEmptyMessageGFI:a.a.bool,renderEmpty:a.a.bool,loaded:a.a.bool,isMobile:a.a.bool}),I(A,"defaultProps",{format:Object(s.f)(),responses:[],requests:[],missingResponses:0,collapsible:!1,headerOptions:{},container:c.Accordion,validator:s.i,viewers:Object(s.k)(),style:{position:"relative",marginBottom:0},containerProps:{},showEmptyMessageGFI:!0,renderEmpty:!1,onNext:function(){},onPrevious:function(){},setIndex:function(){},isMobile:!1});t.a=A},"./MapStore2/web/client/components/data/identify/SwipeHeader.jsx":function(e,t,r){"use strict";var n=r("./MapStore2/node_modules/prop-types/index.js"),o=r.n(n),i=r("./MapStore2/node_modules/react/index.js"),a=r.n(i),s=r("./MapStore2/node_modules/react-bootstrap/es/index.js"),l=r("./MapStore2/web/client/components/misc/Button.jsx");function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function p(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function d(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=h(e);if(t){var o=h(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return m(this,r)}}function m(e,t){return!t||"object"!==u(t)&&"function"!=typeof t?y(e):t}function y(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function h(e){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function g(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var b=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}(i,e);var t,r,n,o=d(i);function i(){var e;c(this,i);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return g(y(e=o.call.apply(o,[this].concat(r))),"renderLeftButton",(function(){var t=0===e.props.index;return e.props.useButtons?a.a.createElement(l.a,{ref:"left",disabled:t,className:e.props.btnClassName||"square-button-md no-border",onClick:function(){e.props.onPrevious()}},a.a.createElement(s.Glyphicon,{glyph:"back"})):a.a.createElement("a",{ref:"left",disabled:t,className:e.props.btnClassName||"square-button-md",onClick:function(){e.props.onPrevious()}},a.a.createElement(s.Glyphicon,{glyph:"back"}))})),g(y(e),"renderRightButton",(function(){var t=e.props.index===e.props.size-1;return e.props.useButtons?a.a.createElement(l.a,{ref:"right",disabled:t,className:e.props.btnClassName||"square-button-md no-border",onClick:function(){e.props.onNext()}},a.a.createElement(s.Glyphicon,{glyph:"next"})):a.a.createElement("a",{ref:"right",disabled:t,className:e.props.btnClassName||"square-button-md",onClick:function(){e.props.onNext()}},a.a.createElement(s.Glyphicon,{glyph:"next"}))})),e}return t=i,(r=[{key:"componentWillUnmount",value:function(){this.interval&&clearInterval(this.interval)}},{key:"render",value:function(){return a.a.createElement("div",{className:"ms-identify-swipe-header"},this.props.size>1&&a.a.createElement("div",{className:"ms-identify-swipe-header-arrow"},this.renderLeftButton()),a.a.createElement("div",{className:"ms-identify-swipe-header-title"},this.props.title),this.props.size>1&&a.a.createElement("div",{className:"ms-identify-swipe-header-arrow"},this.renderRightButton()))}}])&&p(t.prototype,r),n&&p(t,n),i}(a.a.Component);g(b,"propTypes",{title:o.a.string,index:o.a.number,size:o.a.number,container:o.a.oneOfType([o.a.object,o.a.func]),useButtons:o.a.bool,onPrevious:o.a.func,onNext:o.a.func,btnClassName:o.a.string}),g(b,"defaultProps",{useButtons:!0}),t.a=b},"./MapStore2/web/client/components/data/identify/enhancers/defaultViewer.js":function(e,t,r){"use strict";r.d(t,"b",(function(){return i})),r.d(t,"a",(function(){return a}));var n=r("./MapStore2/node_modules/recompose/es/Recompose.js"),o=r("./MapStore2/web/client/utils/MapInfoUtils.js"),i=Object(n.withHandlers)({onNext:function(e){var t=e.index,r=void 0===t?0:t,n=e.setIndex,o=void 0===n?function(){}:n,i=e.validResponses,a=void 0===i?[]:i;return function(){o(Math.min(a.length-1,r+1))}},onPrevious:function(e){var t=e.index,r=e.setIndex,n=void 0===r?function(){}:r;return function(){n(Math.max(0,t-1))}}}),a=Object(n.defaultProps)({format:Object(o.f)(),validator:o.i})},"./MapStore2/web/client/components/data/identify/viewers/HTMLViewer.jsx":function(e,t,r){"use strict";var n=r("./MapStore2/node_modules/react/index.js"),o=r.n(n),i=r("./MapStore2/node_modules/prop-types/index.js"),a=r.n(i),s=r("./MapStore2/web/client/components/misc/HtmlRenderer.jsx");function l(e){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function f(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=m(e);if(t){var o=m(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return d(this,r)}}function d(e,t){return!t||"object"!==l(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function m(e){return(m=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var y,h,g,b=/^[\s\S]*<body>([\s\S]*)<\/body>[\s\S]*$/i,v=/(<style[\s\=\w\/\"]*>[^<]*<\/style>)/i,S=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}(a,e);var t,r,n,i=f(a);function a(){return u(this,a),i.apply(this,arguments)}return t=a,(r=[{key:"shouldComponentUpdate",value:function(e){return e.response!==this.props.response}},{key:"render",value:function(){var e=this.props.response||"",t=v.exec(e),r=t&&2===t.length?v.exec(e)[1]:"";r=r.replace(/body[,]+/g,"");var n=e.replace(b,"$1").trim();return o.a.createElement(s.a,{html:r+n})}}])&&c(t.prototype,r),n&&c(t,n),a}(o.a.Component);y=S,h="propTypes",g={response:a.a.string},h in y?Object.defineProperty(y,h,{value:g,enumerable:!0,configurable:!0,writable:!0}):y[h]=g,t.a=S},"./MapStore2/web/client/components/data/identify/viewers/JSONViewer.jsx":function(e,t,r){"use strict";var n=r("./MapStore2/node_modules/react/index.js"),o=r.n(n),i=r("./MapStore2/node_modules/recompose/es/Recompose.js"),a=r("./MapStore2/node_modules/lodash/lodash.js"),s=r("./MapStore2/web/client/utils/TemplateUtils.js"),l=r("./MapStore2/web/client/components/misc/HtmlRenderer.jsx"),u=r("./MapStore2/node_modules/prop-types/index.js"),c=r.n(u),p=r("./MapStore2/web/client/utils/StringUtils.js");function f(e){return(f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function d(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function m(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function y(e,t){return(y=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function h(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=v(e);if(t){var o=v(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return g(this,r)}}function g(e,t){return!t||"object"!==f(t)&&"function"!=typeof t?b(e):t}function b(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function v(e){return(v=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function S(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var O=["exclude","titleStyle","listStyle","componentStyle","title","feature"],w=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&y(e,t)}(s,e);var t,r,n,i=h(s);function s(){var e;d(this,s);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return S(b(e=i.call.apply(i,[this].concat(r))),"getBodyItems",(function(){return Object.keys(e.props).filter(e.toExclude).map((function(t){var r=e.renderProperty(e.props[t]);return o.a.createElement("tr",{key:t,style:e.props.listStyle},o.a.createElement("td",null,t),o.a.createElement("td",null,Object(p.a)(r)?o.a.createElement("span",{dangerouslySetInnerHTML:{__html:r}}):r))}))})),S(b(e),"renderHeader",(function(){return e.props.title?o.a.createElement("thead",{key:e.props.title,style:e.props.titleStyle,className:"ms-properties-viewer-title"},o.a.createElement("tr",null,o.a.createElement("th",{colSpan:"2"},e.props.title))):null})),S(b(e),"renderBody",(function(){var t=e.getBodyItems();return 0===t.length?null:o.a.createElement("tbody",{className:"ms-properties-viewer-body"},t)})),S(b(e),"renderProperty",(function(e){return Object(a.isString)(e)?e:JSON.stringify(e)})),S(b(e),"toExclude",(function(t){return-1===O.concat(e.props.exclude).indexOf(t)})),e}return t=s,(r=[{key:"render",value:function(){return o.a.createElement("table",{className:"ms-properties-viewer",style:this.props.componentStyle},this.renderHeader(),this.renderBody())}}])&&m(t.prototype,r),n&&m(t,n),s}(o.a.Component);S(w,"displayName","PropertiesViewer"),S(w,"propTypes",{title:c.a.string,exclude:c.a.array,titleStyle:c.a.object,listStyle:c.a.object,componentStyle:c.a.object}),S(w,"defaultProps",{exclude:[],titleStyle:{},listStyle:{},componentStyle:{}});var j=w;function _(){return(_=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}var M={TEMPLATE:function(e){var t=e.layer,r=void 0===t?{}:t,n=e.response;return o.a.createElement("div",{className:"ms-template-viewer"},n.features.map((function(e,t){return o.a.createElement("div",{key:t},o.a.createElement(l.a,{html:Object(a.template)(Object(s.getCleanTemplate)(r.featureInfo&&r.featureInfo.template||"",e,/\$\{.*?\}/g,2,1))(e)}))})))},PROPERTIES:function(e){var t=e.response,r=e.layer,n=e.rowViewer,i=r&&r.rowViewer||n||j;return o.a.createElement("div",{className:"mapstore-json-viewer"},((null==t?void 0:t.features)||[]).map((function(e,t){return o.a.createElement(i,_({key:t,feature:e,title:e.id+"",exclude:["bbox"]},e.properties))})))}};t.a=Object(i.shouldUpdate)((function(e,t){return t.response!==e.response}))((function(e){var t=e.layer&&e.layer.featureInfo&&e.layer.featureInfo.format&&e.layer.featureInfo.template&&"<p><br></p>"!==e.layer.featureInfo.template&&e.layer.featureInfo.format||"PROPERTIES",r=M[t]||M.PROPERTIES;return o.a.createElement(r,e)}))},"./MapStore2/web/client/components/data/identify/viewers/TextViewer.jsx":function(e,t,r){"use strict";var n=r("./MapStore2/node_modules/prop-types/index.js"),o=r.n(n),i=r("./MapStore2/node_modules/react/index.js"),a=r.n(i);function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function p(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=d(e);if(t){var o=d(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return f(this,r)}}function f(e,t){return!t||"object"!==s(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var m,y,h,g=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(i,e);var t,r,n,o=p(i);function i(){return l(this,i),o.apply(this,arguments)}return t=i,(r=[{key:"shouldComponentUpdate",value:function(e){return e.response!==this.props.response}},{key:"render",value:function(){return a.a.createElement("pre",null,this.props.response)}}])&&u(t.prototype,r),n&&u(t,n),i}(a.a.Component);m=g,y="propTypes",h={response:o.a.string},y in m?Object.defineProperty(m,y,{value:h,enumerable:!0,configurable:!0,writable:!0}):m[y]=h,t.a=g},"./MapStore2/web/client/components/map/leaflet/DrawSupport.jsx":function(e,t,r){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function i(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?o(Object(r),!0).forEach((function(t){d(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function l(e,t){return(l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function u(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=f(e);if(t){var o=f(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return c(this,r)}}function c(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?p(e):t}function p(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function d(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var m=r("./MapStore2/node_modules/prop-types/index.js"),y=r("./MapStore2/node_modules/react/index.js"),h=r("./MapStore2/node_modules/lodash/lodash.js"),g=h.last,b=h.isNil,v=r("./MapStore2/web/client/libs/leaflet.js");r("./MapStore2/node_modules/leaflet-draw/dist/leaflet.draw.js"),v.Draw.Polygon.prototype._calculateFinishDistance=function(e){if(this._markers.length>0){var t=this._map.latLngToContainerPoint(this._markers[0].getLatLng()),r=this._map.latLngToContainerPoint(this._markers[this._markers.length-1].getLatLng()),n=new v.Marker(e,{icon:this.options.icon,zIndexOffset:2*this.options.zIndexOffset}),o=this._map.latLngToContainerPoint(n.getLatLng());return Math.min(t.distanceTo(o),r.distanceTo(o))}return 1/0};var S=r("./MapStore2/web/client/utils/MapUtils.js"),O=S.isSimpleGeomType,w=S.getSimpleGeomType,j=r("./MapStore2/web/client/utils/leaflet/DrawSupportUtils.js").boundsToOLExtent,_=r("./MapStore2/node_modules/object-assign/index.js"),M=r("./MapStore2/web/client/utils/CoordinatesUtils.js"),x=M.reproject,P=M.reprojectBbox,E=M.calculateCircleCoordinates,L=M.reprojectGeoJson,C=r("./MapStore2/web/client/utils/leaflet/Vector.js").pointToLayer,T=Math.PI/180,I=function(e,t,r){if("EPSG:4326"===r)return{center:t,srs:r,radius:e};var n=e/40075017*360/Math.cos(T*t[1]),o=x(t,"EPSG:4326",r);if(n){var i=x([t[0]+n,t[1]],"EPSG:4326",r);return{center:o,srs:r,radius:Math.sqrt(Math.pow(o.x-i.x,2)+Math.pow(o.y-i.y,2))}}return{center:o,srs:r,radius:e}},A=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"EPSG:4326";if("EPSG:4326"===r||void 0===e)return{center:t,projection:r,radius:e};var n=x({x:t.lng,y:t.lat},r,"EPSG:4326");if(void 0===e)return{center:n,projection:r,radius:e};var o=x([t.lng+e,t.lat],r,"EPSG:4326"),i=Math.sqrt(Math.pow(n.x-o.x,2)+Math.pow(n.y-o.y,2)),a=i*Math.cos(T*n.y)*40075017/360;return{center:n,projection:"EPSG:4326",radius:a}},N=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}(c,e);var t,r,n,o=u(c);function c(){var e;a(this,c);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return d(p(e=o.call.apply(o,[this].concat(r))),"onDrawStart",(function(){e.drawing=!0})),d(p(e),"onDrawCreated",(function(t){e.drawing=!1;var r,n=t.layer,o=n.toGeoJSON();"marker"===t.layerType?r=v.latLngBounds(o.geometry.coordinates,o.geometry.coordinates):(n._map||(n._map=e.props.map,n._renderer=e.props.map.getRenderer(n),n._project()),r=n.getBounds());var i=j(r),a=r.getCenter();a=[a.lng,a.lat];var s=o.geometry.coordinates,l="EPSG:4326",u=o.geometry.type,c=n.getRadius?n.getRadius():0;if("circle"===t.layerType){o.projection="EPSG:4326",i=P(i,"EPSG:4326",l="EPSG:3857");var p=I(n._mRadius,a,l);a=p.center,c=p.radius,s=E(a,c,100),o.radius=n.getRadius?n.getRadius():0,a=[a.x,a.y],u="Polygon"}e.drawLayer.addData(o);var f={type:u,extent:i,center:a,coordinates:s,radius:c,projection:l};e.props.options&&e.props.options.stopAfterDrawing&&e.props.onChangeDrawingStatus("stop",e.props.drawMethod,e.props.drawOwner);var d=e.convertFeaturesToGeoJson(t.layer,e.props);e.props.onEndDrawing(f,e.props.drawOwner),e.props.onGeometryChanged([d],e.props.drawOwner,e.props.options&&e.props.options.stopAfterDrawing?"enterEditMode":"")})),d(p(e),"onUpdateGeom",(function(t,r){var n=e.convertFeaturesToGeoJson(t,r);r.onGeometryChanged([n],r.drawOwner)})),d(p(e),"addLayer",(function(t){e.clean();var r=v.geoJson(null,{pointToLayer:function(e,t){var r=A(e.radius,t,e.projection),n=r.center,o=r.radius;return v.circle(n,o||5)},style:function(e){return t.style&&t.style[e.geometry.type]||{color:"#ffcc33",opacity:1,weight:3,fillColor:"#ffffff",fillOpacity:.2,clickable:!1}}});e.props.map.addLayer(r),t.features&&t.features.length>0&&r.addData(e.convertFeaturesPolygonToPoint(t.features,e.props.drawMethod)),e.drawLayer=r})),d(p(e),"addGeojsonLayer",(function(t){var r=t.features,n=t.projection,o=t.style;e.clean();var i=v.geoJson(r,{style:function(e){return e.style||o},pointToLayer:function(e,t){var r=x({x:t.lng,y:t.lat},n,"EPSG:4326");return C(v.latLng(r.y,r.x),e,o)}});e.drawLayer=i.addTo(e.props.map)})),d(p(e),"replaceFeatures",(function(t){e.drawLayer?(e.drawLayer.clearLayers(),"Circle"===e.props.drawMethod?(e.drawLayer.options.pointToLayer=function(e,t){var r=A(e.radius,t,e.projection),n=r.center,o=r.radius;return v.circle(n,o||5)},e.drawLayer.options.style={color:"#ffcc33",opacity:1,weight:3,fillColor:"#ffffff",fillOpacity:.2,clickable:!1}):e.drawLayer.options.pointToLayer=function(e,r){var n=x({x:r.lng,y:r.lat},t.options&&t.options.featureProjection||"EPSG:4326","EPSG:4326");return C(v.latLng(n.y,n.x),e,t.style)},e.drawLayer.addData(e.convertFeaturesPolygonToPoint(t.features,e.props.drawMethod))):e.addGeojsonLayer({features:t.features,projection:t.options&&t.options.featureProjection||"EPSG:4326",style:t.style&&t.style[t.drawMethod]||t.style})})),d(p(e),"endDrawing",(function(t){e.replaceFeatures(t);var r=g(t.features);"Circle"!==e.props.drawMethod||!r||b(r.center)||b(r.radius)?r&&e.props.onEndDrawing(r,e.props.drawOwner):e.props.onEndDrawing(i(i({},r),{},{coordinates:E(r.center,r.radius,100)}),e.props.drawOwner)})),d(p(e),"addDrawInteraction",(function(t){e.removeAllInteractions(),"Point"===t.drawMethod||"MultiPoint"===t.drawMethod?e.addGeojsonLayer({features:t.features,projection:t.options&&t.options.featureProjection||"EPSG:4326",style:t.style&&t.style[t.drawMethod]||t.style}):e.addLayer(t),e.props.map.on("draw:created",e.onDrawCreated,p(e)),e.props.map.on("draw:drawstart",e.onDrawStart,p(e)),"LineString"===t.drawMethod||"Bearing"===t.drawMethod||"MultiLineString"===t.drawMethod?e.drawControl=new v.Draw.Polyline(e.props.map,{shapeOptions:{color:"#000000",weight:2,fillColor:"#ffffff",fillOpacity:.2},showLength:!1,repeatMode:!0,icon:new v.DivIcon({iconSize:new v.Point(8,8),className:"leaflet-div-icon leaflet-editing-icon"}),touchIcon:new v.DivIcon({iconSize:new v.Point(8,8),className:"leaflet-div-icon leaflet-editing-icon leaflet-touch-icon"})}):"Polygon"===t.drawMethod||"MultiPolygon"===t.drawMethod?e.drawControl=new v.Draw.Polygon(e.props.map,{shapeOptions:{color:"#000000",weight:2,fillColor:"#ffffff",fillOpacity:.2,dashArray:[5,5],guidelineDistance:5},allowIntersection:!1,showLength:!1,showArea:!1,repeatMode:!0,icon:new v.DivIcon({iconSize:new v.Point(8,8),className:"leaflet-div-icon leaflet-editing-icon"}),touchIcon:new v.DivIcon({iconSize:new v.Point(8,8),className:"leaflet-div-icon leaflet-editing-icon leaflet-touch-icon"})}):"BBOX"===t.drawMethod?e.drawControl=new v.Draw.Rectangle(e.props.map,{draw:!1,shapeOptions:{color:"#000000",weight:2,fillColor:"#ffffff",fillOpacity:.2,dashArray:[5,5]},repeatMode:!0,icon:new v.DivIcon({iconSize:new v.Point(8,8),className:"leaflet-div-icon leaflet-editing-icon"}),touchIcon:new v.DivIcon({iconSize:new v.Point(8,8),className:"leaflet-div-icon leaflet-editing-icon leaflet-touch-icon"})}):"Circle"===t.drawMethod?e.drawControl=new v.Draw.Circle(e.props.map,{shapeOptions:{color:"#000000",weight:2,fillColor:"#ffffff",fillOpacity:.2,dashArray:[5,5]},showRadius:!1,repeatMode:!0}):"Point"!==t.drawMethod&&"MultiPoint"!==t.drawMethod||(e.drawControl=new v.Draw.Marker(e.props.map,{shapeOptions:{color:"#000000",weight:2,fillColor:"#ffffff",fillOpacity:.2},repeatMode:!0})),e.props.map.doubleClickZoom&&e.props.map.doubleClickZoom.disable(),e.drawControl.enable()})),d(p(e),"addDrawOrEditInteractions",(function(t){var r=[];t.features.map((function(e){var t;e&&e.geometry&&e.geometry.type&&!O(e.geometry.type)&&("GeometryCollection"===e.geometry.type?(t=e.geometry.geometries.map((function(t){return t.coordinates.map((function(r,n){return{type:"Feature",properties:i({},e.properties),id:t.type+n,geometry:{coordinates:r,type:w(t.type)}}}))})),r.push({type:"FeatureCollection",features:t})):(t=e.geometry.coordinates.map((function(t,r){return{type:"Feature",properties:i({},e.properties),id:e.geometry.type+r,geometry:{coordinates:t,type:w(e.geometry.type)}}})),r.push({type:"FeatureCollection",features:t})))}));var n=_({},t,{features:r.length>0?r:[{}]});e.drawLayer?(e.drawLayer.clearLayers(),e.drawLayer.addData(e.convertFeaturesPolygonToPoint(n.features,n.drawMethod))):e.addGeojsonLayer({features:t.features&&t.options.featureProjection&&"EPSG:4326"!==t.options.featureProjection?t.features.map((function(e){return L(e,t.options.featureProjection,"EPSG:4326")})):t.features,projection:t.options&&t.options.featureProjection||"EPSG:4326",style:t.style&&t.style[t.drawMethod]||t.style}),t.options.editEnabled&&e.addEditInteraction(n),t.options.drawEnabled&&e.addDrawInteraction(n)})),d(p(e),"addEditInteraction",(function(t){e.clean(),e.addGeojsonLayer({features:t.features,projection:t.options&&t.options.featureProjection||"EPSG:4326",style:_({},t.style,{poly:{icon:new v.DivIcon({iconSize:new v.Point(8,8),className:"leaflet-div-icon leaflet-editing-icon"}),touchIcon:new v.DivIcon({iconSize:new v.Point(8,8),className:"leaflet-div-icon leaflet-editing-icon leaflet-touch-icon"})}})});var r=e.drawLayer.getLayers();setTimeout((function(){r.forEach((function(r){r.getLayers&&r.getLayers()&&r.getLayers().length?r.getLayers().forEach((function(r){r.on("edit",(function(r){return e.onUpdateGeom(r.target,t)})),r.on("moveend",(function(r){return e.onUpdateGeom(r.target,t)})),r.editing&&r.editing.enable()})):(r.on("edit",(function(r){return e.onUpdateGeom(r.target,t)})),r.on("moveend",(function(r){return e.onUpdateGeom(r.target,t)})),r.editing&&r.editing.enable())}))}),0),e.editControl=new v.Control.Draw({edit:{featureGroup:e.drawLayer,poly:{allowIntersection:!1},edit:!0},draw:{polygon:{allowIntersection:!1,showArea:!0}}}),e.props.map.doubleClickZoom&&e.props.map.doubleClickZoom.disable()})),d(p(e),"removeAllInteractions",(function(){e.removeEditInteraction(),e.removeDrawInteraction()})),d(p(e),"removeDrawInteraction",(function(){null!==e.drawControl&&void 0!==e.drawControl&&(e.props.options&&e.props.options.stopAfterDrawing&&(e.drawControl.setOptions({repeatMode:!1}),e.props.onDrawStopped()),e.drawControl.disable(),e.drawControl=null,e.props.map.off("draw:created",e.onDrawCreated,p(e)),e.props.map.off("draw:drawstart",e.onDrawStart,p(e)),e.props.map.doubleClickZoom&&e.props.map.doubleClickZoom.enable())})),d(p(e),"removeEditInteraction",(function(){e.drawLayer&&(e.drawLayer.getLayers().forEach((function(e){e.getLayers&&e.getLayers()&&e.getLayers().length?e.getLayers().forEach((function(e){e.off("edit"),e.off("moveend"),e.editing&&e.editing.disable()})):(e.off("edit"),e.off("moveend"),e.editing&&e.editing.disable())})),e.editControl=null);e.props.map.doubleClickZoom&&e.props.map.doubleClickZoom.enable()})),d(p(e),"cleanAndStop",(function(){e.removeAllInteractions(),e.drawLayer&&(e.drawLayer.clearLayers(),e.props.map.removeLayer(e.drawLayer),e.drawLayer=null)})),d(p(e),"clean",(function(){e.removeEditInteraction(),e.removeDrawInteraction(),e.drawLayer&&(e.drawLayer.clearLayers(),e.props.map.removeLayer(e.drawLayer),e.drawLayer=null)})),d(p(e),"convertFeaturesPolygonToPoint",(function(e,t){return"Circle"===t?e.map((function(e){var t=void 0!==e.center&&void 0!==e.radius?A(e.radius,{lat:e.center.y,lng:e.center.x},e.projection):e,r=t.center,n=t.projection,o=t.radius;return i(i({},e),{},{coordinates:r?[r.x,r.y]:e.coordinates,center:r||e.center,projection:n||e.projection,radius:void 0!==o?o:e.radius,type:"Point"})})):e})),d(p(e),"convertFeaturesToGeoJson",(function(t,r){var n;if(O(r.drawMethod))n=t.toGeoJSON().geometry;else{if("GeometryCollection"===r.drawMethod)return{type:"GeometryCollection",geometries:e.drawLayer.getLayers().map((function(e){return e.toGeoJSON()})).map((function(e){return"FeatureCollection"===e.type?{type:"Multi"+e.features[0].geometry.type,coordinates:e.features.map((function(e){return e.geometry.coordinates}))}:{type:e.geometry.type,coordinates:e.geometry.coordinates}}))};var o=e.drawLayer.getLayers().map((function(e){return e.toGeoJSON()}));n={type:r.drawMethod,coordinates:o.reduce((function(e,t){return e.concat([t.geometry.coordinates])}),[])}}return _({},t.toGeoJSON(),{geometry:n})})),e}return t=c,(r=[{key:"UNSAFE_componentWillReceiveProps",value:function(e){var t=!(!this.props.messages&&!this.context.messages)&&this.context.messages.drawLocal;if(t&&(v.drawLocal=t),this.props.drawStatus!==e.drawStatus||"replace"===e.drawStatus||this.props.drawMethod!==e.drawMethod||this.props.features!==e.features)switch(e.drawStatus){case"create":this.addGeojsonLayer({features:e.features,projection:e.options&&e.options.featureProjection||"EPSG:4326",style:e.style&&e.style[e.drawMethod]||e.style});break;case"start":this.addDrawInteraction(e);break;case"drawOrEdit":this.addDrawOrEditInteractions(e);break;case"stop":this.removeAllInteractions();break;case"replace":this.replaceFeatures(e);break;case"clean":this.cleanAndStop();break;case"endDrawing":this.endDrawing(e);break;default:return}}},{key:"render",value:function(){return null}}])&&s(t.prototype,r),n&&s(t,n),c}(y.Component);d(N,"displayName","DrawSupport"),d(N,"propTypes",{map:m.object,drawOwner:m.string,drawStatus:m.string,drawMethod:m.string,options:m.object,features:m.array,onChangeDrawingStatus:m.func,onGeometryChanged:m.func,onDrawStopped:m.func,onEndDrawing:m.func,messages:m.object,style:m.object}),d(N,"defaultProps",{map:null,drawOwner:null,drawStatus:null,drawMethod:null,features:null,options:{stopAfterDrawing:!0},onChangeDrawingStatus:function(){},onGeometryChanged:function(){},onDrawStopped:function(){},onEndDrawing:function(){},style:{color:"#ffcc33",opacity:1,weight:3,fillColor:"#ffffff",fillOpacity:.2,clickable:!1,editing:{fill:1}}}),e.exports=N},"./MapStore2/web/client/components/map/leaflet/Feature.jsx":function(e,t,r){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function i(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?o(Object(r),!0).forEach((function(t){d(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function l(e,t){return(l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function u(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=f(e);if(t){var o=f(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return c(this,r)}}function c(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?p(e):t}function p(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function d(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var m=r("./MapStore2/node_modules/prop-types/index.js"),y=r("./MapStore2/node_modules/react/index.js"),h=r("./MapStore2/node_modules/lodash/lodash.js"),g=h.isEqual,b=h.isArray,v=h.castArray,S=r("./MapStore2/node_modules/object-assign/index.js"),O=r("./MapStore2/node_modules/axios/index.js"),w=r("./MapStore2/web/client/utils/leaflet/Vector.js").geometryToLayer,j=r("./MapStore2/web/client/utils/VectorStyleUtils.js").createStylesAsync,_=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}(c,e);var t,r,n,o=u(c);function c(){var e;a(this,c);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return d(p(e=o.call.apply(o,[this].concat(r))),"createLayer",(function(t){t.geometry&&e.addFeature(i(i({},t),{},{style:t.style&&v(t.style)||void 0})),t.features&&t.features.forEach((function(r){var n=S({},t,{type:r.type,geometry:r.geometry,style:r.style&&v(r.style)||void 0,properties:r.properties});e.addFeature(n)}))})),d(p(e),"removeLayer",(function(t){e._layers&&(e._layers.forEach((function(e){t.container.removeLayer(e)})),e._layers=[])})),e}return t=c,(r=[{key:"componentDidMount",value:function(){this._layers=[],(this.props.container&&this.props.geometry||this.props.features)&&this.createLayer(this.props)}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){g(e.properties,this.props.properties)&&g(e.geometry,this.props.geometry)&&e.features===this.props.features&&e.style===this.props.style&&e.styleName===this.props.styleName||(this.removeLayer(e),this.createLayer(e))}},{key:"componentWillUnmount",value:function(){this.removeLayer(this.props)}},{key:"render",value:function(){return null}},{key:"addFeature",value:function(e){var t=this;if(b(e.style)){var r=j(e.style);O.all(r).then((function(r){t.addLayer(e,r)}))}else this.addLayer(e,e.style)}},{key:"addLayer",value:function(e,t){var r=this,n=w({type:e.type,geometry:e.geometry,properties:e.properties,msId:e.msId},{style:t,styleName:e.styleName});e.container.addLayer(n),n.on("click",(function(t){e.onClick&&e.onClick({pixel:{x:t.originalEvent&&t.originalEvent.x,y:t.originalEvent&&t.originalEvent.y},latlng:t.latlng},r.props.options.handleClickOnLayer?r.props.options.id:null)})),n.setOpacity||(n.setOpacity=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=this.originalStyle||this.options&&this.options.style||this.options||{};this.originalStyle=i({},t);var r=t.opacity,o=void 0===r?1:r,a=t.fillOpacity,s=void 0===a?1:a,l=t.color,u=t.fillColor,c=t.radius,p=t.weight,f={color:l,fillColor:u,radius:c,weight:p,opacity:o*e,fillOpacity:s*e};n.setStyle&&n.setStyle(f)}),this._layers.push(n)}}])&&s(t.prototype,r),n&&s(t,n),c}(y.Component);d(_,"propTypes",{msId:m.oneOfType([m.string,m.number]),type:m.string,styleName:m.string,properties:m.object,container:m.object,geometry:m.object,features:m.array,style:m.object,onClick:m.func,options:m.object}),e.exports=_},"./MapStore2/web/client/components/map/leaflet/Layer.jsx":function(e,t,r){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function i(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?o(Object(r),!0).forEach((function(t){d(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function l(e,t){return(l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function u(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=f(e);if(t){var o=f(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return c(this,r)}}function c(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?p(e):t}function p(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function d(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var m=r("./MapStore2/node_modules/prop-types/index.js"),y=r("./MapStore2/node_modules/react/index.js"),h=r("./MapStore2/web/client/utils/leaflet/Layers.js"),g=r("./MapStore2/node_modules/object-assign/index.js"),b=r("./MapStore2/node_modules/lodash/lodash.js").isEqual,v=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}(c,e);var t,r,n,o=u(c);function c(){var e;a(this,c);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return d(p(e=o.call.apply(o,[this].concat(r))),"setLayerVisibility",(function(t){t!==(e.props.options&&!1!==e.props.options.visibility)&&(t?e.addLayer():e.removeLayer(),e.updateZIndex())})),d(p(e),"setLayerOpacity",(function(t){t!==(e.props.options&&void 0!==e.props.options.opacity?e.props.options.opacity:1)&&e.layer&&e.layer.setOpacity&&e.layer.setOpacity(t)})),d(p(e),"generateOpts",(function(t,r,n){return g({},t,r?{zIndex:r,srs:e.props.srs}:null,{zoomOffset:-e.props.zoomOffset,onError:function(){e.props.onCreationError(t)},securityToken:n})})),d(p(e),"updateZIndex",(function(t){var r=t||e.props.position;r&&e.layer&&e.layer.setZIndex&&e.layer.setZIndex(r)})),d(p(e),"createLayer",(function(t,r,n,o){if(t){var i=e.generateOpts(r,n,o);e.layer=h.createLayer(t,i),e.layer&&(e.layer.layerName=r.name,e.layer.layerId=r.id),e.forceUpdate()}})),d(p(e),"updateLayer",(function(t,r){var n=h.updateLayer(t.type,e.layer,e.generateOpts(t.options,t.position,t.securityToken),e.generateOpts(r.options,r.position,r.securityToken));n&&(e.removeLayer(),e.layer=n,e.addLayer())})),d(p(e),"addLayer",(function(){if(e.isValid()&&(e.props.map.addLayer(e.layer),e.props.options.refresh&&e.layer.setParams)){var t=0;e.refreshTimer=setInterval((function(){e.layer.setParams(g({},e.props.options.params,{_refreshCounter:t++}))}),e.props.options.refresh)}})),d(p(e),"removeLayer",(function(){e.isValid()&&e.props.map.removeLayer(e.layer)})),d(p(e),"isValid",(function(){if(e.layer){var t=h.isValid(e.props.type,e.layer);return e.valid=t,t}return!1})),e}return t=c,(r=[{key:"componentDidMount",value:function(){this.valid=!0,this.createLayer(this.props.type,this.props.options,this.props.position,this.props.securityToken),this.props.options&&this.layer&&!1!==this.props.options.visibility&&(this.addLayer(),this.updateZIndex())}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){var t=e.options&&!1!==e.options.visibility;this.setLayerVisibility(t);var r=e.options&&void 0!==e.options.opacity?e.options.opacity:1;this.setLayerOpacity(r),e.position!==this.props.position&&this.updateZIndex(e.position),this.updateLayer(e,this.props)}},{key:"shouldComponentUpdate",value:function(e){var t=this;return!["map","type","srs","position","zoomOffset","onClick","options","children"].reduce((function(r,n){switch(n){case"map":case"type":case"srs":case"position":case"zoomOffset":case"onClick":case"children":return r&&t.props[n]===e[n];case"options":return r&&(t.props[n]===e[n]||b(i(i({},t.props[n]),{},{loading:!1}),i(i({},e[n]),{},{loading:!1})));default:return r}}),!0)}},{key:"componentWillUnmount",value:function(){this.layer&&this.props.map&&(this.removeLayer(),this.refreshTimer&&clearInterval(this.refreshTimer))}},{key:"render",value:function(){var e=this;if(this.props.children){var t=this.layer,r=t?y.Children.map(this.props.children,(function(r){return r?y.cloneElement(r,{container:t,styleName:e.props.options&&e.props.options.styleName,onClick:e.props.onClick,options:e.props.options||{}}):null})):null;return y.createElement(y.Fragment,null,r)}return h.renderLayer(this.props.type,this.props.options,this.props.map,this.props.map.id,this.layer)}}])&&s(t.prototype,r),n&&s(t,n),c}(y.Component);d(v,"propTypes",{map:m.object,type:m.string,srs:m.string,options:m.object,position:m.number,zoomOffset:m.number,onCreationError:m.func,onClick:m.func,securityToken:m.string}),d(v,"defaultProps",{onCreationError:function(){},options:{}}),e.exports=v},"./MapStore2/web/client/components/map/leaflet/Locate.jsx":function(e,t,r){"use strict";r.r(t);var n=r("./MapStore2/node_modules/prop-types/index.js"),o=r.n(n),i=r("./MapStore2/node_modules/react/index.js"),a=r.n(i),s=r("./MapStore2/web/client/libs/leaflet.js"),l=r.n(s),u=r("./MapStore2/node_modules/object-assign/index.js"),c=r.n(u);r("./MapStore2/node_modules/leaflet.locatecontrol/src/L.Control.Locate.js"),r("./MapStore2/node_modules/leaflet.locatecontrol/dist/L.Control.Locate.css");function p(e){return(p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function d(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function m(e,t){return(m=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function y(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=b(e);if(t){var o=b(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return h(this,r)}}function h(e,t){return!t||"object"!==p(t)&&"function"!=typeof t?g(e):t}function g(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function b(e){return(b=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function v(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function S(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?v(Object(r),!0).forEach((function(t){O(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):v(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function O(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var w={follow:!0,remainActive:!0,stopFollowingOnDrag:!0,locateOptions:{maximumAge:2e3,enableHighAccuracy:!1,timeout:1e4,watch:!0}};l.a.Control.MSLocate=l.a.Control.Locate.extend({setMap:function(e){this._map=e,this._layer=this.options.layer||new l.a.LayerGroup,this._layer.addTo(e),this._event=void 0,this._prevBounds=null;var t={};l.a.extend(t,this.options.markerStyle,this.options.followMarkerStyle),this.options.followMarkerStyle=t,t={},l.a.extend(t,this.options.circleStyle,this.options.followCircleStyle),this.options.followCircleStyle=t,this._resetVariables(),this._map.on("unload",this._unload,this)},setLocateOptions:function(e){this.options.locateOptions=S({},e)},_setClasses:function(e){return this._map.fire("locatestatus",{state:e}),e},_updateContainerStyle:function(){this._isFollowing()?this._setClasses("following"):this._active&&this._setClasses("active")},_cleanClasses:function(){return null},setStrings:function(e){this.options.strings=c()({},this.options.strings,e)}});var j=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&m(e,t)}(i,e);var t,r,n,o=y(i);function i(){var e;f(this,i);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return O(g(e=o.call.apply(o,[this].concat(r))),"onLocationError",(function(t){e.props.onLocateError(t.message),e.props.changeLocateState("DISABLED")})),O(g(e),"locateControlState",(function(t){"requesting"===t.state&&"LOCATING"!==e.props.status?e.props.changeLocateState("LOCATING"):"following"!==t.state||e.fol?"active"===t.state&&"ENABLED"!==e.props.status&&e.props.changeLocateState("ENABLED"):e.props.changeLocateState("FOLLOWING")})),e}return t=i,(r=[{key:"componentDidMount",value:function(){this.props.map&&(this.locate=new l.a.Control.MSLocate(this.mergeOptions(this.props)),this.locate.setMap(this.props.map),this.props.map.on("locatestatus",this.locateControlState),this.locate.options.onLocationError=this.onLocationError,this.locate.options.onLocationOutsideMapBounds=this.onLocationError),this.props.status.enabled&&this.locate.start()}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){this.fol=!1,e.status!==this.props.status&&("ENABLED"!==e.status||this.locate._active?"FOLLOWING"===e.status&&this.locate._active&&!this.locate._following?(this.fol=!0,this.locate.stop(),this.locate.start()):"DISABLED"===e.status&&(this.locate._following=!1,this.locate.stop()):this.locate.start()),e.messages!==this.props.messages&&(this.locate.setStrings(e.messages),"DISABLED"!==e.status&&this.locate.drawMarker(this.locate._map)),e.maxZoom!==this.props.maxZoom&&this.locate.setLocateOptions(this.mergeOptions(e).locateOptions)}},{key:"render",value:function(){return null}},{key:"mergeOptions",value:function(e){return S(S({},w),{},{locateOptions:S(S({},w.locateOptions),{},{maxZoom:e.maxZoom})})}}])&&d(t.prototype,r),n&&d(t,n),i}(a.a.Component);O(j,"displayName","Locate"),O(j,"propTypes",{map:o.a.object,status:o.a.string,messages:o.a.object,maxZoom:o.a.number,changeLocateState:o.a.func,onLocateError:o.a.func}),O(j,"defaultProps",{id:"overview",status:"DISABLED",maxZoom:1/0,changeLocateState:function(){},onLocateError:function(){}}),t.default=j},"./MapStore2/web/client/components/map/leaflet/Map.jsx":function(e,t,r){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function a(e,t){return(a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function s(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=c(e);if(t){var o=c(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return l(this,r)}}function l(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?u(e):t}function u(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function p(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var f=r("./MapStore2/web/client/libs/leaflet.js"),d=r("./MapStore2/node_modules/prop-types/index.js"),m=r("./MapStore2/node_modules/react/index.js"),y=r("./MapStore2/web/client/utils/ConfigUtils.js").default,h=r("./MapStore2/web/client/utils/CoordinatesUtils.js"),g=h.reprojectBbox,b=h.reproject,v=r("./MapStore2/node_modules/object-assign/index.js"),S=r("./MapStore2/web/client/utils/MapUtils.js"),O=S.getGoogleMercatorResolutions,w=S.EXTENT_TO_ZOOM_HOOK,j=S.RESOLUTIONS_HOOK,_=S.COMPUTE_BBOX_HOOK,M=S.GET_PIXEL_FROM_COORDINATES_HOOK,x=S.GET_COORDINATES_FROM_PIXEL_HOOK,P=S.ZOOM_TO_EXTENT_HOOK,E=S.registerHook,L=r("./MapStore2/node_modules/rxjs/Rx.js"),C=r("./MapStore2/node_modules/lodash/lodash.js").throttle;r("./MapStore2/web/client/components/map/leaflet/SingleClick.js");var T=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&a(e,t)}(c,e);var t,r,n,l=s(c);function c(){var e;o(this,c);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return p(u(e=l.call.apply(l,[this].concat(r))),"state",{}),p(u(e),"getDocument",(function(){return e.props.document||document})),p(u(e),"getResolutions",(function(){return e.props.resolutions})),p(u(e),"_updateMapPositionFromNewProps",(function(t){var r=function(e,t){return void 0!==e&&void 0!==t&&e.toFixed(12)-t.toFixed(12)==0},n=t.center,o=e.props.center,i=e.map.getCenter(),a=r(n.x,o.x)&&r(n.y,o.y)||r(n.x,i.lng)&&r(n.y,i.lat),s=t.zoom,l=e.props.zoom,u=e.map.getZoom(),c=s===l||s===u;a||c?c?a||e.map.setView([t.center.y,t.center.x]):e.map.setZoom(t.zoom):e.map.setView([t.center.y,t.center.x],Math.round(t.zoom))})),p(u(e),"updateMapInfoState",(function(){var t=e.map.getBounds().toBBoxString().split(","),r={height:e.map.getSize().y,width:e.map.getSize().x},n=e.map.getCenter();e.props.onMapViewChanges({x:n.lng,y:n.lat,crs:"EPSG:4326"},e.map.getZoom(),{bounds:{minx:parseFloat(t[0]),miny:parseFloat(t[1]),maxx:parseFloat(t[2]),maxy:parseFloat(t[3])},crs:"EPSG:4326",rotation:0},r,e.props.id,e.props.projection)})),p(u(e),"setMousePointer",(function(t){e.map&&(e.map.getContainer().style.cursor=t||"auto")})),p(u(e),"mouseMoveEvent",(function(t){var r=t.latlng.wrap();e.props.onMouseMove({x:r.lng||0,y:r.lat||0,z:e.elevationLayer&&e.elevationLayer.getElevation(r,t.containerPoint)||void 0,crs:"EPSG:4326",pixel:{x:t.containerPoint.x,y:t.containerPoint.x},latlng:{lat:t.latlng.lat,lng:t.latlng.lng,z:e.elevationLayer&&e.elevationLayer.getElevation(t.latlng,t.containerPoint)||void 0},rawPos:[t.latlng.lat,t.latlng.lng]})})),p(u(e),"registerHooks",(function(){e.props.hookRegister.registerHook(w,(function(t){var r=b([t[0],t[1]],e.props.projection,"EPSG:4326"),n=b([t[2],t[3]],e.props.projection,"EPSG:4326");return e.map.getBoundsZoom([[r.y,r.x],[n.y,n.x]])-1})),e.props.hookRegister.registerHook(j,(function(){return e.getResolutions()})),e.props.hookRegister.registerHook(_,(function(t,r){var n=f.latLng([t.y,t.x]),o=e.map._getNewPixelOrigin(n,r),i=new f.Bounds(o,o.add(e.map.getSize())),a=e.map.unproject(i.getBottomLeft(),r),s=e.map.unproject(i.getTopRight(),r),l=new f.LatLngBounds(a,s).toBBoxString().split(",");return{bounds:{minx:parseFloat(l[0]),miny:parseFloat(l[1]),maxx:parseFloat(l[2]),maxy:parseFloat(l[3])},crs:"EPSG:4326",rotation:0}})),e.props.hookRegister.registerHook(M,(function(t){var r=b(t,e.props.projection,"EPSG:4326"),n=e.map.latLngToContainerPoint([r.y,r.x]);return[n.x,n.y]})),e.props.hookRegister.registerHook(x,(function(t){var r=e.map.containerPointToLatLng(t),n=b([r.lng,r.lat],"EPSG:4326",e.props.projection);return[n.x,n.y]})),e.props.hookRegister.registerHook(P,(function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=r.padding,o=r.crs,i=r.maxZoom,a=r.duration,s=n&&f.point(n.left||0,n.top||0),l=n&&f.point(n.right||0,n.bottom||0),u=g(t,o,"EPSG:4326");e.map.fitBounds([[u[1],u[0]],[u[3],u[2]]],{paddingTopLeft:s,paddingBottomRight:l,maxZoom:i,duration:a,animate:0!==a&&void 0})}))})),p(u(e),"addLayerObservable",(function(t,r){!t.layer.layerId||t.layer&&t.layer.options&&"vector"===t.layer.options.msLayer||t&&t.layer&&t.layer.on&&r&&(t.layer._ms2LoadingTileCount=0,t.layer.layerLoadingStream$=new L.Subject,t.layer.layerLoadStream$=new L.Subject,t.layer.layerErrorStream$=new L.Subject,t.layer.layerErrorStream$.bufferToggle(t.layer.layerLoadingStream$,(function(){return t.layer.layerLoadStream$})).subscribe({next:function(r){var n=t.layer._ms2LoadingTileCount||r&&r.length||0;r&&r.length>0&&e.props.onLayerError(r[0].target.layerId,n,r.length),t.layer._ms2LoadingTileCount=0}}))})),e}return t=c,(r=[{key:"UNSAFE_componentWillMount",value:function(){if(this.zoomOffset=0,this.props.mapOptions&&this.props.mapOptions.view&&this.props.mapOptions.view.resolutions&&this.props.mapOptions.view.resolutions.length>0){var e=f.CRS.EPSG3857.scale,t=this.props.mapOptions.view.resolutions[0]/O(0,23)[0];this.crs=v({},f.CRS.EPSG3857,{scale:function(r){return e.call(f.CRS.EPSG3857,r)/Math.pow(2,Math.round(Math.log2(t)))}}),this.zoomOffset=Math.round(Math.log2(t))}}},{key:"componentDidMount",value:function(){var e=this,t=this.props.limits,r=void 0===t?{}:t,n=r.restrictedExtent&&r.crs&&g(r.restrictedExtent,r.crs,"EPSG:4326"),o=v({},this.props.interactive?{}:{dragging:!1,touchZoom:!1,scrollWheelZoom:!1,doubleClickZoom:!1,boxZoom:!1,tap:!1,attributionControl:!1,maxBounds:n&&f.latLngBounds([[n[1],n[0]],[n[3],n[2]]]),maxBoundsViscosity:n&&1,minZoom:r&&r.minZoom,maxZoom:r&&r.maxZoom||23},this.props.mapOptions,this.crs?{crs:this.crs}:{}),i=f.map(this.getDocument().getElementById(this.props.id),v({zoomControl:!1},o)).setView([this.props.center.y,this.props.center.x],Math.round(this.props.zoom));this.map=i,this.props.zoomControl&&(this.mapZoomControl=f.control.zoom(),this.map.addControl(this.mapZoomControl)),this.attribution=f.control.attribution(),this.attribution.addTo(this.map);var a=this.getDocument();this.props.mapOptions.attribution&&this.props.mapOptions.attribution.container&&(a.querySelector(this.props.mapOptions.attribution.container).appendChild(this.attribution.getContainer()),a.querySelector(".leaflet-control-container .leaflet-control-attribution")&&a.querySelector(".leaflet-control-container .leaflet-control-attribution").parentNode.removeChild(a.querySelector(".leaflet-control-container .leaflet-control-attribution"))),this.map.on("moveend",this.updateMapInfoState),this.map.on("singleclick",(function(t){e.props.onClick&&e.props.onClick({pixel:{x:t.containerPoint.x,y:t.containerPoint.y},latlng:{lat:t.latlng.lat,lng:t.latlng.lng,z:e.elevationLayer&&e.elevationLayer.getElevation(t.latlng,t.containerPoint)||void 0},rawPos:[t.latlng.lat,t.latlng.lng],modifiers:{alt:t.originalEvent.altKey,ctrl:t.originalEvent.ctrlKey,metaKey:t.originalEvent.metaKey,shift:t.originalEvent.shiftKey}})}));var s=C(this.mouseMoveEvent,100);this.map.on("dragstart",(function(){e.map.off("mousemove",s)})),this.map.on("dragend",(function(){e.map.on("mousemove",s)})),this.map.on("mousemove",s),this.map.on("contextmenu",(function(){e.props.onRightClick&&e.props.onRightClick(event.containerPoint)})),this.map.on("mouseout",(function(){setTimeout((function(){return e.props.onMouseOut()}),150)})),this.updateMapInfoState(),this.setMousePointer(this.props.mousePointer),this.forceUpdate(),this.map.on("layeradd",(function(t){if(t.layer._ms2Added){var r=t.layer.layerLoadingStream$&&t.layer.layerLoadingStream$.isStopped;e.addLayerObservable(t,r)}else t.layer._ms2Added=!0,t.layer.getElevation&&(e.elevationLayer=t.layer),t.layer.layerId&&(t.layer&&t.layer.options&&"vector"===t.layer.options.msLayer||t&&t.layer&&t.layer.on&&(e.addLayerObservable(t,!0),t.layer.options&&t.layer.options.hideLoading||(e.props.onLayerLoading(t.layer.layerId),t.layer.layerLoadingStream$.next()),t.layer.on("loading",(function(r){e.props.onLayerLoading(r.target.layerId),t.layer.layerLoadingStream$.next()})),t.layer.on("load",(function(r){e.props.onLayerLoad(r.target.layerId),t.layer.layerLoadStream$.next()})),t.layer.on("tileloadstart ",(function(){t.layer._ms2LoadingTileCount++})),(t.layer.options&&!t.layer.options.hideErrors||!t.layer.options)&&t.layer.on("tileerror",(function(e){t.layer.layerErrorStream$.next(e)})),t.layer.on("loaderror",(function(t){e.props.onLayerError(t.target.layerId)}))))})),this.map.on("layerremove",(function(e){e.layer.layerLoadingStream$&&(e.layer.layerLoadingStream$.complete(),e.layer.layerLoadStream$.complete(),e.layer.layerErrorStream$.complete())})),this.drawControl=null,this.props.registerHooks&&this.registerHooks()}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){var t=this;if(e.mousePointer!==this.props.mousePointer&&this.setMousePointer(e.mousePointer),this.map&&e.mapStateSource!==this.props.id&&this._updateMapPositionFromNewProps(e),e.zoomControl!==this.props.zoomControl&&(e.zoomControl?(this.mapZoomControl=f.control.zoom(),this.map.addControl(this.mapZoomControl)):this.mapZoomControl&&!e.zoomControl&&(this.map.removeControl(this.mapZoomControl),this.mapZoomControl=void 0)),e.resize!==this.props.resize&&setTimeout((function(){t.map&&t.map.invalidateSize(!1)}),0),this.props.limits!==e.limits){var r=e.limits,n=void 0===r?{}:r,o=this.props.limits;if(n.restrictedExtent!==(o&&o.restrictedExtent)){var i=n.restrictedExtent&&n.crs&&g(n.restrictedExtent,n.crs,"EPSG:4326");this.map.setMaxBounds(n.restrictedExtent&&f.latLngBounds([[i[1],i[0]],[i[3],i[2]]]))}n.minZoom!==(o&&o.minZoom)&&this.map.setMinZoom(n.minZoom)}return!1}},{key:"componentWillUnmount",value:function(){var e=this.getDocument(),t=this.props.mapOptions.attribution&&this.props.mapOptions.attribution.container&&e.querySelector(this.props.mapOptions.attribution.container);if(t&&this.attribution.getContainer()&&t.querySelector(".leaflet-control-attribution"))try{t.removeChild(this.attribution.getContainer())}catch(e){}this.mapZoomControl&&(this.map.removeControl(this.mapZoomControl),this.mapZoomControl=void 0),this.map.off(),this.map.remove(),this.map=void 0}},{key:"render",value:function(){var e=this,t=this.map,r=this.props.projection,n=t?m.Children.map(this.props.children,(function(n){return n?m.cloneElement(n,{map:t,projection:r,zoomOffset:e.zoomOffset,onCreationError:e.props.onCreationError,onClick:e.props.onClick}):null})):null;return m.createElement("div",{id:this.props.id,style:this.props.style},n)}}])&&i(t.prototype,r),n&&i(t,n),c}(m.Component);p(T,"propTypes",{id:d.string,document:d.object,center:y.PropTypes.center,zoom:d.number.isRequired,mapStateSource:y.PropTypes.mapStateSource,style:d.object,projection:d.string,onMapViewChanges:d.func,onClick:d.func,onRightClick:d.func,mapOptions:d.object,limits:d.object,zoomControl:d.bool,mousePointer:d.string,onMouseMove:d.func,onLayerLoading:d.func,onLayerLoad:d.func,onLayerError:d.func,resize:d.number,measurement:d.object,changeMeasurementState:d.func,registerHooks:d.bool,interactive:d.bool,resolutions:d.array,hookRegister:d.object,onCreationError:d.func,onMouseOut:d.func}),p(T,"defaultProps",{id:"map",onMapViewChanges:function(){},onCreationError:function(){},onClick:null,onMouseMove:function(){},zoomControl:!0,mapOptions:{zoomAnimation:!0,attributionControl:!1},projection:"EPSG:3857",center:{x:13,y:45,crs:"EPSG:4326"},zoom:5,onLayerLoading:function(){},onLayerLoad:function(){},onLayerError:function(){},resize:0,registerHooks:!0,hookRegister:{registerHook:E},style:{},interactive:!0,resolutions:O(0,23),onMouseOut:function(){}}),e.exports=T},"./MapStore2/web/client/components/map/leaflet/MeasurementSupport.jsx":function(e,t,r){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function i(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?o(Object(r),!0).forEach((function(t){y(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function a(e){return function(e){if(Array.isArray(e))return s(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return s(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return s(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function p(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=m(e);if(t){var o=m(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return f(this,r)}}function f(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?d(e):t}function d(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function m(e){return(m=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function y(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var h=r("./MapStore2/node_modules/prop-types/index.js"),g=r("./MapStore2/node_modules/react/index.js"),b=r("./MapStore2/node_modules/object-assign/index.js"),v=r("./MapStore2/web/client/libs/leaflet.js"),S=r("./MapStore2/node_modules/lodash/lodash.js").slice,O=r("./MapStore2/web/client/utils/CoordinatesUtils.js"),w=O.reproject,j=O.calculateAzimuth,_=O.calculateDistance,M=O.transformLineToArcs,x=r("./MapStore2/web/client/utils/MeasureUtils.js"),P=x.convertUom,E=x.getFormattedBearingValue;r("./MapStore2/node_modules/leaflet-draw/dist/leaflet.draw.js");var L={km:2,ha:2,m:2,mi:2,ac:2,yd:0,ft:0,nm:2,sqkm:2,sqha:2,sqm:2,sqmi:2,sqac:2,sqyd:2,sqft:2,sqnm:2};v.getMeasureWithTreshold=function(e,t,r,n,o,i,a){return e>t?v.GeometryUtil.formattedNumber(P(e,r,n),o[n])+" "+a:v.GeometryUtil.formattedNumber(e,o[r])+" "+i};var C=v.GeometryUtil.readableDistance;v.GeometryUtil.readableDistance=function(e,t,r,n,o,i){if(!i)return C.apply(null,arguments);if("Bearing"===i.geomType)return i.bearing;var a=v.Util.extend({},L,o),s=i.uom.length,l=s.unit,u=s.label,c=v.GeometryUtil.formattedNumber(P(e,"m",l),a[l])+" "+u;return i.useTreshold&&(t&&(c=v.getMeasureWithTreshold(e,1e3,"m","km",a,"m","km")),"mi"===l&&(c=v.getMeasureWithTreshold(P(e,"m","yd"),1760,"yd","mi",a,"yd","mi"))),c};var T=v.GeometryUtil.readableArea;v.GeometryUtil.readableArea=function(e,t,r,n){if(!n)return T.apply(null,arguments);var o=n.uom.area,i=o.unit,a=o.label,s=v.Util.extend({},L,r),l=v.GeometryUtil.formattedNumber(P(e,"sqm",i),s[i])+" "+a;return n.useTreshold&&(t&&(l=v.getMeasureWithTreshold(e,1e6,"sqm","sqkm",s,"m²","km²")),"sqmi"===i&&(l=v.getMeasureWithTreshold(P(e,"sqm","sqyd"),3097600,"sqyd","sqmi",s,"yd²","mi²"))),l};var I=v.Draw.Polygon.prototype._getMeasurementString;v.Draw.Polygon.prototype._getMeasurementString=function(){if(!this.options.uom)return I.apply(this,arguments);var e=this._area,t="";if(!e&&!this.options.showLength)return null;if(this.options.showLength&&(t=v.Draw.Polyline.prototype._getMeasurementString.call(this)),e){var r={uom:this.options.uom,useTreshold:this.options.useTreshold};t+=this.options.showLength?"<br>":""+v.GeometryUtil.readableArea(e,this.options.metric,this.options.precision,r)}return t};var A=v.Draw.Polyline.prototype._getMeasurementString;v.Draw.Polyline.prototype._getMeasurementString=function(){if(!this.options.uom)return A.apply(this,arguments);var e,t=this._currentLatLng,r=this._markers[this._markers.length-1].getLatLng();e=v.GeometryUtil.isVersion07x()?r&&t&&t.distanceTo?this._measurementRunningTotal+t.distanceTo(r)*(this.options.factor||1):this._measurementRunningTotal||0:r&&t?this._measurementRunningTotal+this._map.distance(t,r)*(this.options.factor||1):this._measurementRunningTotal||0;var n={uom:this.options.uom,useTreshold:this.options.useTreshold,geomType:this.options.geomType,bearing:this.options.bearing?E(this.options.bearing,this.options.trueBearing):0};return v.GeometryUtil.readableDistance(e,this.options.metric,this.options.feet,this.options.nautic,this.options.precision,n)};var N=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(s,e);var t,r,n,o=p(s);function s(){var e;l(this,s);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return y(d(e=o.call.apply(o,[this].concat(r))),"onDrawStart",(function(){e.props.map.off("click",e.restartDrawing,d(e)),e.removeArcLayer(),e.props.map.doubleClickZoom&&e.props.map.doubleClickZoom.disable(),e.drawing=!0})),y(d(e),"onDrawCreated",(function(t){e.drawing=!1,e.props.map.addLayer(t.layer),e.lastLayer=t.layer;var r=e.lastLayer&&e.lastLayer.toGeoJSON()||{};if("LineString"===e.props.measurement.geomType&&(r=b({},r,{geometry:b({},r.geometry,{coordinates:M(r.geometry.coordinates)})})),"Point"===e.props.measurement.geomType){var n=e.drawControl._marker.getLatLng(),o={x:n.lng,y:n.lat,srs:"EPSG:4326"},i=b({},e.props.measurement,{point:o,feature:r});e.props.changeMeasurementState(i)}else{var a=b({},e.props.measurement,{feature:r});e.props.changeMeasurementState(a)}e.props.measurement.lineMeasureEnabled&&e.lastLayer&&e.addArcsToMap([r]),setTimeout((function(){e.props.map.off("click",e.restartDrawing,d(e)),e.props.map.on("click",e.restartDrawing,d(e))}),100)})),y(d(e),"onDrawVertex",(function(){var t=e.drawControl._markers||[];"Bearing"===e.props.measurement.geomType&&t.length>=2?setTimeout((function(){e.drawControl._markers=S(e.drawControl._markers,0,2),e.drawControl._poly._latlngs=S(e.drawControl._poly._latlngs,0,2),e.drawControl._poly._originalPoints=S(e.drawControl._poly._originalPoints,0,2),e.updateMeasurementResults(),e.drawControl._finishShape(),e.drawControl.disable()}),100):e.updateMeasurementResults()})),y(d(e),"addArcsToMap",(function(t){e.removeLastLayer();var r=t.map((function(e){return b({},e,{geometry:b({},e.geometry,{coordinates:M(e.geometry.coordinates)})})}));e.arcLayer=v.geoJson(r,{style:{color:"#ffcc33",opacity:1,weight:1,fillColor:"#ffffff",fillOpacity:.2,clickable:!1}}),e.props.map.addLayer(e.arcLayer),r&&r.length>0&&e.arcLayer.addData(r)})),y(d(e),"updateMeasurementResults",(function(){if(e.drawing&&e.drawControl){var t=0,r=0,n=0,o=e.drawControl._currentLatLng;if("LineString"===e.props.measurement.geomType&&e.drawControl._markers&&e.drawControl._markers.length>1){var i=e.drawControl._markers.reduce((function(e,t){var r=t.getLatLng(),n=r.lng,o=r.lat;return[].concat(a(e),[[n,o]])}),[]);t=_(i,e.props.measurement.lengthFormula)}else if("Polygon"===e.props.measurement.geomType&&e.drawControl._poly){var s=[].concat(a(e.drawControl._poly.getLatLngs()),[o]);r=v.GeometryUtil.geodesicArea(s)}else"Bearing"===e.props.measurement.geomType&&e.drawControl._markers&&e.drawControl._markers.length>0&&(n=e.calculateBearing());var l=b({},e.props.measurement,{point:null,len:t,area:r,bearing:n});e.props.changeMeasurementState(l)}})),y(d(e),"restartDrawing",(function(){e.props.map.off("click",e.restartDrawing,d(e)),e.props.map.doubleClickZoom&&e.props.map.doubleClickZoom.enable(),e.props.map.removeLayer(e.lastLayer),e.drawControl.enable(),e.drawing=!0})),y(d(e),"addDrawInteraction",(function(t){if(e.removeDrawInteraction(),e.props.map.on("draw:created",e.onDrawCreated,d(e)),e.props.map.on("draw:drawstart",e.onDrawStart,d(e)),e.props.map.on("draw:drawvertex",e.onDrawVertex,d(e)),e.props.map.on("mousemove",e.updateBearing,d(e)),e.props.updateOnMouseMove&&e.props.map.on("mousemove",e.updateMeasurementResults,d(e)),"Point"===t.measurement.geomType)e.drawControl=new v.Draw.Marker(e.props.map,{repeatMode:!1});else if("LineString"===t.measurement.geomType||"Bearing"===t.measurement.geomType){var r=e.uomLengthOptions(t);e.drawControl=new v.Draw.Polyline(e.props.map,i(i({shapeOptions:{color:"#ffcc33",weight:2},showLength:!0,useTreshold:t.useTreshold,uom:t.uom,geomType:t.measurement.geomType},r),{},{repeatMode:!1,icon:new v.DivIcon({iconSize:new v.Point(8,8),className:"leaflet-div-icon leaflet-editing-icon"}),touchIcon:new v.DivIcon({iconSize:new v.Point(8,8),className:"leaflet-div-icon leaflet-editing-icon leaflet-touch-icon"}),trueBearing:t.measurement.trueBearing}))}else if("Polygon"===t.measurement.geomType){var n=e.uomAreaOptions(t);e.drawControl=new v.Draw.Polygon(e.props.map,i(i({shapeOptions:{color:"#ffcc33",weight:2,fill:"rgba(255, 255, 255, 0.2)"},showArea:!0,allowIntersection:!1,showLength:!1,repeatMode:!1,useTreshold:t.useTreshold,uom:t.uom,geomType:t.measurement.geomType},n),{},{icon:new v.DivIcon({iconSize:new v.Point(8,8),className:"leaflet-div-icon leaflet-editing-icon"}),touchIcon:new v.DivIcon({iconSize:new v.Point(8,8),className:"leaflet-div-icon leaflet-editing-icon leaflet-touch-icon"})}))}e.drawControl.enable()})),y(d(e),"removeDrawInteraction",(function(){null!==e.drawControl&&void 0!==e.drawControl&&(e.drawControl.disable(),e.drawControl=null,e.removeLastLayer(),e.removeArcLayer(),e.props.map.off("draw:created",e.onDrawCreated,d(e)),e.props.map.off("draw:drawstart",e.onDrawStart,d(e)),e.props.map.off("draw:drawvertex",e.onDrawVertex,d(e)),e.props.map.off("mousemove",e.updateBearing,d(e)),e.props.map.off("click",e.restartDrawing,d(e)),e.props.updateOnMouseMove&&e.props.map.off("mousemove",e.updateMeasurementResults,d(e)),e.props.map.doubleClickZoom&&e.props.map.doubleClickZoom.enable())})),y(d(e),"removeLastLayer",(function(){e.lastLayer&&e.props.map.removeLayer(e.lastLayer)})),y(d(e),"removeArcLayer",(function(){e.arcLayer&&e.props.map.removeLayer(e.arcLayer)})),y(d(e),"uomLengthOptions",(function(e){var t=e.uom.length.unit;return{metric:"m"===t||"km"===t,nautic:"nm"===t,feet:"ft"===t}})),y(d(e),"uomAreaOptions",(function(e){var t=e.uom.area.unit;return{metric:"sqm"===t||"sqkm"===t,nautic:"sqnm"===t,feet:"sqft"===t}})),y(d(e),"calculateBearing",(function(){var t,r=e.drawControl._currentLatLng,n=e.drawControl._markers,o=[n[0].getLatLng().lng,n[0].getLatLng().lat];return 1===n.length?t=[r.lng,r.lat]:2===n.length&&(t=[n[1].getLatLng().lng,n[1].getLatLng().lat]),o=w(o,"EPSG:4326",e.props.projection),t=w(t,"EPSG:4326",e.props.projection),j(o,t,e.props.projection)})),y(d(e),"updateBearing",(function(){if("Bearing"===e.props.measurement.geomType&&e.drawControl._markers&&e.drawControl._markers.length>0){var t=e.props.measurement&&e.props.measurement.trueBearing;e.drawControl.setOptions({bearing:e.calculateBearing(),trueBearing:t})}})),e}return t=s,(r=[{key:"UNSAFE_componentWillReceiveProps",value:function(e){if((e&&e.uom&&e.uom.length&&e.uom.length.unit)!==(this.props&&this.props.uom&&this.props.uom.length&&this.props.uom.length.unit)&&this.drawControl){var t=this.uomLengthOptions(e);this.drawControl.setOptions(i(i({},t),{},{uom:e.uom}))}if((e&&e.uom&&e.uom.area&&e.uom.area.unit)!==(this.props&&this.props.uom&&this.props.uom.area&&this.props.uom.area.unit)&&this.drawControl){var r=this.uomAreaOptions(e);this.drawControl.setOptions(i(i({},r),{},{uom:e.uom}))}(e.measurement.geomType&&e.measurement.geomType!==this.props.measurement.geomType||e.measurement.geomType&&this.props.measurement.geomType&&(e.measurement.lineMeasureEnabled||e.measurement.areaMeasureEnabled||e.measurement.bearingMeasureEnabled)&&!this.props.enabled&&e.enabled)&&this.addDrawInteraction(e),e.measurement.geomType||this.removeDrawInteraction()}},{key:"render",value:function(){var e=this.props.messages||!!this.context.messages&&this.context.messages.drawLocal;return e&&(v.drawLocal=e),null}}])&&u(t.prototype,r),n&&u(t,n),s}(g.Component);y(N,"displayName","MeasurementSupport"),y(N,"propTypes",{map:h.object,metric:h.bool,feet:h.bool,nautic:h.bool,enabled:h.bool,useTreshold:h.bool,projection:h.string,measurement:h.object,changeMeasurementState:h.func,messages:h.object,uom:h.object,updateOnMouseMove:h.bool}),y(N,"contextTypes",{messages:h.object}),y(N,"defaultProps",{uom:{length:{unit:"m",label:"m"},area:{unit:"sqm",label:"m²"}},updateOnMouseMove:!1,metric:!0,nautic:!1,useTreshold:!1,feet:!1}),e.exports=N},"./MapStore2/web/client/components/map/leaflet/Overview.jsx":function(e,t,r){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function a(e,t){return(a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function s(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=u(e);if(t){var o=u(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return l(this,r)}}function l(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var p=r("./MapStore2/node_modules/prop-types/index.js"),f=r("./MapStore2/node_modules/react/index.js"),d=r("./MapStore2/node_modules/leaflet-minimap/dist/Control.MiniMap.min.js"),m=r("./MapStore2/web/client/libs/leaflet.js"),y=r("./MapStore2/web/client/utils/leaflet/Layers.js"),h=r("./MapStore2/node_modules/object-assign/index.js");r("./MapStore2/web/client/components/map/leaflet/overview.css");var g={position:"bottomright",width:300,height:150,collapsedWidth:25,collapsedHeight:25,zoomLevelOffset:-5,zoomLevelFixed:null,zoomAnimation:!1,toggleDisplay:!0,autoToggleDisplay:!1,minimized:!0},b=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&a(e,t)}(u,e);var t,r,n,l=s(u);function u(){return o(this,u),l.apply(this,arguments)}return t=u,(r=[{key:"componentDidMount",value:function(){var e=h({},g,this.props.overviewOpt);if(this.props.layers){var t=[];this.props.layers.forEach((function(e){t.push(y.createLayer(e.type,e.options||{}))})),1===t.length?this.overview=new d(t[0],e):t.length>1&&(this.overview=new d(m.layerGroup(t),e))}this.props.map&&this.overview&&this.overview.addTo(this.props.map)}},{key:"render",value:function(){return null}}])&&i(t.prototype,r),n&&i(t,n),u}(f.Component);c(b,"displayName","Overview"),c(b,"propTypes",{map:p.object,overviewOpt:p.object,layers:p.array}),c(b,"defaultProps",{id:"overview",overviewOpt:{},layers:[{type:"osm",options:{}}]}),e.exports=b},"./MapStore2/web/client/components/map/leaflet/PopupSupport.jsx":function(e,t,r){"use strict";r.r(t),r.d(t,"default",(function(){return P}));var n=r("./MapStore2/node_modules/react/index.js"),o=r.n(n),i=r("./MapStore2/node_modules/react-dom/index.js"),a=r.n(i),s=r("./MapStore2/node_modules/prop-types/index.js"),l=r.n(s),u=r("./MapStore2/web/client/libs/leaflet.js"),c=r.n(u),p=r("./MapStore2/node_modules/lodash/isString.js"),f=r.n(p),d=r("./MapStore2/web/client/utils/PopupUtils.js"),m=r("./MapStore2/web/client/components/map/popups/index.js");function y(e){return(y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function h(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function g(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?h(Object(r),!0).forEach((function(t){M(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):h(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function b(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function v(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function S(e,t){return(S=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function O(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=_(e);if(t){var o=_(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return w(this,r)}}function w(e,t){return!t||"object"!==y(t)&&"function"!=typeof t?j(e):t}function j(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _(e){return(_=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function M(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var x=function(e,t){var r=new MutationObserver((function(){e.update()}));e.once("remove",(function(){r&&r.disconnect(),r=null})),r.observe(t,{attributes:!0,childList:!0,subtree:!0})},P=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&S(e,t)}(s,e);var t,r,n,i=O(s);function s(){var e;b(this,s);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return M(j(e=i.call.apply(i,[this].concat(r))),"updatePopup",(function(){(e._popups||[]).map((function(e){return e.popup.update()}))})),M(j(e),"popupClose",(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.target,n=(r=void 0===r?{}:r).options,o=(n=void 0===n?{}:n).id;o&&e.props.onPopupClose(o)})),M(j(e),"preparePopups",(function(){var t=e.props,r=t.popups,n=void 0===r?[]:r,o=t.map,i=e.props.map.getSize();return(e._popups||[]).forEach((function(t){var r=t.popup;r.off("remove",e.popupClose),r&&e.props.map.removeLayer(r)})),e._popups=n.map((function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=.9*i.x,n=.9*i.y,a=t.id,s=t.position.coordinates,l=t.component,u=t.content,p=t.className,f=t.maxWidth,m=void 0===f?r:f,y=t.maxHeight,h=void 0===y?n:y,b=t.autoPan,v=void 0===b||b,S=t.offset,O=void 0===S?[0,7]:S,w=m>r?r:m,j=h>n?n:h,_=d.b(a,p);_.setAttribute("style","max-width: ".concat(w,"px; max-height: ").concat(j,"px")),d.a(_,u);var M=c.a.popup({id:a,autoClose:!1,closeOnClick:!1,autoPan:v,autoPanPadding:c.a.point(70,70),maxWidth:w,maxHeight:j,className:"ms-leaflet-popup",offset:O}).setContent(_);return M.once("remove",e.popupClose),l&&x(M,_),M.setLatLng(s),o.addLayer(M),g({popup:M},t)})),e._popups})),M(j(e),"stopPropagationOnMouseMove",(function(e){e.stopPropagation()})),M(j(e),"fireMouseOutEvent",(function(){e.props.map.fireEvent("mouseout")})),e}return t=s,(r=[{key:"componentWillMount",value:function(){this.props.map&&(this.props.map.getContainer().querySelector(".leaflet-popup-pane").addEventListener("mousemove",this.stopPropagationOnMouseMove),this.props.map.getContainer().querySelector(".leaflet-popup-pane").addEventListener("mouseenter",this.fireMouseOutEvent))}},{key:"componentDidMount",value:function(){this.props.map&&this.props.map.on("resize",this.updatePopup)}},{key:"shouldComponentUpdate",value:function(e){return e.popups!==this.props.popups}},{key:"componentWillUnmount",value:function(){var e=this;(this._popups||[]).forEach((function(t){var r,n,o=t.popup;o.off("remove",e.popupClose),o&&(null===(r=e.props.map)||void 0===r||null===(n=r.removeLayer)||void 0===n||n.call(r,o))})),this.props.map&&(this.props.map.off("resize",this.updatePopup),this.props.map.getContainer().removeEventListener("mousemove",this.stopPropagationOnMouseMove),this.props.map.getContainer().removeEventListener("mouseenter",this.fireMouseOutEvent))}},{key:"renderPopups",value:function(){return this.preparePopups().filter((function(e){return!!e.component})).map((function(e){var t=e.popup,r=e.props,n=void 0===r?{}:r,i=e.component,s=e.id,l=t.getContent(),u=f()(i)&&m.default[i]||i,c=o.a.isValidElement(u)&&u||o.a.createElement(u,n);return l?a.a.createPortal(c,l,s):null}))}},{key:"render",value:function(){return o.a.createElement("div",null,this.renderPopups())}}])&&v(t.prototype,r),n&&v(t,n),s}(o.a.Component);M(P,"propTypes",{map:l.a.object,popups:l.a.arrayOf(l.a.object),onPopupClose:l.a.func}),M(P,"defaultProps",{popups:[],onPopupClose:function(){}})},"./MapStore2/web/client/components/map/leaflet/ScaleBar.jsx":function(e,t,r){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function a(e,t){return(a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function s(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=u(e);if(t){var o=u(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return l(this,r)}}function l(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var p=r("./MapStore2/node_modules/prop-types/index.js"),f=r("./MapStore2/node_modules/react/index.js"),d=r("./MapStore2/web/client/libs/leaflet.js"),m=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&a(e,t)}(u,e);var t,r,n,l=s(u);function u(){return o(this,u),l.apply(this,arguments)}return t=u,(r=[{key:"componentDidMount",value:function(){if(this.scalebar=d.control.scale(this.props),this.props.map&&(this.scalebar.addTo(this.props.map),this.props.container)){document.querySelector(this.props.container).appendChild(this.scalebar.getContainer());var e=document.querySelector(".leaflet-control-container .leaflet-control-scale-line");e&&e.parentNode&&e.parentNode.removeChild(e)}}},{key:"componentWillUnmount",value:function(){if(this.props.container&&this.scalebar&&this.scalebar.getContainer())try{document.querySelector(this.props.container).removeChild(this.scalebar.getContainer())}catch(e){}}},{key:"render",value:function(){return null}}])&&i(t.prototype,r),n&&i(t,n),u}(f.Component);c(m,"propTypes",{map:p.object,position:p.oneOf(["topleft","topright","bottomleft","bottomright"]),maxWidth:p.number,metric:p.bool,imperial:p.bool,updateWhenIdle:p.bool,container:p.string}),c(m,"defaultProps",{map:null,position:"bottomleft",maxWidth:100,metric:!0,imperial:!1,updateWhenIdle:!1}),e.exports=m},"./MapStore2/web/client/components/map/leaflet/SingleClick.js":function(e,t,r){var n=r("./MapStore2/web/client/libs/leaflet.js");n.Evented.addInitHook((function(){this._singleClickTimeout=null,this.on("click",this._scheduleSingleClick,this),this.on("dblclick dragstart zoomstart",this._cancelSingleClick,this)})),n.Evented.include({_cancelSingleClick:function(){setTimeout(this._clearSingleClickTimeout.bind(this),0)},_scheduleSingleClick:function(e){this._clearSingleClickTimeout(),this._singleClickTimeout=setTimeout(this._fireSingleClick.bind(this,e),this.options.singleClickTimeout||500)},_fireSingleClick:function(e){e.originalEvent._stopped||this.fire("singleclick",n.Util.extend(e,{type:"singleclick"}))},_clearSingleClickTimeout:function(){null!==this._singleClickTimeout&&(clearTimeout(this._singleClickTimeout),this._singleClickTimeout=null)}})},"./MapStore2/web/client/components/map/leaflet/img/toggle.png":function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABIAAAASCAYAAABWzo5XAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAOxAAADsQBlSsOGwAAAH1JREFUOI3t0DEKAjEQheFP8ERWqfUCeg9rL+adbKxkYRFEY7ERhkUhCZb7wyuGYX5ewkIvK6z/ITpjxOHHPtWKrsh4fJEl3GpF29LoI9sHSS6pZjeTnTD0iOayjFevCI7hOKaJZHpObNIsih/b3WiDSzgaS+5lfrY0Wph4A4kFM89VzdVFAAAAAElFTkSuQmCC"},"./MapStore2/web/client/components/map/leaflet/img/toggle.svg":function(e,t,r){e.exports=r.p+"toggle.svg"},"./MapStore2/web/client/components/map/leaflet/overview.css":function(e,t,r){var n=r("./node_modules/css-loader/index.js!./node_modules/postcss-loader/src/index.js?!./MapStore2/web/client/components/map/leaflet/overview.css");"string"==typeof n&&(n=[[e.i,n,""]]);r("./node_modules/style-loader/addStyles.js")(n,{});n.locals&&(e.exports=n.locals)},"./MapStore2/web/client/components/map/leaflet/plugins/BingLayer.js":function(e,t,r){var n=r("./MapStore2/web/client/libs/leaflet.js"),o=r("./MapStore2/web/client/utils/leaflet/Layers.js");r("./MapStore2/node_modules/leaflet-plugins/layer/tile/Bing.js");var i=r("./MapStore2/node_modules/object-assign/index.js");n.BingLayer.prototype.loadMetadata=function(){if(!this.metaRequested){this.metaRequested=!0;var e=this,t="_bing_metadata_"+n.Util.stamp(this);window[t]=function(r){e.meta=r,window[t]=void 0;var n=document.getElementById(t);return n.parentNode.removeChild(n),r.errorDetails?(e.fire("load",{layer:e}),e.onError(r)):(e.initMetadata(r),null)};var r="file:"===document.location.protocol?"https":document.location.protocol.slice(0,-1),o=r+"://dev.virtualearth.net/REST/v1/Imagery/Metadata/"+this.options.type+"?include=ImageryProviders&jsonp="+t+"&key="+this._key+"&UriScheme="+r,i=document.createElement("script");i.type="text/javascript",i.src=o,i.id=t,document.getElementsByTagName("head")[0].appendChild(i)}},n.BingLayer.prototype.onError=function(e){return this.options.onError?this.options.onError(e):null},o.registerType("bing",{create:function(e){var t=e.apiKey,r={subdomains:[0,1,2,3],type:e.name,attribution:"Bing",culture:"",onError:e.onError,maxNativeZoom:e.maxNativeZoom||19,maxZoom:e.maxZoom||23};return e.zoomOffset&&(r=i({},r,{zoomOffset:e.zoomOffset})),new n.BingLayer(t,r)},isValid:function(e){return!e.meta||!e.meta.statusCode||200===e.meta.statusCode}})},"./MapStore2/web/client/components/map/leaflet/plugins/Commons.js":function(e,t,r){var n=r("./MapStore2/web/client/libs/leaflet.js");e.exports=n.TileLayer.extend({initialize:function(e){n.TileLayer.prototype.initialize.call(this,this.url,e)}})},"./MapStore2/web/client/components/map/leaflet/plugins/GoogleLayer.js":function(e,t,r){var n=r("./MapStore2/web/client/utils/leaflet/Layers.js"),o=r("./MapStore2/web/client/libs/leaflet.js");r("./MapStore2/node_modules/leaflet.gridlayer.googlemutant/Leaflet.GoogleMutant.js"),n.registerType("google",(function(e){return o.gridLayer.googleMutant({type:e.name.toLowerCase(),maxNativeZoom:e.maxNativeZoom||18,maxZoom:e.maxZoom||20})}))},"./MapStore2/web/client/components/map/leaflet/plugins/GraticuleLayer.js":function(e,t,r){var n=r("./MapStore2/web/client/utils/leaflet/Layers.js"),o=r("./MapStore2/node_modules/leaflet-simple-graticule/L.SimpleGraticule.js"),i=r("./MapStore2/node_modules/object-assign/index.js");r("./MapStore2/node_modules/leaflet-simple-graticule/L.SimpleGraticule.css"),n.registerType("graticule",{create:function(e){var t=i({interval:20,showOriginLabel:!0,redraw:"move"},e);return o?new o(t):null},isValid:function(){return!!o}})},"./MapStore2/web/client/components/map/leaflet/plugins/MapQuest.js":function(e,t,r){function n(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function o(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var i=r("./MapStore2/web/client/utils/leaflet/Layers.js"),a=r("./MapStore2/web/client/libs/mapquest.js");i.registerType("mapquest",{create:function(e){return a?a.mapLayer(function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?n(Object(r),!0).forEach((function(t){o(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):n(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({maxZoom:23},e)):(e&&e.onError&&e.onError(),!1)},isValid:function(){return!!a}})},"./MapStore2/web/client/components/map/leaflet/plugins/OSMLayer.js":function(e,t,r){var n=r("./MapStore2/web/client/utils/leaflet/Layers.js"),o=r("./MapStore2/web/client/libs/leaflet.js");n.registerType("osm",(function(e){return o.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:'&copy; <a href="http://osm.org/copyright">OpenStreetMap</a> contributors',zoomOffset:e.zoomOffset||0,maxNativeZoom:e.maxNativeZoom||19,maxZoom:e.maxZoom||23})}))},"./MapStore2/web/client/components/map/leaflet/plugins/TMSLayer.js":function(e,t,r){var n=r("./MapStore2/web/client/utils/leaflet/Layers.js"),o=r("./MapStore2/web/client/libs/leaflet.js");n.registerType("tms",(function(e){return o.tileLayer("".concat(e.tileMapUrl,"/{z}/{x}/{y}.").concat(e.extension),{hideErrors:e.hideErrors||!0,tms:!0})}))},"./MapStore2/web/client/components/map/leaflet/plugins/TileProviderLayer.js":function(e,t,r){function n(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function o(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function i(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,o=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(e){o=!0,i=e}finally{try{n||null==s.return||s.return()}finally{if(o)throw i}}return r}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return a(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return a(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var s=r("./MapStore2/web/client/utils/leaflet/Layers.js"),l=r("./MapStore2/web/client/libs/leaflet.js"),u=r("./MapStore2/web/client/utils/TileConfigProvider.js");s.registerType("tileprovider",(function(e){var t=i(u.getLayerConfig(e.provider,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?n(Object(r),!0).forEach((function(t){o(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):n(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({maxZoom:23},e)),2),r=t[0],a=t[1];return l.tileLayer(r,a)}))},"./MapStore2/web/client/components/map/leaflet/plugins/VectorLayer.jsx":function(e,t,r){var n=r("./MapStore2/web/client/utils/leaflet/Layers.js"),o=r("./MapStore2/node_modules/lodash/lodash.js").isNil,i=r("./MapStore2/web/client/libs/leaflet.js");n.registerType("vector",{create:function(e){var t=function(e){var t=e.hideLoading,r=i.geoJson([],{pointToLayer:"marker"!==e.styleName?function(t,r){return i.circleMarker(r,t.style||e.style)}:null,hideLoading:t});return r.setOpacity=function(e){!function e(t,r){t.eachLayer&&t.eachLayer((function(t){t.setOpacity&&t.setOpacity(r),e(t,r)}))}(r,e)},r.on("layeradd",(function(t){var n=t.layer;r.setOpacity(o(r.opacity)?e.opacity:r.opacity,n)})),r}(e);return t.opacity=o(e.opacity)?1:e.opacity,t},update:function(e,t,r){t.opacity!==r.opacity&&(e.opacity=t.opacity)},render:function(){return null}})},"./MapStore2/web/client/components/map/leaflet/plugins/WFSLayer.jsx":function(e,t,r){"use strict";r.r(t);var n=r("./MapStore2/node_modules/lodash/lodash.js"),o=r("./MapStore2/web/client/libs/leaflet.js"),i=r.n(o),a=r("./MapStore2/web/client/utils/ColorUtils.js"),s=r("./MapStore2/web/client/utils/CoordinatesUtils.js"),l=r("./MapStore2/web/client/utils/leaflet/Layers.js"),u=r.n(l),c=r("./MapStore2/web/client/utils/VendorParamsUtils.js"),p=r("./MapStore2/web/client/api/WFS.js"),f=r("./MapStore2/web/client/utils/WFSLayerUtils.js");function d(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}function m(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function y(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?m(Object(r),!0).forEach((function(t){h(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):m(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function h(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var g=function(e,t){e.fireEvent("loading");var r=Object(c.optionsToVendorParams)(t),n=function(){e.fireEvent("loadError")};return Object(p.getFeature)(t.url,t.name,y({outputFormat:"application/json",maxFeatures:1e3,srsname:Object(s.normalizeSRS)("EPSG:4326")},r)).then((function(t){return 200===t.status?(e.clearLayers(),e.addData(t.data),e.fireEvent("load")):(console.error(t),n(new Error("status code of response:"+t.status))),e})).catch((function(e){n()}))},b=function(e){var t=e||{},r=t.color,n=t.fillColor;return y(y({},d(t,["color","fillColor"])),{},{color:Object(a.b)(r,1),fillColor:Object(a.b)(n,1)})},v=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.style&&e.style[0]||e.style;return b(t)},S=function(e,t){var r=v(t);e.setStyle(r),e.options.style=r,e.styleName=t.styleName},O=function e(t,r){t.eachLayer&&t.eachLayer((function(t){t.setOpacity&&t.setOpacity(r),e(t,r)}))},w=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=v(e),o=function(t,n){return"marker"===e.styleName?i.a.marker(n,r):i.a.circleMarker(n,r)},a=new i.a.GeoJSON(t,{pointToLayer:o,style:r});return a.setOpacity=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=y({},a.options.style||{}),r=t.fillOpacity,n=void 0===r?1:r,o=t.opacity,i=void 0===o?1:o,s=y(y({},t),{},{opacity:i*e,fillOpacity:n*e});a.setStyle(b(s)),O(a,e)},a.on("layeradd",(function(){S(a,e),a.setOpacity(Object(n.isNil)(a.opacity)?e.opacity:a.opacity)})),a};u.a.registerType("wfs",{create:function(e){var t=w(e);return g(t,e),t.opacity=Object(n.isNil)(e.opacity)?1:e.opacity,t},update:function(e,t,r){if(t.opacity!==r.opacity&&(e.opacity=t.opacity),Object(f.needsReload)(r,t)&&g(e,t),Object(n.isEqual)(t.style,r.style)||S(e,t),t.styleName!==r.styleName){var o=e.toGeoJSON().features;return w(t,o)}return null},render:function(){return null}})},"./MapStore2/web/client/components/map/leaflet/plugins/WMSLayer.js":function(e,t,r){function n(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var o=r("./MapStore2/node_modules/react/index.js"),i=r("./MapStore2/web/client/components/I18N/Message.jsx").default,a=r("./MapStore2/web/client/utils/leaflet/Layers.js"),s=r("./MapStore2/web/client/utils/VendorParamsUtils.js").optionsToVendorParams,l=r("./MapStore2/web/client/utils/leaflet/WMSUtils.js"),u=r("./MapStore2/web/client/libs/leaflet.js"),c=r("./MapStore2/node_modules/object-assign/index.js"),p=r("./MapStore2/node_modules/lodash/lodash.js"),f=p.isArray,d=p.isNil,m=r("./MapStore2/web/client/utils/SecurityUtils.js"),y=m.addAuthenticationToSLD,h=m.addAuthenticationParameter,g=r("./MapStore2/web/client/utils/ElevationUtils.js"),b=g.loadTile,v=g.getElevation,S=r("./MapStore2/web/client/utils/LayersUtils.js").creditsToAttribution,O=r("./MapStore2/web/client/utils/VectorTileUtils.js").isVectorFormat;r("./MapStore2/node_modules/leaflet.nontiledlayer/dist/NonTiledLayer-src.js"),u.NonTiledLayer.WMSCustom=u.NonTiledLayer.WMS.extend({initialize:function(e,t){this._wmsUrl=e;var r=u.extend({},this.defaultWmsParams);for(var n in t)this.options.hasOwnProperty(n)||"CRS"===n.toUpperCase()||"maxNativeZoom"===n||(r[n]=t[n]);this.wmsParams=r,u.setOptions(this,t)},removeParams:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],r=arguments.length>1?arguments[1]:void 0;return t.forEach((function(t){return delete e.wmsParams[t]})),r||this.redraw(),this}}),u.nonTiledLayer.wmsCustom=function(e,t){return new u.NonTiledLayer.WMSCustom(e,t)},u.TileLayer.MultipleUrlWMS=u.TileLayer.WMS.extend({initialize:function(e,t){this._url=e[0],this._urls=e,this._urlsIndex=0;var r=u.extend({},this.defaultWmsParams),n=t.tileSize||this.options.tileSize;for(var o in t.detectRetina&&u.Browser.retina?r.width=r.height=2*n:r.width=r.height=n,t)this.options.hasOwnProperty(o)||"CRS"===o.toUpperCase()||"maxNativeZoom"===o||(r[o]=t[o]);this.wmsParams=r,u.setOptions(this,t)},getTileUrl:function(e){var t=this._map,r=this.options.tileSize,n=e.multiplyBy(r),o=n.add([r,r]),i=this._crs.project(t.unproject(n,e.z)),a=this._crs.project(t.unproject(o,e.z)),s=this._wmsVersion>=1.3&&this._crs===u.CRS.EPSG4326?[a.y,i.x,i.y,a.x].join(","):[i.x,a.y,a.x,i.y].join(",");this._urlsIndex++,this._urlsIndex===this._urls.length&&(this._urlsIndex=0);var l=u.Util.template(this._urls[this._urlsIndex],{s:this._getSubdomain(e)});return l+u.Util.getParamString(this.wmsParams,l,!0)+"&BBOX="+s},removeParams:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],r=arguments.length>1?arguments[1]:void 0;return t.forEach((function(t){return delete e.wmsParams[t]})),r||this.redraw(),this}}),u.tileLayer.multipleUrlWMS=function(e,t){return new u.TileLayer.MultipleUrlWMS(e,t)},u.TileLayer.ElevationWMS=u.TileLayer.MultipleUrlWMS.extend({initialize:function(e,t,r){this._tiles={},this._nodata=r,u.TileLayer.MultipleUrlWMS.prototype.initialize.apply(this,arguments)},_addTile:function(e){var t=this.getTileUrl(e);b(t,e,this._tileCoordsToKey(e))},getElevation:function(e,t){try{var r=this._getTileFromCoords(e),n=v(this._tileCoordsToKey(r),this._getTileRelativePixel(r,t),this.getTileSize().x,this._nodata);return n.available?n.value:o.createElement(i,{msgId:n.message})}catch(e){return o.createElement(i,{msgId:"elevationLoadingError"})}},_getTileFromCoords:function(e){var t=this._map.project(e).divideBy(256).floor();return c(t,{z:this._tileZoom})},_getTileRelativePixel:function(e,t){var r=Math.floor(t.x-this._getTilePos(e).x-this._map._getMapPanePos().x),n=Math.min(this.getTileSize().x-1,Math.floor(t.y-this._getTilePos(e).y-this._map._getMapPanePos().y));return new u.Point(r,n)},_removeTile:function(){},_abortLoading:function(){}}),u.tileLayer.elevationWMS=function(e,t,r){return new u.TileLayer.ElevationWMS(e,t,r)};var w=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object.keys(e).reduce((function(t,r){return d(e[r])?t:c(t,n({},r,e[r]))}),{})};function j(e){var t=void 0!==e.opacity?e.opacity:1,r=s(e),n=c({},e.baseParams,{attribution:e.credits&&S(e.credits),layers:e.name,styles:e.style||"",format:(O(e.format)?"image/png":e.format)||"image/png",transparent:void 0===e.transparent||e.transparent,tiled:void 0===e.tiled||e.tiled,opacity:t,zIndex:e.zIndex,version:e.version||"1.3.0",tileSize:e.tileSize||256,maxZoom:e.maxZoom||23,maxNativeZoom:e.maxNativeZoom||18},c(e._v_?{_v_:e._v_}:{},r||{}));return y(n,e)}function _(e){return e.map((function(e){return e.split("?")[0]}))}a.registerType("wms",{create:function(e){var t=_(f(e.url)?e.url:[e.url]),r=w(j(e)||{});return t.forEach((function(t){return h(t,r,e.securityToken)})),e.useForElevation?u.tileLayer.elevationWMS(t,r,e.nodata||-9999):e.singleTile?u.nonTiledLayer.wmsCustom(t[0],r):u.tileLayer.multipleUrlWMS(t,r)},update:function(e,t,r){if(r.singleTile!==t.singleTile||r.tileSize!==t.tileSize||r.securityToken!==t.securityToken&&t.visibility){var o=_(f(t.url)?t.url:[t.url]),i=j(t)||{};return o.forEach((function(e){return h(e,i,t.securityToken)})),t.singleTile?u.nonTiledLayer.wmsCustom(o[0],i):u.tileLayer.multipleUrlWMS(o,i)}var a=c({},l.filterWMSParamOptions(j(r)),y(r.params||{},r)),s=c({},l.filterWMSParamOptions(j(t)),y(t.params||{},t)),p=Object.keys(s).filter((function(e){return s[e]!==a[e]})),d=Object.keys(a).filter((function(e){return a[e]!==s[e]})),m={};return d.length>0&&e.removeParams(d,p.length>0),p.length>0&&(m=p.reduce((function(e,t){return c({},e,n({},t,s[t]))}),m),e.setParams(w(c(m,m.params,y(t.params||{},t))))),null}})},"./MapStore2/web/client/components/map/leaflet/plugins/WMTSLayer.js":function(e,t,r){"use strict";r.r(t);var n=r("./MapStore2/web/client/utils/leaflet/Layers.js"),o=r.n(n),i=r("./MapStore2/web/client/utils/CoordinatesUtils.js"),a=r("./MapStore2/web/client/libs/leaflet.js"),s=r.n(a),l=r("./MapStore2/node_modules/object-assign/index.js"),u=r.n(l),c=r("./MapStore2/web/client/utils/SecurityUtils.js"),p=r("./MapStore2/web/client/utils/WMTSUtils.js"),f=r("./MapStore2/web/client/utils/leaflet/WMTS.js"),d=r.n(f),m=r("./MapStore2/node_modules/lodash/lodash.js"),y=r("./MapStore2/web/client/utils/VectorTileUtils.js");s.a.tileLayer.wmts=function(e,t,r){return new d.a(e,t,r)};var h=function(e){var t=function(e){return e.map((function(e){return e.split("?")[0]}))}(Object(m.isArray)(e.url)?e.url:[e.url]),r=function(e){var t=Object(i.normalizeSRS)(e.srs||"EPSG:3857",e.allowedSRS),r=p.getTileMatrixSet(e.tileMatrixSet,t,e.allowedSRS,e.matrixIds);return u()({requestEncoding:e.requestEncoding,layer:e.name,style:e.style||"",format:(Object(y.isVectorFormat)(e.format)?"image/png":e.format)||"image/png",tileMatrixSet:r,version:e.version||"1.0.0",tileSize:e.tileSize||256,CRS:Object(i.normalizeSRS)(e.srs||"EPSG:3857",e.allowedSRS),maxZoom:e.maxZoom||23,maxNativeZoom:e.maxNativeZoom||18},e.params||{})}(e)||{};t.forEach((function(t){return Object(c.addAuthenticationParameter)(t,r,e.securityToken)}));var n=Object(i.normalizeSRS)(e.srs||"EPSG:3857",e.allowedSRS),o=p.getTileMatrix(e,n),a=o.tileMatrixSet,l=o.matrixIds;return s.a.tileLayer.wmts(t,r,{tileMatrixPrefix:e.tileMatrixPrefix||r.tileMatrixSet+":"||n+":",originY:e.originY||20037508.3428,originX:e.originX||-20037508.3428,ignoreErrors:e.ignoreErrors||!1,matrixIds:l,matrixSet:a})};o.a.registerType("wmts",{create:h,update:function(e,t,r){return r.securityToken!==t.securityToken||r.format!==t.format?h(t):null}})},"./MapStore2/web/client/components/map/leaflet/plugins/index.js":function(e,t,r){e.exports={BingLayer:r("./MapStore2/web/client/components/map/leaflet/plugins/BingLayer.js"),Commons:r("./MapStore2/web/client/components/map/leaflet/plugins/Commons.js"),GraticuleLayer:r("./MapStore2/web/client/components/map/leaflet/plugins/GraticuleLayer.js"),GoogleLayer:r("./MapStore2/web/client/components/map/leaflet/plugins/GoogleLayer.js"),MapQuest:r("./MapStore2/web/client/components/map/leaflet/plugins/MapQuest.js"),OSMLayer:r("./MapStore2/web/client/components/map/leaflet/plugins/OSMLayer.js"),TMSLayer:r("./MapStore2/web/client/components/map/leaflet/plugins/TMSLayer.js"),TileProviderLayer:r("./MapStore2/web/client/components/map/leaflet/plugins/TileProviderLayer.js"),WFSLayer:r("./MapStore2/web/client/components/map/leaflet/plugins/WFSLayer.jsx").default,WMSLayer:r("./MapStore2/web/client/components/map/leaflet/plugins/WMSLayer.js"),WMTSLayer:r("./MapStore2/web/client/components/map/leaflet/plugins/WMTSLayer.js"),VectorLayer:r("./MapStore2/web/client/components/map/leaflet/plugins/VectorLayer.jsx")}},"./MapStore2/web/client/components/map/openlayers/img/marker-icon.png":function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABkAAAApCAYAAADAk4LOAAAGmklEQVRYw7VXeUyTZxjvNnfELFuyIzOabermMZEeQC/OclkO49CpOHXOLJl/CAURuYbQi3KLgEhbrhZ1aDwmaoGqKII6odATmH/scDFbdC7LvFqOCc+e95s2VG50X/LLm/f4/Z7neY/ne18aANCmAr5E/xZf1uDOkTcGcWR6hl9247tT5U7Y6SNvWsKT63P58qbfeLJG8M5qcgTknrvvrdDbsT7Ml+tv82X6vVxJE33aRmgSyYtcWVMqX97Yv2JvW39UhRE2HuyBL+t+gK1116ly06EeWFNlAmHxlQE0OMiV6mQCScusKRlhS3QLeVJdl1+23h5dY4FNB3thrbYboqptEFlphTC1hSpJnbRvxP4NWgsE5Jyz86QNNi/5qSUTGuFk1gu54tN9wuK2wc3o+Wc13RCmsoBwEqzGcZsxsvCSy/9wJKf7UWf1mEY8JWfewc67UUoDbDjQC+FqK4QqLVMGGR9d2wurKzqBk3nqIT/9zLxRRjgZ9bqQgub+DdoeCC03Q8j+0QhFhBHR/eP3U/zCln7Uu+hihJ1+bBNffLIvmkyP0gpBZWYXhKussK6mBz5HT6M1Nqpcp+mBCPXosYQfrekGvrjewd59/GvKCE7TbK/04/ZV5QZYVWmDwH1mF3xa2Q3ra3DBC5vBT1oP7PTj4C0+CcL8c7C2CtejqhuCnuIQHaKHzvcRfZpnylFfXsYJx3pNLwhKzRAwAhEqG0SpusBHfAKkxw3w4627MPhoCH798z7s0ZnBJ/MEJbZSbXPhER2ih7p2ok/zSj2cEJDd4CAe+5WYnBCgR2uruyEw6zRoW6/DWJ/OeAP8pd/BGtzOZKpG8oke0SX6GMmRk6GFlyAc59K32OTEinILRJRchah8HQwND8N435Z9Z0FY1EqtxUg+0SO6RJ/mmXz4VuS+DpxXC3gXmZwIL7dBSH4zKE50wESf8qwVgrP1EIlTO5JP9Igu0aexdh28F1lmAEGJGfh7jE6ElyM5Rw/FDcYJjWhbeiBYoYNIpc2FT/SILivp0F1ipDWk4BIEo2VuodEJUifhbiltnNBIXPUFCMpthtAyqws/BPlEF/VbaIxErdxPphsU7rcCp8DohC+GvBIPJS/tW2jtvTmmAeuNO8BNOYQeG8G/2OzCJ3q+soYB5i6NhMaKr17FSal7GIHheuV3uSCY8qYVuEm1cOzqdWr7ku/R0BDoTT+DT+ohCM6/CCvKLKO4RI+dXPeAuaMqksaKrZ7L3FE5FIFbkIceeOZ2OcHO6wIhTkNo0ffgjRGxEqogXHYUPHfWAC/lADpwGcLRY3aeK4/oRGCKYcZXPVoeX/kelVYY8dUGf8V5EBRbgJXT5QIPhP9ePJi428JKOiEYhYXFBqou2Guh+p/mEB1/RfMw6rY7cxcjTrneI1FrDyuzUSRm9miwEJx8E/gUmqlyvHGkneiwErR21F3tNOK5Tf0yXaT+O7DgCvALTUBXdM4YhC/IawPU+2PduqMvuaR6eoxSwUk75ggqsYJ7VicsnwGIkZBSXKOUww73WGXyqP+J2/b9c+gi1YAg/xpwck3gJuucNrh5JvDPvQr0WFXf0piyt8f8/WI0hV4pRxxkQZdJDfDJNOAmM0Ag8jyT6hz0WGXWuP94Yh2jcfjmXAGvHCMslRimDHYuHuDsy2QtHuIavznhbYURq5R57KpzBBRZKPJi8eQg48h4j8SDdowifdIrEVdU+gbO6QNvRRt4ZBthUaZhUnjlYObNagV3keoeru3rU7rcuceqU1mJBxy+BWZYlNEBH+0eH4vRiB+OYybU2hnblYlTvkHinM4m54YnxSyaZYSF6R3jwgP7udKLGIX6r/lbNa9N6y5MFynjWDtrHd75ZvTYAPO/6RgF0k76mQla3FGq7dO+cH8sKn0Vo7nDllwAhqwLPkxrHwWmHJOo+AKJ4rab5OgrM7rVu8eWb2Pu0Dh4eDgXoOfvp7Y7QeqknRmvcTBEyq9m/HQQSCSz6LHq3z0yzsNySRfMS253wl2KyRDbcZPcfJKjZmSEOjcxyi+Y8dUOtsIEH6R2wNykdqrkYJ0RV92H0W58pkfQk7cKevsLK10Py8SdMGfXNXATY+pPbyJR/ET6n9nIfztNtZYRV9XniQu9IA2vOVgy4ir7GCLVmmd+zjkH0eAF9Po6K61pmCXHxU5rHMYd1ftc3owjwRSVRzLjKvqZEty6cRUD7jGqiOdu5HG6MdHjNcNYGqfDm5YRzLBBCCDl/2bk8a8gdbqcfwECu62Fg/HrggAAAABJRU5ErkJggg=="},"./MapStore2/web/client/components/map/plugins/leaflet.js":function(e,t,r){"use strict";r.r(t),t.default=function(){return r("./MapStore2/web/client/components/map/leaflet/plugins/index.js"),{Map:r("./MapStore2/web/client/components/map/leaflet/Map.jsx"),Layer:r("./MapStore2/web/client/components/map/leaflet/Layer.jsx"),Feature:r("./MapStore2/web/client/components/map/leaflet/Feature.jsx"),Locate:r("./MapStore2/web/client/components/map/leaflet/Locate.jsx").default,MeasurementSupport:r("./MapStore2/web/client/components/map/leaflet/MeasurementSupport.jsx"),Overview:r("./MapStore2/web/client/components/map/leaflet/Overview.jsx"),ScaleBar:r("./MapStore2/web/client/components/map/leaflet/ScaleBar.jsx"),DrawSupport:r("./MapStore2/web/client/components/map/leaflet/DrawSupport.jsx"),PopupSupport:r("./MapStore2/web/client/components/map/leaflet/PopupSupport.jsx").default}}},"./MapStore2/web/client/components/map/popups/index.js":function(e,t,r){"use strict";r.r(t);var n=r("./MapStore2/node_modules/react/index.js"),o=r.n(n),i=r("./MapStore2/web/client/components/misc/enhancers/loadingState.jsx"),a=r("./MapStore2/web/client/components/data/identify/enhancers/defaultViewer.js"),s=r("./MapStore2/node_modules/recompose/es/Recompose.js"),l=r("./MapStore2/node_modules/react-redux/es/index.js"),u=r("./MapStore2/node_modules/reselect/es/index.js"),c=r("./MapStore2/web/client/selectors/mapInfo.js"),p=r("./MapStore2/web/client/actions/mapInfo.js"),f=r("./MapStore2/web/client/components/data/identify/DefaultViewer.jsx"),d=r("./MapStore2/node_modules/lodash/lodash.js"),m=r("./MapStore2/web/client/components/data/identify/SwipeHeader.jsx"),y=r("./MapStore2/web/client/selectors/map.js"),h=Object(s.compose)(Object(l.connect)(Object(u.a)(c.j,(function(e){return{index:e}})),{setIndex:p.D}),Object(s.defaultProps)({index:0,responses:[]})),g=Object(u.a)([c.t,c.w,c.s,c.h,c.u,y.f,c.l],(function(e,t,r,n,o,i,a){return{responses:e,validResponses:t,requests:r,format:n,showEmptyMessageGFI:o,missingResponses:(r||[]).length-(e||[]).length,renderEmpty:i,loaded:a}})),b=Object(s.compose)(Object(l.connect)(g),Object(s.defaultProps)({responses:[],container:function(e){var t=e.index,r=e.children;return o.a.createElement(o.a.Fragment,null,Object(d.isArray)(r)&&r[t]||r)},header:m.a}),h,a.a,a.b,Object(i.a)((function(e){var t=e.loaded;return Object(d.isUndefined)(t)})))(f.a);r.d(t,"IDENTIFY_POPUP",(function(){return v}));var v="identify";t.default={identify:b}},"./MapStore2/web/client/components/misc/HtmlRenderer.jsx":function(e,t,r){"use strict";var n=r("./MapStore2/node_modules/prop-types/index.js"),o=r.n(n),i=r("./MapStore2/node_modules/react/index.js"),a=r.n(i);function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function p(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=m(e);if(t){var o=m(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return f(this,r)}}function f(e,t){return!t||"object"!==s(t)&&"function"!=typeof t?d(e):t}function d(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function m(e){return(m=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function y(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var h=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(i,e);var t,r,n,o=p(i);function i(){var e;l(this,i);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return y(d(e=o.call.apply(o,[this].concat(r))),"getSourceCode",(function(){return{__html:e.props.html}})),e}return t=i,(r=[{key:"render",value:function(){return a.a.createElement("div",{id:this.props.id,dangerouslySetInnerHTML:this.getSourceCode()})}}])&&u(t.prototype,r),n&&u(t,n),i}(a.a.Component);y(h,"propTypes",{html:o.a.string,id:o.a.string}),t.a=h},"./MapStore2/web/client/components/misc/Loader.jsx":function(e,t,r){"use strict";var n=r("./MapStore2/node_modules/prop-types/index.js"),o=r.n(n),i=r("./MapStore2/node_modules/react/index.js"),a=r.n(i);function s(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function l(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?s(Object(r),!0).forEach((function(t){u(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):s(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function u(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var c=function(e){return e>100?"full":e>40?"medium":"small"},p=function(e){var t=e.size,r=e.style,n=void 0===r?{}:r,o=e.className,i=e.hidden;return a.a.createElement("div",{className:o,style:l({width:t,height:t,overflow:"hidden"},n)},!i&&a.a.createElement("div",{className:"mapstore-".concat(c(t),"-size-loader")}))};p.propTypes={size:o.a.number,className:o.a.string,style:o.a.object},t.a=p},"./MapStore2/web/client/components/misc/LoadingView.jsx":function(e,t,r){"use strict";var n=r("./MapStore2/node_modules/react/index.js"),o=r.n(n),i=r("./MapStore2/node_modules/react-container-dimensions/lib/index.js"),a=r.n(i),s=r("./MapStore2/web/client/components/misc/Loader.jsx");function l(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function u(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?l(Object(r),!0).forEach((function(t){c(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):l(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function c(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}t.a=function(e){var t=e.width,r=e.height,n=e.className,i=void 0===n?"loader-container":n,l=e.contentStyle,c=void 0===l?{}:l;return o.a.createElement("div",{className:i},o.a.createElement(a.a,null,(function(e){var n=e.width,i=void 0===n?200:n,a=e.height,l=void 0===a?200:a,p=t||(l>0?Math.min(i,l):i),f=r||(l>0?Math.min(i,l):i),d=Math.min(p,f);return o.a.createElement(s.a,{size:d,style:u({padding:d/10,margin:"auto",display:"flex"},c)})})))}},"./MapStore2/web/client/components/misc/enhancers/loadingState.jsx":function(e,t,r){"use strict";var n=r("./MapStore2/node_modules/react/index.js"),o=r.n(n),i=r("./MapStore2/node_modules/recompose/es/Recompose.js"),a=r("./MapStore2/web/client/components/misc/LoadingView.jsx");function s(){return(s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}var l=function(e){var t=e.loading,r=e.isLoading;return t||r&&("function"==typeof r?r():!0===r)};t.a=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:l,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:a.a;return Object(i.branch)(e,(function(){return function(e){var n=e.loaderProps;return o.a.createElement(r,s({},t,n))}}))}},"./MapStore2/web/client/libs/leaflet.js":function(e,t){e.exports=window.L},"./MapStore2/web/client/libs/mapquest.js":function(e,t){e.exports=window.MQ},"./MapStore2/web/client/product/assets/symbols/symbolMissing.svg":function(e,t,r){e.exports=r.p+"symbolMissing.svg"},"./MapStore2/web/client/selectors/context.js":function(e,t,r){"use strict";r.d(t,"a",(function(){return p})),r.d(t,"b",(function(){return h}));var n=r("./MapStore2/node_modules/reselect/es/index.js"),o=r("./MapStore2/web/client/selectors/localConfig.js"),i=r("./MapStore2/node_modules/lodash/lodash.js"),a=r("./MapStore2/web/client/utils/ConfigUtils.js"),s=r("./MapStore2/web/client/utils/PluginsUtils.js");function l(e){return function(e){if(Array.isArray(e))return u(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return u(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return u(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var c=function(e){return e.context&&e.context.currentContext},p=function(e){return e.context&&e.context.resource},f=Object(n.a)((function(){return Object(i.get)(a.default.getConfigProp("plugins"),"desktop")}),(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return{desktop:[].concat(l(e),["Context"])}})),d=function(e){return f(e)},m=Object(n.a)((function(e){return Object(i.get)(c(e),"plugins")}),(function(e){return Object(i.get)(c(e),"userPlugins")}),(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return e&&{desktop:[].concat(l(Object(i.get)(e,"desktop",[])),l(t.filter((function(e){return e.active}))))}})),y=(Object(n.a)(c,(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e.templates})),function(e){return function(e){return Object(i.get)(e,"context.loading")}(e)?d(e):m(e)||f(e)}),h=function(e){return Object(n.a)(c,y,(function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return!t||Object(i.findIndex)(Object(i.get)(r,"desktop",[]),(function(t){return t.name===e}))>-1}))};Object(n.a)((function(e){return Object(s.g)(e,Object(o.b)(e))}),(function(e){return JSON.stringify(e)}))},"./MapStore2/web/client/selectors/localConfig.js":function(e,t,r){"use strict";r.d(t,"b",(function(){return i})),r.d(t,"c",(function(){return a})),r.d(t,"a",(function(){return s}));var n=r("./MapStore2/node_modules/lodash/lodash.js"),o=function(e){return e.localConfig},i=function(e){return(o(e)||{}).monitorState},a=function(e){return function(t){return Object(n.get)(function(e){return Object(n.get)(o(e),"plugins")}(t),e)}},s=function(e){return Object(n.get)(o(e),"defaultMapOptions.floatingIdentifyDelay",500)}},"./MapStore2/web/client/selectors/locale.js":function(e,t,r){"use strict";r.d(t,"b",(function(){return i})),r.d(t,"c",(function(){return a})),r.d(t,"a",(function(){return s}));var n=r("./MapStore2/node_modules/reselect/es/index.js"),o=r("./MapStore2/node_modules/lodash/lodash.js"),i=function(e){return e.locale&&e.locale.current||"en-US"},a=function(e){return e.locale&&e.locale.messages||{}},s=Object(n.a)([i],(function(e){return Object(o.head)(e.split("-"))}))},"./MapStore2/web/client/selectors/map.js":function(e,t,r){"use strict";r.d(t,"l",(function(){return a})),r.d(t,"o",(function(){return s})),r.d(t,"h",(function(){return l})),r.d(t,"i",(function(){return u})),r.d(t,"j",(function(){return c})),r.d(t,"n",(function(){return p})),r.d(t,"c",(function(){return d})),r.d(t,"a",(function(){return m})),r.d(t,"b",(function(){return y})),r.d(t,"g",(function(){return h})),r.d(t,"m",(function(){return g})),r.d(t,"p",(function(){return b})),r.d(t,"k",(function(){return v})),r.d(t,"d",(function(){return O})),r.d(t,"e",(function(){return w})),r.d(t,"f",(function(){return j}));var n=r("./MapStore2/web/client/utils/CoordinatesUtils.js"),o=r("./MapStore2/node_modules/reselect/es/index.js"),i=r("./MapStore2/node_modules/lodash/lodash.js"),a=function(e){return e.map&&e.map.present||e.map||e.config&&e.config.map||null},s=Object(o.a)([a],(function(e){return e&&e.projection})),l=function(e){return Object(i.get)(e,"mapInitialConfig.mapId")&&parseInt(Object(i.get)(e,"mapInitialConfig.mapId"),10)||function(e){return Object(i.get)(a(e),"mapId")&&parseInt(Object(i.get)(a(e),"mapId"),10)||null}(e)},u=function(e){return Object(i.get)(a(e),"info")},c=function(e){var t=Object(i.get)(u(e),"canEdit");return void 0===t?Object(i.get)(e,"context.resource.canEdit"):t},p=function(e){return e.localConfig&&e.localConfig.projectionDefs||[]},f=function(e){return e.localConfig&&e.localConfig.mapConstraints||{}},d=function(e){return f(e).restrictedExtent},m=function(e){return f(e).crs},y=function(e){var t=f(e),r=s(e);return r&&Object(i.get)(t,'projectionsConstraints["'.concat(r,'"].minZoom'))||Object(i.get)(t,"minZoom")},h=function(e){return Object(i.get)(a(e),"bbox")},g=function(e){return Object(i.get)(function(e){return Object(i.get)(a(e),"limits")}(e),"minZoom")},b=Object(o.a)([function(e){return Object(i.get)(a(e),"resolutions")},s],(function(e,t){if(e&&t){var r=n.default.getUnits(t);return e.map((function(e){return e*(100/2.54*96)*("degrees"===r?111194.87428468118:1)}))}return[]})),v=function(e){return e.map&&e.map.present&&e.map.present.info&&e.map.present.info.name||""},S=function(e){return Object(i.get)(a(e),"eventListeners.mousemove",[])},O=function(e){return!!S(e).length},w=function(e){return S(e).includes("mouseposition")},j=function(e){return S(e).includes("identifyFloatingTool")}},"./MapStore2/web/client/selectors/mapInfo.js":function(e,t,r){"use strict";r.d(t,"n",(function(){return m})),r.d(t,"m",(function(){return y})),r.d(t,"h",(function(){return h})),r.d(t,"u",(function(){return g})),r.d(t,"p",(function(){return b})),r.d(t,"b",(function(){return v})),r.d(t,"a",(function(){return S})),r.d(t,"o",(function(){return O})),r.d(t,"r",(function(){return w})),r.d(t,"g",(function(){return j})),r.d(t,"v",(function(){return _})),r.d(t,"i",(function(){return M})),r.d(t,"k",(function(){return x})),r.d(t,"j",(function(){return P})),r.d(t,"t",(function(){return E})),r.d(t,"s",(function(){return L})),r.d(t,"l",(function(){return C})),r.d(t,"w",(function(){return T})),r.d(t,"f",(function(){return A})),r.d(t,"e",(function(){return N})),r.d(t,"c",(function(){return k})),r.d(t,"d",(function(){return D})),r.d(t,"q",(function(){return G}));var n=r("./MapStore2/node_modules/lodash/lodash.js"),o=r("./MapStore2/node_modules/reselect/es/index.js"),i=r("./MapStore2/web/client/selectors/map.js"),a=r("./MapStore2/web/client/selectors/context.js"),s=r("./MapStore2/web/client/selectors/locale.js"),l=r("./MapStore2/web/client/utils/MapInfoUtils.js"),u=r("./MapStore2/web/client/selectors/maptype.js"),c=r("./MapStore2/web/client/selectors/localConfig.js");function p(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function f(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?p(Object(r),!0).forEach((function(t){d(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):p(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function d(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var m=Object(o.a)((function(e){return Object(c.c)("desktop")(e)||{}}),u.a,(function(e,t){return!t&&!!((Object.values(e).filter((function(e){return"Identify"===e.name})).pop()||{}).cfg||{}).showInMapPopup})),y=Object(o.a)((function(e){return Object(n.get)(e,"mapInfo.requests")||[]}),Object(a.b)("Identify"),m,(function(e,t,r){return!r&&!!e&&e.length>0&&t})),h=function(e){return Object(n.get)(e,"mapInfo.configuration.infoFormat","text/plain")},g=function(e){return Object(n.get)(e,"mapInfo.configuration.showEmptyMessageGFI",!0)},b=function(e){return Object(n.get)(e,"mapInfo.configuration",{})},v=function(e){return e&&e.mapInfo&&e.mapInfo.clickPoint},S=function(e){return e&&e.mapInfo&&e.mapInfo.clickLayer},O=function(e){return Object(n.get)(e,"mapInfo.itemId",null)},w=function(e){return Object(n.get)(e,"mapInfo.overrideParams",{})},j=function(e){return Object(n.get)(e,"mapInfo.filterNameList",[])},_=Object(o.a)((function(e){return!Object(n.get)(e,"mapInfo.enabled",!1)}),(function(e){return Object(n.get)(e,"controls.measure.enabled")&&(Object(n.get)(e,"measurement.lineMeasureEnabled")||Object(n.get)(e,"measurement.areaMeasureEnabled")||Object(n.get)(e,"measurement.bearingMeasureEnabled"))}),(function(e){var t=Object(n.get)(e,"draw.drawStatus",!1);return t&&"clean"!==t&&"stop"!==t}),(function(e){return Object(n.get)(e,"annotations.editing")}),Object(a.b)("Identify"),(function(e,t,r,n,o){return e||!!t||r||!!n||!o})),M=Object(o.c)({format:h,map:i.l,point:v,currentLocale:s.b,maxItems:function(e){return Object(n.get)(e,"mapInfo.configuration.maxItems")}}),x=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e.mapInfo&&e.mapInfo.highlight},P=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e&&e.mapInfo&&e.mapInfo.index},E=function(e){return e.mapInfo&&e.mapInfo.responses||[]},L=function(e){var t;return(null==e||null===(t=e.mapInfo)||void 0===t?void 0:t.requests)||[]},C=function(e){var t;return null==e||null===(t=e.mapInfo)||void 0===t?void 0:t.loaded},T=Object(o.a)(L,E,h,i.f,(function(e,t,r,n){var o=Object(l.i)(r);return e.length===t.length&&o.getValidResponses(t,n)})),I=Object(o.a)(T,P,(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e[t]})),A=function(e){var t=I(e)||{};return Object(n.get)(t,"layerMetadata.features")},N=function(e){var t=I(e)||{};return Object(n.get)(t,"layerMetadata.featuresCrs")},R=function(e){return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return t.style||t.geometry&&("Point"===t.geometry.type||"MultiPoint"===t.geometry.type)?e:Object(n.omit)(e,"radius")}},F=function(e){return function(t){return f(f({},t),{},{style:R(e)(t)})}},k=Object(o.a)(v,x,A,N,(function(e){return e&&e.mapInfo&&e.mapInfo.showMarker}),(function(e){return Object(n.get)(e,"mapInfo.highlightStyle",{color:"#3388ff",weight:4,radius:4,dashArray:"",fillColor:"#3388ff",fillOpacity:.2})}),(function(e,t,r,o,i,a){return i&&e?t?f(f({},e),{},{featuresCrs:o,features:r&&Object(n.isArray)(r)&&r.map(F(a))}):e:void 0})),D=function(e){var t;return null===(t=e.mapInfo)||void 0===t?void 0:t.currentEditFeatureQuery},G=function(e){var t,r;return void 0===(null===(t=e.mapInfo)||void 0===t||null===(r=t.configuration)||void 0===r?void 0:r.trigger)?"click":e.mapInfo.configuration.trigger}},"./MapStore2/web/client/selectors/maptype.js":function(e,t,r){"use strict";r.d(t,"c",(function(){return n})),r.d(t,"a",(function(){return o})),r.d(t,"b",(function(){return i}));var n=function(e){return e&&e.maptype&&e.maptype.mapType||"leaflet"},o=function(e){return"cesium"===n(e)},i=function(e){return"openlayers"===n(e)}},"./MapStore2/web/client/utils/ColorUtils.js":function(e,t,r){"use strict";r.d(t,"c",(function(){return s})),r.d(t,"a",(function(){return l})),r.d(t,"b",(function(){return u}));var n,o=r("./MapStore2/node_modules/tinycolor2/tinycolor.js"),i=r.n(o),a=r("./MapStore2/node_modules/lodash/lodash.js"),s=function(e,t,r,o){var i=e;isNaN(parseFloat(e))&&(i=n.hexToHsv(e)[0]);var a=.5/(r-1),s=t/(r-1),l=[];1===r&&(a=.5,s=t/2);for(var u=0;u<r;u++){var c=i+u*s-t/2,p=a*u+.3,f=p;o&&(c=o.h||c,p=o.s||p,f=o.v||f),l.push(n.hsvToHex(c,p,f,u))}return l},l=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"red";return i()(e).toHexString()},u=function(e,t,r){var n=i()(e);return e&&n.setAlpha(Object(a.toNumber)(void 0!==t?t:n.getAlpha())).toRgbString()||r};n={decToHex:function(e){var t=parseInt(e,10);return t=isNaN(t)?0:t,"0123456789ABCDEF".charAt(((t=t>255||t<0?0:t)-t%16)/16)+"0123456789ABCDEF".charAt(t%16)},rgbToHex:function(e,t,r){return e instanceof Array?n.rgbToHex(e[0],e[1],e[2]):"#"+n.decToHex(e)+n.decToHex(t)+n.decToHex(r)},realToDec:function(e){return Math.min(255,Math.round(256*e))},rgbToHsv:function(e,t,r){if(e instanceof Array)return n.rgbToHsv(e[0],e[1],e[2]);var o,i,a,s,l,u=e/255,c=t/255,p=r/255;switch(o=Math.min(Math.min(u,c),p),a=(i=Math.max(Math.max(u,c),p))-o,i){case o:s=0;break;case u:s=60*(c-p)/a,c<p&&(s+=360);break;case c:s=60*(p-u)/a+120;break;case p:s=60*(u-c)/a+240}return l=0===i?0:1-o/i,[Math.round(s),l,i]},distributedColorsHEX:function(e){for(var t=360/(e-1),r=[],o=function e(t,r,o){var i=e(t,r,o);return n.rgbToHex(i)},i=0;i<e;i++)r.push(o(t*i,.57,.63));return r},sameToneRangeColors:s,hsvToRgb:function(e,t,r){if(e instanceof Array)return n.hsvToRgb(e[0],e[1],e[2]);var o,i,a,s=Math.floor(e/60%6),l=e/60-s,u=r*(1-t),c=r*(1-l*t),p=r*(1-(1-l)*t);switch(s){case 0:o=r,i=p,a=u;break;case 1:o=c,i=r,a=u;break;case 2:o=u,i=r,a=p;break;case 3:o=u,i=c,a=r;break;case 4:o=p,i=u,a=r;break;case 5:o=r,i=u,a=c}return[n.realToDec(o),n.realToDec(i),n.realToDec(a)]},hsvToHex:function(e,t,r){var o=n.hsvToRgb(e,t,r);return n.rgbToHex(o)},hexToHsv:function(e){var t=e;if(t.length>0){"#"===t[0]&&(t=e.substring(1));var r=n.hexToRgb(t);return n.rgbToHsv(r)}return null},hexToRgb:function(e){var t,r,n,o=e;return"#"===o.charAt(0)&&(o=e.substring(1)),t=o.charAt(0)+o.charAt(1),r=o.charAt(2)+o.charAt(3),n=o.charAt(4)+o.charAt(5),[parseInt(t,16),parseInt(r,16),parseInt(n,16)]},colorToHexStr:l,colorToRgbaStr:u}},"./MapStore2/web/client/utils/ConfigProvider.js":function(e,t,r){"use strict";t.a={OpenStreetMap:{url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",options:{maxZoom:19,maxNativeZoom:19,credits:{text:"© OpenStreetMap, Open Street Map and contributors, CC-BY-SA",link:"http://www.openstreetmap.org/copyright"},attribution:'&copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a>'},variants:{Mapnik:{},BlackAndWhite:{url:"http://tiles.wmflabs.org/bw-mapnik/{z}/{x}/{y}.png",options:{maxZoom:18,maxNativeZoom:18}},DE:{url:"http://{s}.tile.openstreetmap.de/tiles/osmde/{z}/{x}/{y}.png",options:{maxZoom:18,maxNativeZoom:18}},France:{url:"http://{s}.tile.openstreetmap.fr/osmfr/{z}/{x}/{y}.png",options:{attribution:"&copy; Openstreetmap France | {attribution.OpenStreetMap}"}},HOT:{url:"http://{s}.tile.openstreetmap.fr/hot/{z}/{x}/{y}.png",options:{attribution:'{attribution.OpenStreetMap}, Tiles courtesy of <a href="http://hot.openstreetmap.org/" target="_blank">Humanitarian OpenStreetMap Team</a>'}}}},OpenSeaMap:{url:"http://tiles.openseamap.org/seamark/{z}/{x}/{y}.png",options:{maxNativeZoom:18,attribution:'Map data: &copy; <a href="http://www.openseamap.org">OpenSeaMap</a> contributors',credits:{text:"Map data: © OpenSeaMap contributors",link:"http://www.openseamap.org"}}},OpenPtMap:{url:"http://openptmap.org/tiles/{z}/{x}/{y}.png",options:{maxZoom:17,attribution:'Map data: &copy; <a href="http://www.openptmap.org">OpenPtMap</a> contributors'}},OpenTopoMap:{url:"https://{s}.tile.opentopomap.org/{z}/{x}/{y}.png",options:{maxZoom:17,attribution:'Map data: {attribution.OpenStreetMap}, <a href="http://viewfinderpanoramas.org">SRTM</a> | Map style: &copy; <a href="https://opentopomap.org">OpenTopoMap</a> (<a href="https://creativecommons.org/licenses/by-sa/3.0/">CC-BY-SA</a>)'}},OpenRailwayMap:{url:"https://{s}.tiles.openrailwaymap.org/standard/{z}/{x}/{y}.png",options:{maxZoom:19,attribution:'Map data: {attribution.OpenStreetMap} | Map style: &copy; <a href="https://www.OpenRailwayMap.org">OpenRailwayMap</a> (<a href="https://creativecommons.org/licenses/by-sa/3.0/">CC-BY-SA</a>)'}},OpenFireMap:{url:"http://openfiremap.org/hytiles/{z}/{x}/{y}.png",options:{maxZoom:19,attribution:'Map data: {attribution.OpenStreetMap} | Map style: &copy; <a href="http://www.openfiremap.org">OpenFireMap</a> (<a href="https://creativecommons.org/licenses/by-sa/3.0/">CC-BY-SA</a>)'}},SafeCast:{url:"https://s3.amazonaws.com/te512.safecast.org/{z}/{x}/{y}.png",options:{maxZoom:16,attribution:'Map data: {attribution.OpenStreetMap} | Map style: &copy; <a href="https://blog.safecast.org/about/">SafeCast</a> (<a href="https://creativecommons.org/licenses/by-sa/3.0/">CC-BY-SA</a>)'}},CyclOSM:{url:"https://dev.{s}.tile.openstreetmap.fr/cyclosm/{z}/{x}/{y}.png",options:{maxZoom:20,attribution:'<a href="https://github.com/cyclosm/cyclosm-cartocss-style/releases" title="CyclOSM - Open Bicycle render">CyclOSM</a> | Map data: {attribution.OpenStreetMap}'}},OpenMapSurfer:{url:"https://maps.heigit.org/openmapsurfer/tiles/{variant}/webmercator/{z}/{x}/{y}.png",options:{maxZoom:19,variant:"roads",attribution:'Imagery from <a href="http://giscience.uni-hd.de/">GIScience Research Group @ University of Heidelberg</a> | Map data '},variants:{Roads:{options:{variant:"roads",attribution:"{attribution.OpenMapSurfer}{attribution.OpenStreetMap}"}},Hybrid:{options:{variant:"hybrid",attribution:"{attribution.OpenMapSurfer}{attribution.OpenStreetMap}"}},AdminBounds:{options:{variant:"adminb",maxZoom:18,attribution:"{attribution.OpenMapSurfer}{attribution.OpenStreetMap}"}},ContourLines:{options:{variant:"asterc",maxZoom:18,minZoom:13,attribution:'{attribution.OpenMapSurfer} <a href="https://lpdaac.usgs.gov/products/aster_policies">ASTER GDEM</a>'}},Hillshade:{options:{variant:"asterh",maxZoom:18,attribution:'{attribution.OpenMapSurfer} <a href="https://lpdaac.usgs.gov/products/aster_policies">ASTER GDEM</a>, <a href="http://srtm.csi.cgiar.org/">SRTM</a>'}},ElementsAtRisk:{options:{variant:"elements_at_risk",attribution:"{attribution.OpenMapSurfer}{attribution.OpenStreetMap}"}}}},Hydda:{url:"https://{s}.tile.openstreetmap.se/hydda/{variant}/{z}/{x}/{y}.png",options:{maxZoom:18,variant:"full",attribution:'Tiles courtesy of <a href="http://openstreetmap.se/" target="_blank">OpenStreetMap Sweden</a> &mdash; Map data {attribution.OpenStreetMap}'},variants:{Full:"full",Base:"base",RoadsAndLabels:"roads_and_labels"}},Thunderforest:{url:"https://{s}.tile.thunderforest.com/{variant}/{z}/{x}/{y}.png",options:{maxNativeZoom:18,attribution:'&copy; <a href="http://www.opencyclemap.org">OpenCycleMap</a>, {attribution.OpenStreetMap}',credits:{text:"Map data: OpenCycleMap contributors",link:"http://www.opencyclemap.org"},variant:"cycle"},variants:{OpenCycleMap:"cycle",Transport:{options:{variant:"transport",maxZoom:19,maxNativeZoom:19}},TransportDark:{options:{variant:"transport-dark",maxZoom:19,maxNativeZoom:19}},Landscape:"landscape",Outdoors:"outdoors"}},MapQuestOpen:{url:"http://otile{s}.mqcdn.com/tiles/1.0.0/{type}/{z}/{x}/{y}.{ext}",options:{maxNativeZoom:18,type:"map",ext:"jpg",attribution:'Tiles Courtesy of <a href="http://www.mapquest.com/">MapQuest</a> &mdash; Map data {attribution.OpenStreetMap}',subdomains:["1","2","3","4"]},variants:{OSM:{},Aerial:{options:{type:"sat",attribution:'Tiles Courtesy of <a href="http://www.mapquest.com/">MapQuest</a> &mdash; Portions Courtesy NASA/JPL-Caltech and U.S. Depart. of Agriculture, Farm Service Agency'}},HybridOverlay:{options:{type:"hyb",ext:"png",opacity:.9}}}},MapBox:{url:"https://api.tiles.mapbox.com/v4/{source}/{z}/{x}/{y}.png?access_token={accessToken}",options:{maxNativeZoom:18,attribution:'Imagery from <a href="http://mapbox.com/about/maps/">MapBox</a> &mdash; Map data {attribution.OpenStreetMap}',subdomains:["a","b","c","d"]}},MapBoxStyle:{url:"https://api.mapbox.com/styles/v1/mapbox/{source}/tiles/{z}/{x}/{y}?access_token={accessToken}",options:{attribution:'Imagery from <a href="http://mapbox.com/about/maps/">MapBox</a>',subdomains:["a","b","c","d"]}},Stamen:{url:"https://stamen-tiles-{s}.a.ssl.fastly.net/{variant}/{z}/{x}/{y}.{ext}",options:{attribution:'Map tiles by <a href="http://stamen.com">Stamen Design</a>, <a href="http://creativecommons.org/licenses/by/3.0">CC BY 3.0</a> &mdash; Map data {attribution.OpenStreetMap}',subdomains:"abcd",minZoom:0,maxZoom:20,variant:"toner",ext:"png"},variants:{Toner:"toner",TonerBackground:"toner-background",TonerHybrid:"toner-hybrid",TonerLines:"toner-lines",TonerLabels:"toner-labels",TonerLite:"toner-lite",Watercolor:{url:"https://stamen-tiles-{s}.a.ssl.fastly.net/{variant}/{z}/{x}/{y}.{ext}",options:{variant:"watercolor",ext:"jpg",minZoom:1,maxZoom:16}},Terrain:{options:{variant:"terrain",minZoom:0,maxZoom:18}},TerrainBackground:{options:{variant:"terrain-background",minZoom:0,maxZoom:18}},TerrainLabels:{options:{variant:"terrain-labels",minZoom:0,maxZoom:18}}}},Esri:{url:"https://server.arcgisonline.com/ArcGIS/rest/services/{variant}/MapServer/tile/{z}/{y}/{x}",options:{maxNativeZoom:18,variant:"World_Street_Map",attribution:"Tiles &copy; Esri"},variants:{WorldStreetMap:{options:{attribution:"{attribution.Esri} &mdash; Source: Esri, DeLorme, NAVTEQ, USGS, Intermap, iPC, NRCAN, Esri Japan, METI, Esri China (Hong Kong), Esri (Thailand), TomTom, 2012"}},DeLorme:{options:{variant:"Specialty/DeLorme_World_Base_Map",minZoom:1,maxZoom:11,maxNativeZoom:11,attribution:"{attribution.Esri} &mdash; Copyright: &copy;2012 DeLorme"}},WorldTopoMap:{options:{variant:"World_Topo_Map",attribution:"{attribution.Esri} &mdash; Esri, DeLorme, NAVTEQ, TomTom, Intermap, iPC, USGS, FAO, NPS, NRCAN, GeoBase, Kadaster NL, Ordnance Survey, Esri Japan, METI, Esri China (Hong Kong), and the GIS User Community"}},WorldImagery:{options:{variant:"World_Imagery",attribution:"{attribution.Esri} &mdash; Source: Esri, i-cubed, USDA, USGS, AEX, GeoEye, Getmapping, Aerogrid, IGN, IGP, UPR-EGP, and the GIS User Community"}},WorldTerrain:{options:{variant:"World_Terrain_Base",maxZoom:13,maxNativeZoom:13,attribution:"{attribution.Esri} &mdash; Source: USGS, Esri, TANA, DeLorme, and NPS"}},WorldShadedRelief:{options:{variant:"World_Shaded_Relief",maxZoom:13,maxNativeZoom:13,attribution:"{attribution.Esri} &mdash; Source: Esri"}},WorldPhysical:{options:{variant:"World_Physical_Map",maxZoom:8,maxNativeZoom:8,attribution:"{attribution.Esri} &mdash; Source: US National Park Service"}},OceanBasemap:{options:{variant:"Ocean_Basemap",maxZoom:13,maxNativeZoom:13,attribution:"{attribution.Esri} &mdash; Sources: GEBCO, NOAA, CHS, OSU, UNH, CSUMB, National Geographic, DeLorme, NAVTEQ, and Esri"}},NatGeoWorldMap:{options:{variant:"NatGeo_World_Map",maxZoom:16,maxNativeZoom:16,attribution:"{attribution.Esri} &mdash; National Geographic, Esri, DeLorme, NAVTEQ, UNEP-WCMC, USGS, NASA, ESA, METI, NRCAN, GEBCO, NOAA, iPC"}},WorldGrayCanvas:{options:{variant:"Canvas/World_Light_Gray_Base",maxZoom:16,maxNativeZoom:16,attribution:"{attribution.Esri} &mdash; Esri, DeLorme, NAVTEQ"}}}},OpenWeatherMap:{url:"http://{s}.tile.openweathermap.org/map/{variant}/{z}/{x}/{y}.png",options:{maxZoom:19,maxNativeZoom:19,attribution:'Map data &copy; <a href="http://openweathermap.org">OpenWeatherMap</a>',opacity:.5},variants:{Clouds:"clouds",CloudsClassic:"clouds_cls",Precipitation:"precipitation",PrecipitationClassic:"precipitation_cls",Rain:"rain",RainClassic:"rain_cls",Pressure:"pressure",PressureContour:"pressure_cntr",Wind:"wind",Temperature:"temp",Snow:"snow"}},HERE:{url:"https://{s}.{base}.maps.cit.api.here.com/maptile/2.1/maptile/{mapID}/{variant}/{z}/{x}/{y}/256/png8?app_id={app_id}&app_code={app_code}",options:{attribution:'Map &copy; 1987-2014 <a href="http://developer.here.com">HERE</a>',subdomains:["1","2","3","4"],mapID:"newest",app_id:"<insert your app_id here>",app_code:"<insert your app_code here>",base:"base",variant:"normal.day",maxZoom:20,maxNativeZoom:20},variants:{normalDay:"normal.day",normalDayCustom:"normal.day.custom",normalDayGrey:"normal.day.grey",normalDayMobile:"normal.day.mobile",normalDayGreyMobile:"normal.day.grey.mobile",normalDayTransit:"normal.day.transit",normalDayTransitMobile:"normal.day.transit.mobile",normalNight:"normal.night",normalNightMobile:"normal.night.mobile",normalNightGrey:"normal.night.grey",normalNightGreyMobile:"normal.night.grey.mobile",carnavDayGrey:"carnav.day.grey",hybridDay:{options:{base:"aerial",variant:"hybrid.day"}},hybridDayMobile:{options:{base:"aerial",variant:"hybrid.day.mobile"}},pedestrianDay:"pedestrian.day",pedestrianNight:"pedestrian.night",satelliteDay:{options:{base:"aerial",variant:"satellite.day"}},terrainDay:{options:{base:"aerial",variant:"terrain.day"}},terrainDayMobile:{options:{base:"aerial",variant:"terrain.day.mobile"}}}},Acetate:{url:"http://a{s}.acetate.geoiq.com/tiles/{variant}/{z}/{x}/{y}.png",options:{attribution:"&copy;2012 Esri & Stamen, Data from OSM and Natural Earth",subdomains:["0","1","2","3"],minZoom:2,maxZoom:18,maxNativeZoom:18,variant:"acetate-base"},variants:{basemap:"acetate-base",terrain:"terrain",all:"acetate-hillshading",foreground:"acetate-fg",roads:"acetate-roads",labels:"acetate-labels",hillshading:"hillshading"}},FreeMapSK:{url:"http://t{s}.freemap.sk/T/{z}/{x}/{y}.jpeg",options:{minZoom:8,maxZoom:16,maxNativeZoom:16,subdomains:["1","2","3","4"],bounds:[[47.204642,15.996093],[49.830896,22.576904]],attribution:'{attribution.OpenStreetMap}, vizualization CC-By-SA 2.0 <a href="http://freemap.sk">Freemap.sk</a>'}},MtbMap:{url:"http://tile.mtbmap.cz/mtbmap_tiles/{z}/{x}/{y}.png",options:{maxNativeZoom:18,attribution:"{attribution.OpenStreetMap} &amp; USGS"}},CartoDB:{url:"https://{s}.basemaps.cartocdn.com/{variant}/{z}/{x}/{y}.png",options:{attribution:'{attribution.OpenStreetMap} &copy; <a href="http://cartodb.com/attributions">CartoDB</a>',subdomains:["a","b","c","d"],maxZoom:19,maxNativeZoom:19,variant:"light_all"},variants:{Positron:"light_all",PositronNoLabels:"light_nolabels",PositronOnlyLabels:"light_only_labels",DarkMatter:"dark_all",DarkMatterNoLabels:"dark_nolabels",DarkMatterOnlyLabels:"dark_only_labels"}},HikeBike:{url:"http://{s}.tiles.wmflabs.org/{variant}/{z}/{x}/{y}.png",options:{maxZoom:19,maxNativeZoom:19,attribution:"{attribution.OpenStreetMap}",variant:"hikebike"},variants:{HikeBike:{},HillShading:{options:{maxZoom:15,maxNativeZoom:15,variant:"hillshading"}}}},BasemapAT:{url:"https://maps{s}.wien.gv.at/basemap/{variant}/normal/google3857/{z}/{y}/{x}.{format}",options:{maxZoom:19,maxNativeZoom:19,attribution:'Datenquelle: <a href="https://www.basemap.at">basemap.at</a>',subdomains:["","1","2","3","4"],format:"png",bounds:[[46.35877,8.782379],[49.037872,17.189532]],variant:"geolandbasemap"},variants:{basemap:"geolandbasemap",grau:"bmapgrau",overlay:"bmapoverlay",highdpi:{options:{variant:"bmaphidpi",format:"jpeg"}},orthofoto:{options:{variant:"bmaporthofoto30cm",format:"jpeg"}}}},NASAGIBS:{url:"https://map1.vis.earthdata.nasa.gov/wmts-webmerc/{variant}/default/{time}/{tilematrixset}9/{z}/{y}/{x}.{format}",options:{attribution:'<span>Imagery provided by services from the Global Imagery Browse Services (GIBS), operated by the NASA/GSFC/Earth Science Data and Information System (<a href="https://earthdata.nasa.gov">ESDIS</a>) with funding provided by NASA/HQ.</span>',credits:{text:"Black Marble imagery courtesy NASA Earth Observatory"},bounds:[[-85.0511287776,-179.999999975],[85.0511287776,179.999999975]],minZoom:1,maxZoom:9,maxNativeZoom:9,format:"jpg",time:"",tilematrixset:"GoogleMapsCompatible_Level"},variants:{ModisTerraTrueColorCR:"MODIS_Terra_CorrectedReflectance_TrueColor",ModisTerraBands367CR:"MODIS_Terra_CorrectedReflectance_Bands367",ViirsEarthAtNight2012:{url:"https://map1.vis.earthdata.nasa.gov/wmts-webmerc/{variant}/default/{time}/{tilematrixset}8/{z}/{y}/{x}.{format}",options:{variant:"VIIRS_CityLights_2012",maxZoom:8,maxNativeZoom:8}},ModisTerraLSTDay:{url:"https://map1.vis.earthdata.nasa.gov/wmts-webmerc/{variant}/default/{time}/{tilematrixset}7/{z}/{y}/{x}.{format}",options:{variant:"MODIS_Terra_Land_Surface_Temp_Day",format:"png",maxZoom:7,maxNativeZoom:7,opacity:.75}},ModisTerraSnowCover:{url:"https://map1.vis.earthdata.nasa.gov/wmts-webmerc/{variant}/default/{time}/{tilematrixset}8/{z}/{y}/{x}.{format}",options:{variant:"MODIS_Terra_Snow_Cover",format:"png",maxZoom:8,maxNativeZoom:8,opacity:.75}},ModisTerraAOD:{url:"https://map1.vis.earthdata.nasa.gov/wmts-webmerc/{variant}/default/{time}/{tilematrixset}6/{z}/{y}/{x}.{format}",options:{variant:"MODIS_Terra_Aerosol",format:"png",maxZoom:6,maxNativeZoom:6,opacity:.75}},ModisTerraChlorophyll:{url:"https://map1.vis.earthdata.nasa.gov/wmts-webmerc/{variant}/default/{time}/{tilematrixset}7/{z}/{y}/{x}.{format}",options:{variant:"MODIS_Terra_Chlorophyll_A",format:"png",maxZoom:7,maxNativeZoom:7,opacity:.75}}}},NLS:{url:"https://nls-{s}.tileserver.com/{variant}/{z}/{x}/{y}.jpg",options:{attribution:'<a href="http://geo.nls.uk/maps/">National Library of Scotland Historic Maps</a>',bounds:[[49.6,-12],[61.7,3]],minZoom:1,maxZoom:18,maxNativeZoom:18,subdomains:["0","1","2","3"]},variants:{OS_1900:"NLS_API",OS_1920:"nls",OS_opendata:{url:"http://geo.nls.uk/maps/opendata/{z}/{x}/{y}.png",options:{maxZoom:16,maxNativeZoom:16}},OS_6inch_1st:{url:"http://geo.nls.uk/maps/os/six_inch/{z}/{x}/{y}.png",options:{tms:!0,minZoom:6,maxZoom:16,maxNativeZoom:16,bounds:[[49.86261,-8.66444],[60.89421,1.7785]]}},OS_6inch:"os_6_inch_gb",OS_25k:"25k",OS_npe:{url:"http://geo.nls.uk/maps/os/newpopular/{z}/{x}/{y}.png",options:{tms:!0,minZoom:3,maxZoom:15,maxNativeZoom:15}},OS_7th:"os7gb",OS_London:{options:{variant:"London_1056",minZoom:9,maxNativeZoom:9,bounds:[[51.177621,-.708618],[51.618016,.355682]]}},GSGS_Ireland:{url:"http://geo.nls.uk/maps/ireland/gsgs4136/{z}/{x}/{y}.png",options:{tms:!0,minZoom:5,maxZoom:15,maxNativeZoom:15,bounds:[[51.37178,-10.810546],[55.422779,-5.262451]]}}}},LINZ:{url:"http://tiles-{s}.data-cdn.linz.govt.nz/services;key={linzAPIkey}/tiles/v4/{variant}/{tilematrixset}/{z}/{x}/{y}.png",options:{attribution:'<a href="https://www.linz.govt.nz/data/licensing-and-using-data/attributing-elevation-or-aerial-imagery-data">Sourced from LINZ. CC-BY 4.0</a>',subdomains:["a","b","c","d"],linzAPIkey:"<insert your LINZ API Key here>",variant:"set=4702",tilematrixset:"EPSG:3857",maxZoom:22,maxNativeZoom:22},variants:{nz_aerial_imagery:{options:{attribution:'<a href="https://www.linz.govt.nz/data/licensing-and-using-data/attributing-elevation-or-aerial-imagery-data">Sourced from LINZ. CC-BY 4.0</a>',variant:"set=4702",tilematrixset:"EPSG:3857",maxZoom:22,maxNativeZoom:22}},nz_topo50_maps:{options:{attribution:'Sourced from the <a href="https://data.linz.govt.nz/">LINZ Data Service</a> and licensed for reuse under the <a href="https://creativecommons.org/licenses/by/4.0/">CC BY 4.0</a> license',variant:"layer=50767",tilematrixset:"EPSG:3857",maxZoom:22,maxNativeZoom:22}},nz_topo50_gridless_maps:{options:{attribution:'Sourced from the <a href="https://data.linz.govt.nz/">LINZ Data Service</a> and licensed for reuse under the <a href="https://creativecommons.org/licenses/by/4.0/">CC BY 4.0</a> license',variant:"layer=52343",tilematrixset:"EPSG:3857",maxZoom:22,maxNativeZoom:22}},nz_topo250_gridless_maps:{options:{attribution:'Sourced from the <a href="https://data.linz.govt.nz/">LINZ Data Service</a> and licensed for reuse under the <a href="https://creativecommons.org/licenses/by/4.0/">CC BY 4.0</a> license',variant:"layer=52324",tilematrixset:"EPSG:3857",maxZoom:22,maxNativeZoom:22}},nz_topo250_maps:{options:{attribution:'Sourced from the <a href="https://data.linz.govt.nz/">LINZ Data Service</a> and licensed for reuse under the <a href="https://creativecommons.org/licenses/by/4.0/">CC BY 4.0</a> license',variant:"layer=50798",tilematrixset:"EPSG:3857",maxZoom:22,maxNativeZoom:22}},nz_parcel_boundaries_wireframe:{options:{attribution:'Sourced from the <a href="https://data.linz.govt.nz/">LINZ Data Service</a> and licensed for reuse under the <a href="https://creativecommons.org/licenses/by/4.0/">CC BY 4.0</a> license',variant:"set=4769",tilematrixset:"EPSG:3857",maxZoom:22,maxNativeZoom:22}}}},PDOK:{url:"https://geodata.nationaalgeoregister.nl/tiles/service/wmts?layer={variant}&tilematrixset=EPSG:3857&Service=WMTS&Request=GetTile&Version=1.0.0&Format=image%2Fpng&TileMatrix={z}&TileCol={x}&TileRow={y}",options:{attribution:'<a href="https://www.pdok.nl/introductie?articleid=1949876">BRT Achtergrondkaart</a> by <a href="https://www.kadaster.nl/">Kadaster</a>, <a href="http://creativecommons.org/licenses/by/4.0">CC BY 4.0</a>',format:"png",bounds:[[48.0405018704,-1.65729160235],[56.1105896442,12.4317272654]],minZoom:6,maxZoom:19,maxNativeZoom:19},variants:{brtachtergrondkaart:"brtachtergrondkaart",brtachtergrondkaartgrijs:"brtachtergrondkaartgrijs",brtachtergrondkaartpastel:"brtachtergrondkaartpastel",brtachtergrondkaartwater:"brtachtergrondkaartwater",luchtfotoRGB:{url:"https://geodata.nationaalgeoregister.nl/luchtfoto/rgb/wmts?layer={variant}&tilematrixset=EPSG:3857&Service=WMTS&Request=GetTile&Version=1.0.0&Format=image%2Fpng&TileMatrix={z}&TileCol={x}&TileRow={y}",options:{variant:"Actueel_ortho25",attribution:'<a href="https://www.pdok.nl/introductie?articleid=1954278">Luchtfoto Actueel Ortho 25cm RGB</a> by <a href="http://www.beeldmateriaal.nl">Beeldmateriaal.nl</a>, <a href="http://creativecommons.org/licenses/by/4.0">CC BY 4.0</a>'}},luchtfotoIR:{url:"https://geodata.nationaalgeoregister.nl/luchtfoto/rgb/wmts?layer={variant}&tilematrixset=EPSG:3857&Service=WMTS&Request=GetTile&Version=1.0.0&Format=image%2Fpng&TileMatrix={z}&TileCol={x}&TileRow={y}",options:{variant:"Actueel_ortho25IR",attribution:'<a href="https://www.pdok.nl/introductie?articleid=1954278">Luchtfoto Actueel Ortho 25cm Infrarood</a> by <a href="http://www.beeldmateriaal.nl">Beeldmateriaal.nl</a>, <a href="http://creativecommons.org/licenses/by/4.0">CC BY 4.0</a>'}}}}}},"./MapStore2/web/client/utils/CoordinatesUtils.js":function(e,t,r){"use strict";r.r(t),r.d(t,"FORMULAS",(function(){return T})),r.d(t,"getProjUrl",(function(){return A})),r.d(t,"determineCrs",(function(){return R})),r.d(t,"normalizePoint",(function(){return k})),r.d(t,"reproject",(function(){return G})),r.d(t,"reprojectExtent",(function(){return B})),r.d(t,"getPolygonFromExtent",(function(){return z})),r.d(t,"getExtentFromNormalized",(function(){return q})),r.d(t,"crsCodeTable",(function(){return W})),r.d(t,"setCrsLabels",(function(){return Z})),r.d(t,"getUnits",(function(){return V})),r.d(t,"getProjectedBBox",(function(){return H})),r.d(t,"createBBox",(function(){return K})),r.d(t,"reprojectGeoJson",(function(){return Y})),r.d(t,"lineIntersectPolygon",(function(){return X})),r.d(t,"normalizeLng",(function(){return J})),r.d(t,"reprojectBbox",(function(){return Q})),r.d(t,"bboxToFeatureGeometry",(function(){return $})),r.d(t,"getCompatibleSRS",(function(){return ee})),r.d(t,"getEquivalentSRS",(function(){return te})),r.d(t,"getEPSGCode",(function(){return re})),r.d(t,"normalizeSRS",(function(){return ne})),r.d(t,"isAllowedSRS",(function(){return oe})),r.d(t,"getAvailableCRS",(function(){return ie})),r.d(t,"filterCRSList",(function(){return ae})),r.d(t,"calculateAzimuth",(function(){return se})),r.d(t,"calculateDistance",(function(){return le})),r.d(t,"extendExtent",(function(){return ue})),r.d(t,"getGeoJSONExtent",(function(){return ce})),r.d(t,"isValidExtent",(function(){return pe})),r.d(t,"calculateCircleCoordinates",(function(){return fe})),r.d(t,"transformLineToArcs",(function(){return de})),r.d(t,"transformArcsToLine",(function(){return me})),r.d(t,"coordsOLtoLeaflet",(function(){return ye})),r.d(t,"mergeToPolyGeom",(function(){return he})),r.d(t,"getViewportGeometry",(function(){return ge})),r.d(t,"getExtentFromViewport",(function(){return be})),r.d(t,"fetchProjRemotely",(function(){return ve})),r.d(t,"parseURN",(function(){return Se})),r.d(t,"parseString",(function(){return Oe})),r.d(t,"getWMSBoundingBox",(function(){return we})),r.d(t,"isSRSAllowed",(function(){return je})),r.d(t,"getNormalizedLatLon",(function(){return _e})),r.d(t,"isInsideVisibleArea",(function(){return Me})),r.d(t,"centerToVisibleArea",(function(){return xe})),r.d(t,"calculateCircleRadiusFromPixel",(function(){return Pe})),r.d(t,"roundCoord",(function(){return Ee})),r.d(t,"midpoint",(function(){return Le})),r.d(t,"pointObjectToArray",(function(){return Ce})),r.d(t,"isPointInsideExtent",(function(){return Te})),r.d(t,"isBboxCompatible",(function(){return Ie})),r.d(t,"extractCrsFromURN",(function(){return Ae})),r.d(t,"makeNumericEPSG",(function(){return Ne})),r.d(t,"makeBboxFromOWS",(function(){return Re}));var n=r("./MapStore2/node_modules/node-geo-distance/index.js"),o=r.n(n),i=r("./MapStore2/web/client/libs/proj4.js"),a=r.n(i),s=r("./MapStore2/web/client/libs/ajax.js"),l=r.n(s),u=r("./MapStore2/node_modules/object-assign/index.js"),c=r.n(u),p=r("./MapStore2/node_modules/lodash/lodash.js"),f=r("./MapStore2/node_modules/@turf/line-intersect/index.js"),d=r.n(f),m=r("./MapStore2/node_modules/@turf/polygon-to-linestring/index.js"),y=r.n(m),h=r("./MapStore2/node_modules/@turf/great-circle/main.es.js"),g=r("./MapStore2/node_modules/turf-point/index.js"),b=r.n(g),v=r("./MapStore2/node_modules/@turf/bbox-polygon/main.es.js"),S=r("./MapStore2/node_modules/@turf/boolean-overlap/main.es.js"),O=r("./MapStore2/node_modules/@turf/boolean-contains/main.es.js");function w(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function j(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?w(Object(r),!0).forEach((function(t){_(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):w(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function _(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function M(e){return function(e){if(Array.isArray(e))return E(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||P(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function x(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,o=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(e){o=!0,i=e}finally{try{n||null==s.return||s.return()}finally{if(o)throw i}}return r}(e,t)||P(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function P(e,t){if(e){if("string"==typeof e)return E(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?E(e,t):void 0}}function E(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var L,C=a.a,T={vincenty:function(e){for(var t=0,r=0;r<e.length-1;++r){var n=e[r],i=e[r+1],a=x(n,2),s=a[0],l=a[1],u=x(i,2),c=u[0],p=u[1];t+=parseFloat(o.a.vincentySync({longitude:s,latitude:l},{longitude:c,latitude:p}))}return t},haversine:function(e){for(var t=0,r=0;r<e.length-1;++r){var n=e[r],i=e[r+1],a=x(n,2),s=a[0],l=a[1],u=x(i,2),c=u[0],p=u[1];t+=parseFloat(o.a.haversineSync({longitude:s,latitude:l},{longitude:c,latitude:p}))}return t}};function I(e,t){return(r=e).length>=2&&"number"==typeof r[0]&&"number"==typeof r[1]?t(e):e.map((function(e){return I(e,t)}));var r}var A=function(e){return"http://spatialreference.org/ref/epsg/".concat(e,"/proj4/")};function N(e,t,r){if(null===e)return e;var n=Object(p.cloneDeep)(e);return"Feature"===e.type?n.geometry=N(e.geometry,t,r):"FeatureCollection"===e.type?n.features=n.features.map((function(e){return N(e,t,r)})):"GeometryCollection"===e.type?n.geometries=n.geometries.map((function(e){return N(e,t,r)})):t&&t(n),r&&r(n),n}function R(e){return"string"==typeof e||e instanceof String?a.a.defs(e)?new a.a.Proj(e):null:e}var F={"EPSG:4326":"WGS 84","EPSG:3857":"EPSG:3857"},k=function(e){return{x:e.x||0,y:e.y||0,srs:e.srs||e.crs||"EPSG:4326",crs:e.srs||e.crs||"EPSG:4326"}},D=function(e){var t=e;return Object(p.isNumber)(e.x)||(t.x=parseFloat(e.x)),Object(p.isNumber)(e.y)||(t.y=parseFloat(e.y)),t},G=function(e,t,r){var n=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],o=t&&a.a.defs(t)?new a.a.Proj(t):null,i=r&&a.a.defs(r)?new a.a.Proj(r):null;if(o&&i){var s=Object(p.isArray)(e)?a.a.toPoint(e):a.a.toPoint([e.x,e.y]),l=c()({},t===r?D(s):a.a.transform(o,i,D(s)),{srs:r});return n?k(l):l}return null},U=["EPSG:900913","EPSG:4326","EPSG:3857"],B=function(e,t,r){return"EPSG:4326"===t?e:r?e.map((function(e){return[G([e[0],e[1]],"EPSG:4326",t),G([e[2],e[3]],"EPSG:4326",t)].reduce((function(e,t){return[].concat(M(e),[t.x,t.y])}),[])})):[G([e[0],e[1]],"EPSG:4326",t),G([e[2],e[3]],"EPSG:4326",t)].reduce((function(e,t){return[].concat(M(e),[t.x,t.y])}),[])},z=function(e){return e?e.hasOwnProperty("geometry")&&"Polygon"===e.geometry.type?e:Object(v.a)(e):null},q=function(e,t){var r=function(e,t){var r="EPSG:4326"!==t?[G([parseFloat(e.minx),parseFloat(e.miny)],t,"EPSG:4326"),G([parseFloat(e.maxx),parseFloat(e.maxy)],t,"EPSG:4326")].reduce((function(e,t){return[].concat(M(e),[t.x,t.y])}),[]):[parseFloat(e.minx),parseFloat(e.miny),parseFloat(e.maxx),parseFloat(e.maxy)],n=!1;return"EPSG:4326"===t?n=Math.abs(e.maxx-e.minx)>=360:"EPSG:900913"!==t&&"EPSG:3857"!==t||(n=Math.abs(e.maxx-e.minx)>=40075016.68557849),n?[0,r[1],360,r[3]]:[(r[0]+180)%360,r[1],(r[2]+180)%360,r[3]].map((function(e,t){return t%2==0&&e<0?360+e:e}))}(e,t),n=r[2]<r[0];return n?{extent:B([[-180,r[1],r[2]-180,r[3]],[r[0]-180,r[1],180,r[3]]],t,n),isIDL:n}:{extent:B([r[0]-180,r[1],r[2]-180,r[3]],t,n),isIDL:n}},W={wgs84:4326,wgs1984:4326,crs84:4326,ogccrs84:4326,lambert93:2154,rgflambert93:2154},Z=function(e){F=c()({},F,e)},V=function(e){return new a.a.Proj(e).units||"degrees"},H=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=arguments.length>3?arguments[3]:void 0,o=t*n[0]/2,i=t*n[1]/2,a=Math.cos(r),s=Math.sin(r),l=o*a,u=o*s,c=i*a,p=i*s,f=e.x,d=e.y,m=f-l+p,y=f-l-p,h=f+l-p,g=f+l+p,b=d-u-c,v=d-u+c,S=d+u+c,O=d+u-c,w=L.createBBox(Math.min(m,y,h,g),Math.min(b,v,S,O),Math.max(m,y,h,g),Math.max(b,v,S,O));return w},K=function(e,t,r,n){return{minx:e,miny:t,maxx:r,maxy:n}},Y=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"EPSG:4326",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"EPSG:4326",n=t,o=r;"string"==typeof n&&(n=R(n)),"string"==typeof o&&(o=R(o));var i=C(n,o);return N(e,(function(e){e.crs&&delete e.crs,e.coordinates=I(e.coordinates,(function(e){var t=x(e,2),r=t[0],n=t[1];return i.forward([r,n])}))}),(function(e){var t,r;e.bbox&&(e.bbox=(t=[Number.MAX_VALUE,Number.MAX_VALUE],r=[-Number.MAX_VALUE,-Number.MAX_VALUE],N(e,(function(e){I(e.coordinates,(function(e){t[0]=Math.min(t[0],e[0]),t[1]=Math.min(t[1],e[1]),r[0]=Math.max(r[0],e[0]),r[1]=Math.max(r[1],e[1])}))})),[t[0],t[1],r[0],r[1]]))}))},X=function(e,t){var r=y()(t).features[0];return 0!==d()(e,r).features.length},J=function(e){var t=e/360%1*360;return t<-180?t+=360:t>180&&(t-=360),t},Q=function(e,t,r){var n,o=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];n=Object(p.isArray)(e)?{sw:[e[0],e[1]],ne:[e[2],e[3]]}:{sw:[e.minx,e.miny],ne:[e.maxx,e.maxy]};var i=[];for(var a in n)if(n.hasOwnProperty(a)){var s=L.reproject(n[a],t,r,o);if(!s)return null;var l=s.x,u=s.y;i.push(l),i.push(u)}return i},$=function(e){var t=Object(p.isArray)(e)?{minx:e[0],miny:e[1],maxx:e[2],maxy:e[3]}:e,r=t.minx,n=t.miny,o=t.maxx,i=t.maxy;return{type:"Polygon",coordinates:[[[r,n],[r,i],[o,i],[o,n],[r,n]]]}},ee=function(e,t){return"EPSG:900913"===e&&!t["EPSG:900913"]&&t["EPSG:3857"]?"EPSG:3857":"EPSG:3857"===e&&!t["EPSG:3857"]&&t["EPSG:900913"]?"EPSG:900913":e},te=function(e){return"EPSG:900913"===e||"EPSG:3857"===e?["EPSG:3857","EPSG:900913"]:[e]},re=function(e){return-1!==e.indexOf(":")?"EPSG:"+e.substring(e.lastIndexOf(":")+1):e},ne=function(e,t){var r="EPSG:900913"===e?"EPSG:3857":e;return t&&!t[r]?L.getCompatibleSRS(r,t):r},oe=function(e,t){return t[L.getCompatibleSRS(e,t)]},ie=function(){var e={};for(var t in a.a.defs)a.a.defs.hasOwnProperty(t)&&(e[t]={label:F[t]||t});return e},ae=function(e,t,r,n){var o=Object.keys(e).reduce((function(r,n){return c()({},-1===t.indexOf(n)?r:j(j({},r),{},_({},n,e[n])))}),{}),i=n.map((function(e){return e.code})),a=Object.keys(r).reduce((function(e,t){return c()({},-1===i.indexOf(t)?e:j(j({},e),{},_({},t,r[t])))}),{});return c()({},o,a)},se=function(e,t,r){var n=L.reproject(e,r,"EPSG:4326"),o=L.reproject(t,r,"EPSG:4326"),i=n.x*Math.PI/180,a=n.y*Math.PI/180,s=o.x*Math.PI/180,l=o.y*Math.PI/180,u=s-i,c=Math.sin(u)*Math.cos(l),p=Math.cos(a)*Math.sin(l)-Math.sin(a)*Math.cos(l)*Math.cos(u);return(180*Math.atan2(c,p)/Math.PI+360)%360},le=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"haversine";return e.length>=2&&-1!==Object.keys(T).indexOf(t)?T[t](e):0},ue=function(e,t){var r=e.slice();return t[0]<e[0]&&(r[0]=t[0]),t[2]>e[2]&&(r[2]=t[2]),t[1]<e[1]&&(r[1]=t[1]),t[3]>e[3]&&(r[3]=t[3]),r},ce=function(e){var t=this,r=[1/0,1/0,-1/0,-1/0],n=function(e,r){var n=L.getGeoJSONExtent(r);return t.isValidExtent(n)?t.extendExtent(n,e):n};if(e.coordinates){if("Point"===e.type){var o=e.coordinates;r[0]=o[0]-.01*o[0],r[1]=o[1]-.01*o[1],r[2]=o[0]+.01*o[0],r[3]=o[1]+.01*o[1]}return Object(p.chunk)(Object(p.flattenDeep)(e.coordinates),2).reduce((function(e,t){return[t[0]<e[0]?t[0]:e[0],t[1]<e[1]?t[1]:e[1],t[0]>e[2]?t[0]:e[2],t[1]>e[3]?t[1]:e[3]]}),r)}if("GeometryCollection"===e.type)return e.geometries.reduce(n,r);if(e.type){if("FeatureCollection"===e.type)return e.features.reduce(n,r);if("Feature"===e.type&&e.geometry)return L.getGeoJSONExtent(e.geometry)}return r},pe=function(e){return!(-1!==e.indexOf(1/0)||-1!==e.indexOf(-1/0)||e[0]>e[2]||e[1]>e[3])},fe=function(e,t,r,n){var o,i,a,s=Math.PI*(1/r-.5);n&&(s+=n/180*Math.PI);for(var l=[[]],u=0;u<r;u++)o=s+2*u*Math.PI/r,i=e.x+t*Math.cos(o),a=e.y+t*Math.sin(o),l[0].push([i,a]);return l[0].push(l[0][0]),l},de=function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{npoints:100,offset:10,properties:{}},r=[],n=0;n<e.length-1;++n){var o=e[n],i=e[n+1],a=b()(o),s=b()(i);if(o[0]!==i[0]||o[1]!==i[1]){var l=Object(h.a)(a,s,t);r=[].concat(M(r),M(l.geometry.coordinates))}}return r},me=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100;return e.length<=t?[Object(p.head)(e),Object(p.last)(e)]:e.length>t?[Object(p.head)(e)].concat(L.transformArcsToLine(Object(p.slice)(e,t))):[]},ye=function(e){var t=e.coordinates;switch(e.type){case"Polygon":return t.map((function(e){return e.map((function(e){return e.reverse()}))}));case"LineString":return t.map((function(e){return e.reverse()}));case"Point":return t.reverse();default:return[]}},he=function(e){return 1===e.length?e[0].geometry:{type:"GeometryCollection",geometries:e.map((function(e){return e.geometry}))}},ge=function(e,t){if(Object(p.head)(U.filter((function(e){return e===t})))){var r=q(e,t),n=r.extent,o=r.isIDL,i=(o?n:[n]).map((function(e){var t=[e[0],e[1]],r=[e[2],e[3]];return[[t,[t[0],r[1]],r,[r[0],t[1]],t]]}));if(o){var a=n[1][0]+(Math.abs(n[0][0]-n[0][2])+Math.abs(n[1][0]-n[1][2]))/2;return{type:"MultiPolygon",radius:0,projection:t,coordinates:i,extent:n,center:[a=a>180?a-360:a,(n[0][1]+n[0][3])/2]}}return{type:"Polygon",radius:0,projection:t,coordinates:i[0],extent:n,center:[(n[0]+n[2])/2,(n[1]+n[3])/2]}}var s=[e.minx,e.miny,e.maxx,e.maxy],l=[s[0],s[1]],u=[s[2],s[3]];return{type:"Polygon",radius:0,projection:t,coordinates:[[l,[l[0],u[1]],u,[u[0],l[1]],l]],extent:s,center:[(s[0]+s[2])/2,(s[1]+s[3])/2]}},be=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.bounds,r=e.crs,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"EPSG:4326";if(!t||!r)return null;var o=L.getViewportGeometry(t,r),i=o.extent;if(4===i.length)return L.reprojectBbox(i,r,n);var a=i.map((function(e){return e[2]-e[0]})),s=x(a,2),l=s[0],u=s[1];return l>u?L.reprojectBbox(i[0],r,n):L.reprojectBbox(i[1],r,n)},ve=function(e,t){var r=2===e.split(":").length?e.split(":")[1]:"3857";return l.a.get(t||A(r),null,{timeout:2e3})},Se=function(e){var t=e&&e.properties&&e.properties.name||e&&e.name||e&&e.properties&&e.properties.code||e,r=t&&Object(p.last)(t.split(":"));return"WGS 1984"===r||"WGS84"===r?"EPSG:4326":r?"EPSG:"+r:null},Oe=function(e){var t=e.split(" "),r=parseFloat(t[0]),n=parseFloat(t[1]);return!isNaN(r)&&!isNaN(n)&&{x:r,y:n}||null},we=function(e,t){var r=t||"EPSG:3857",n=e&&Object(p.isArray)(e)&&Object(p.head)(e.filter((function(e){return e&&e.$&&e.$.SRS===r&&e.$.maxx&&e.$.maxy&&e.$.minx&&e.$.miny})).map((function(e){return e&&e.$&&L.reprojectBbox([parseFloat(e.$.minx),parseFloat(e.$.miny),parseFloat(e.$.maxx),parseFloat(e.$.maxy)],r,"EPSG:4326")})));return Object(p.isArray)(n)&&{minx:n[0],miny:n[1],maxx:n[2],maxy:n[3]}||null},je=function(e){return!!a.a.defs(e)},_e=function(e){var t=e.lng,r=void 0===t?1:t,n=e.lat;return{lat:void 0===n?1:n,lng:L.normalizeLng(r)}},Me=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,o=L.getNormalizedLatLon(e),i=G([o.lng,o.lat],"EPSG:4326",t.projection);if(!t.bbox)return!1;var a=L.reprojectBbox(t.bbox.bounds,t.bbox.crs,t.projection),s=j({left:0,right:0,top:0,bottom:0},r),l={minx:a[0]+s.left*n,miny:a[1]+s.bottom*n,maxx:a[2]-s.right*n,maxy:a[3]-s.top*n},u=L.getViewportGeometry(l,t.projection),c=4===u.extent.length?[M(u.extent)]:M(u.extent);return Object(p.head)(c.map((function(e){return i.x>=e[0]&&i.y>=e[1]&&i.x<=e[2]&&i.y<=e[3]})).filter((function(e){return e})))||!1},xe=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,o=L.getNormalizedLatLon(e),i=G([o.lng,o.lat],"EPSG:4326",t.projection),a=j({left:0,right:0,top:0,bottom:0},r),s={width:(t.size.width-a.right-a.left)*n,height:(t.size.height-a.top-a.bottom)*n},l={minx:i.x-s.width/2-a.left*n,miny:i.y-s.height/2-a.bottom*n,maxx:i.x+s.width/2+a.right*n,maxy:i.y+s.height/2+a.top*n},u=L.getViewportGeometry(l,t.projection);if(4===u.extent.length)return{pos:G([u.extent[0]+t.size.width/2*n,u.extent[1]+t.size.height/2*n],t.projection,"EPSG:4326"),zoom:t.zoom,crs:"EPSG:4326"};if(Math.abs(u.extent[0][2]-u.extent[0][0])>Math.abs(u.extent[1][2]-u.extent[1][0])){var c=G([u.extent[0][2]-t.size.width/2*n,u.extent[0][3]-t.size.height/2*n],t.projection,"EPSG:4326"),p=j(j({},c),{},{x:c.x+(o.lng>c.x?360:0)});return{pos:p,zoom:t.zoom,crs:"EPSG:4326"}}return{pos:G([u.extent[1][0]+t.size.width/2*n,u.extent[1][1]+t.size.height/2*n],t.projection,"EPSG:4326"),zoom:t.zoom,crs:"EPSG:4326"}},Pe=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],n=arguments.length>3?arguments[3]:void 0,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:.01,i=Object(p.isArray)(r)?r:[r.x,r.y];if(Object(p.isNumber)(i[0])&&!isNaN(i[0])&&Object(p.isNumber)(i[1])&&!isNaN(i[1])&&Object(p.isNumber)(t.x)&&!isNaN(t.x)&&Object(p.isNumber)(t.y)&&!isNaN(t.y)){var a=Object(p.isFunction)(e)?e([t.x,t.y>=n?t.y-n:t.y+n]):null,s=a&&(Object(p.isArray)(a)?a:[a.x,a.y]);return Object(p.isArray)(s)?Math.sqrt((i[0]-s[0])*(i[0]-s[0])+(i[1]-s[1])*(i[1]-s[1])):o}return o},Ee=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.roundingBehaviour,r=void 0===t?"round":t,n=e.value,o=void 0===n?0:n,i=e.maximumFractionDigits,a=void 0===i?0:i;return 0===a&&Math[r]?Math[r](o):o},Le=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=Object(p.isArray)(e)?{x:e[0],y:e[1]}:e,o=Object(p.isArray)(t)?{x:t[0],y:t[1]}:t,i={x:.5*(n.x+o.x),y:.5*(n.y+o.y)};return r?[i.x,i.y]:i},Ce=function(e){return Object(p.isObject)(e)&&Object(p.isNumber)(e.x)&&Object(p.isNumber)(e.y)?[e.x,e.y]:e},Te=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{lat:1,lng:1},t=arguments.length>1?arguments[1]:void 0;return Object(O.a)(z(t),b()([e.lng,e.lat]))},Ie=function(e,t){return Object(S.a)(e,t)||Object(O.a)(e,t)||Object(O.a)(t,e)},Ae=function(e){if(e){var t=e.split(":");if(!("urn"!==t[0]||"ogc"!==t[1]&&"x-ogc"!==t[1]||"def"!==t[2]||"crs"!==t[3]||!t[4]&&!t[6])){var r=t[4],n=t[6];return r?"".concat(r,":").concat(n):n}}return null},Ne=function(e){if(!e||"EPSG:"!==e.slice(0,5))return null;var t=e.slice(5),r=parseInt(t,10);if(r>=1024&&r<=32767)return e;var n=t.replace(" ","").replace(":","").toLowerCase(),o=W[n];return o>=1024&&o<=32767?"EPSG:".concat(o):null},Re=function(e,t){var r=[e[0],e[1]],n=[t[0],t[1]];if(r[1]>n[1]){var o=r;r=n,n=o}if(r[0]>n[0]){var i=r.slice(),a=n.slice();r=[a[0],i[1]],n=[i[0],a[1]]}return[r[0],r[1],n[0],n[1]]};L={setCrsLabels:Z,getUnits:V,reproject:G,getProjectedBBox:H,createBBox:K,reprojectGeoJson:Y,lineIntersectPolygon:X,normalizePoint:k,normalizeLng:J,reprojectBbox:Q,getCompatibleSRS:ee,getEquivalentSRS:te,getEPSGCode:re,normalizeSRS:ne,isAllowedSRS:oe,getAvailableCRS:ie,filterCRSList:ae,calculateAzimuth:se,calculateDistance:le,FORMULAS:T,extendExtent:ue,getGeoJSONExtent:ce,isValidExtent:pe,calculateCircleCoordinates:fe,transformLineToArcs:de,transformArcsToLine:me,coordsOLtoLeaflet:ye,mergeToPolyGeom:he,getViewportGeometry:ge,getProjUrl:A,getExtentFromViewport:be,fetchProjRemotely:ve,parseURN:Se,determineCrs:R,parseString:Oe,getWMSBoundingBox:we,isSRSAllowed:je,getNormalizedLatLon:_e,isInsideVisibleArea:Me,centerToVisibleArea:xe,calculateCircleRadiusFromPixel:Pe,roundCoord:Ee,midpoint:Le,pointObjectToArray:Ce,getExtentFromNormalized:q,getPolygonFromExtent:z,isPointInsideExtent:Te,isBboxCompatible:Ie,extractCrsFromURN:Ae,crsCodeTable:W,makeNumericEPSG:Ne,makeBboxFromOWS:Re},t.default=L},"./MapStore2/web/client/utils/ElevationUtils.js":function(e,t,r){"use strict";r.r(t),r.d(t,"loadTile",(function(){return c})),r.d(t,"getElevation",(function(){return p})),r.d(t,"reset",(function(){return f}));var n=r("./MapStore2/web/client/libs/ajax.js"),o=r.n(n),i=r("./MapStore2/node_modules/lrucache/index.js"),a=r.n(i),s=r("./MapStore2/node_modules/es6-promise/dist/es6-promise.js"),l=new a.a(100),u=function(e,t,r,n){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:-9999,i=n*e+r;try{var a=t.dataView.getInt16(2*i,!1);if(a!==o&&32767!==a&&-32768!==a)return a}catch(e){}return null},c=function(e,t,r){return l.has(r)?null:new s.Promise((function(n,i){o.a.get(e,{responseType:"arraybuffer"}).then((function(e){!function(e,t,r){l.set(r,{data:e,dataView:new DataView(e),coords:t,current:!0,status:"success"})}(e.data,t,r),n()})).catch((function(e){!function(e,t,r){l.set(r,{coords:t,current:!0,status:"error: "+e})}(e.message,t,r),i(e)}))}))},p=function(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:-9999,o=l.get(e);return o&&"success"===o.status?{available:!0,value:u(r,o,t.x,t.y,n)}:o&&"loading"===o.status?{available:!1,message:"elevationLoading"}:o&&"error"===o.status?{available:!1,message:"elevationLoadingError"}:{available:!1,message:"elevationNotAvailable"}},f=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};l=new a.a(e.max||100)}},"./MapStore2/web/client/utils/FeatureInfoUtils.js":function(e,t,r){"use strict";r.d(t,"a",(function(){return n})),r.d(t,"b",(function(){return o})),r.d(t,"c",(function(){return u}));var n={TEXT:"text/plain",HTML:"text/html",JSONP:"text/javascript",PROPERTIES:"application/json",JSON:"application/json",GML2:"application/vnd.ogc.gml",GML3:"application/vnd.ogc.gml/3.1.1",TEMPLATE:"application/json"},o={"text/plain":"TEXT","text/html":"HTML","text/javascript":"JSONP","application/json":"JSON","application/vnd.ogc.gml":"GML2","application/vnd.ogc.gml/3.1.1":"GML3"},i=/^[\s\S]*<gml:featureMembers[^>]*>([\s\S]*)<\/gml:featureMembers>[\s\S]*$/i,a=/^[\s\S]*<body[^>]*>([\s\S]*)<\/body>[\s\S]*$/i;function s(e){if("string"==typeof e.response&&0!==e.response.indexOf("<?xml")){var t=e.response.match(a);return e.layerMetadata&&e.layerMetadata.regex?t&&t[1]&&t[1].match(e.layerMetadata.regex):t&&t[1]&&t[1].trim().length>0}return!1}function l(e){if("string"==typeof e.response&&-1!==e.response.indexOf("<?xml")){var t=e.response.match(i);return t&&t[1]&&t[1].trim().length>0}return!1}var u={HTML:{getValidResponses:function(e,t){return t?e.filter(s):e},getNoValidResponses:function(e){return e.filter((function(e){return!s(e)}))}},TEXT:{getValidResponses:function(e,t){var r=e.filter((function(e){var t=e.response;return""!==t&&"string"==typeof t&&0!==t.indexOf("<?xml")}));return t&&(r=r.filter((function(e){var t=e.response;return"string"==typeof t&&0!==t.indexOf("no features were found")}))),r},getNoValidResponses:function(e){return e.filter((function(e){return""===e.response||"string"==typeof e.response&&0===e.response.indexOf("no features were found")||e.response&&"string"==typeof e.response&&0===e.response.indexOf("<?xml")}))}},JSON:{getValidResponses:function(e,t){var r=e.filter((function(e){var t=e.response;return t&&t.features}));return t&&(r=r.filter((function(e){var r=e.response;return t&&r.features.length}))),r},getNoValidResponses:function(e){return e.filter((function(e){return e.response&&e.response.features&&0===e.response.features.length}))}},PROPERTIES:{getValidResponses:function(e,t){var r=e.filter((function(e){var t=e.response;return t&&t.features}));return t&&(r=r.filter((function(e){var r=e.response;return t&&r.features.length}))),r},getNoValidResponses:function(e){return e.filter((function(e){return e.response&&e.response.features&&0===e.response.features.length}))}},GML3:{getValidResponses:function(e){return e.filter(l)},getNoValidResponses:function(e){return e.filter((function(e){return!l(e)}))}},TEMPLATE:{getValidResponses:function(e){return e.filter((function(e){return e.response&&e.response.features&&e.response.features.length}))},getNoValidResponses:function(e){return e.filter((function(e){return e.response&&e.response.features&&0===e.response.features.length}))}}}},"./MapStore2/web/client/utils/FilterUtils.js":function(e,t,r){"use strict";r.r(t),r.d(t,"cqlToOgc",(function(){return v})),r.d(t,"escapeCQLStrings",(function(){return S})),r.d(t,"checkOperatorValidity",(function(){return O})),r.d(t,"isCrossLayerFilterValid",(function(){return w})),r.d(t,"setupCrossLayerFilterDefaults",(function(){return _})),r.d(t,"ogcDateField",(function(){return P})),r.d(t,"ogcListField",(function(){return E})),r.d(t,"ogcStringField",(function(){return L})),r.d(t,"ogcBooleanField",(function(){return C})),r.d(t,"ogcNumberField",(function(){return T})),r.d(t,"processOGCSimpleFilterField",(function(){return I})),r.d(t,"toOGCFilterParts",(function(){return R})),r.d(t,"toOGCFilter",(function(){return F})),r.d(t,"processOGCFilterGroup",(function(){return k})),r.d(t,"processOGCFilterFields",(function(){return D})),r.d(t,"getGmlPointElement",(function(){return G})),r.d(t,"getGmlPolygonElement",(function(){return U})),r.d(t,"getGmlLineStringElement",(function(){return B})),r.d(t,"processOGCGeometry",(function(){return z})),r.d(t,"processOGCSpatialFilter",(function(){return q})),r.d(t,"getGetFeatureBase",(function(){return W})),r.d(t,"getCrossLayerCqlFilter",(function(){return Z})),r.d(t,"processOGCCrossLayerFilter",(function(){return V})),r.d(t,"toCQLFilter",(function(){return H})),r.d(t,"processCQLFilterGroup",(function(){return K})),r.d(t,"getCQLGeometryElement",(function(){return Y})),r.d(t,"processCQLSpatialFilter",(function(){return X})),r.d(t,"cqlDateField",(function(){return J})),r.d(t,"cqlStringField",(function(){return Q})),r.d(t,"cqlBooleanField",(function(){return $})),r.d(t,"cqlNumberField",(function(){return ee})),r.d(t,"findSubGroups",(function(){return te})),r.d(t,"cqlListField",(function(){return re})),r.d(t,"processCQLFilterFields",(function(){return ne})),r.d(t,"processCQLSimpleFilterField",(function(){return oe})),r.d(t,"getOgcAllPropertyValue",(function(){return ie})),r.d(t,"getSLD",(function(){return ae})),r.d(t,"getWFSFilterData",(function(){return se})),r.d(t,"isLikeOrIlike",(function(){return le})),r.d(t,"isFilterEmpty",(function(){return ue})),r.d(t,"isFilterValid",(function(){return ce})),r.d(t,"composeAttributeFilters",(function(){return fe})),r.d(t,"reprojectFilterInNativeCrs",(function(){return de})),r.d(t,"normalizeFilterCQL",(function(){return me})),r.d(t,"mergeFiltersToOGC",(function(){return ye}));var n=r("./MapStore2/web/client/utils/ogc/GML/index.js"),o=r("./MapStore2/web/client/utils/ogc/WFS/base.js"),i=r("./MapStore2/web/client/utils/ogc/Filter/operators.js"),a=r("./MapStore2/web/client/utils/ogc/Filter/CQL/parser.js"),s=r("./MapStore2/web/client/utils/ogc/Filter/fromObject.js"),l=r.n(s),u=r("./MapStore2/web/client/utils/ogc/Filter/FilterBuilder.js"),c=r.n(u),p=r("./MapStore2/web/client/utils/CoordinatesUtils.js"),f=r("./MapStore2/node_modules/lodash/lodash.js");function d(e){return function(e){if(Array.isArray(e))return m(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return m(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return m(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function m(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function y(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function h(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?y(Object(r),!0).forEach((function(t){g(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):y(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function g(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var b,v=function(e,t){var r=c()(t);return l()(r)(Object(a.read)(e))},S=function(e){return e&&e.replace?e.replace(/\'/g,"''"):e},O=function(e,t){return!Object(f.isNil)(e)&&"isNull"!==t||!Object(f.isUndefined)(e)&&"isNull"===t},w=function(e){return Object(f.get)(e,"operation",!1)&&Object(f.get)(e,"collectGeometries.queryCollection.typeName",!1)&&Object(f.get)(e,"collectGeometries.queryCollection.geometryName",!1)},j=function(e){return'"'+e+'"'},_=function(e){if(!e||!Object(f.get)(e,"collectGeometries.queryCollection"))return null;if(Object(f.get)(e,"collectGeometries.queryCollection")){var t=(Object(f.get)(e,"collectGeometries.queryCollection.filterFields")||[]).filter((function(e){return O(e.value,e.operator)})),r=Object(f.get)(e,"collectGeometries.queryCollection.groupFields")||[{id:1,index:0,logic:"OR"}];return h(h({},e),{},{collectGeometries:h(h({},e.collectGeometries),{},{queryCollection:h(h({},e.collectGeometries.queryCollection),{},{filterFields:t,groupFields:r})})})}return null},M=function(e){return e?"1.0"===e?"1.0.0":"1.1"===e?"1.1.0":e:"2.0"},x={ogc:{startTag:"<ogc:PropertyName>",endTag:"</ogc:PropertyName>"},fes:{startTag:"<fes:ValueReference>",endTag:"</fes:ValueReference>"}},P=function(e,t,r,n){var o;if("><"===t){if(r.startDate&&r.endDate){var a=r.startDate.toISOString?r.startDate.toISOString():r.startDate,s=r.endDate.toISOString?r.endDate.toISOString():r.endDate;o=i.ogcComparisonOperators[t](n,x[n].startTag+e+x[n].endTag+"<"+n+":LowerBoundary><"+n+":Literal>"+a+"</"+n+":Literal></"+n+":LowerBoundary><"+n+":UpperBoundary><"+n+":Literal>"+s+"</"+n+":Literal></"+n+":UpperBoundary>")}}else if(r.startDate){var l=r.startDate.toISOString?r.startDate.toISOString():r.startDate;o=i.ogcComparisonOperators[t](n,x[n].startTag+e+x[n].endTag+"<"+n+":Literal>"+l+"</"+n+":Literal>")}return o},E=function(e,t,r,n){var o;return Object(f.isNil)(r)||(o=i.ogcComparisonOperators[t](n,x[n].startTag+e+x[n].endTag+"<"+n+":Literal>"+r+"</"+n+":Literal>")),o},L=function(e,t,r,n){var o;return O(r,t)&&(o="isNull"===t?i.ogcComparisonOperators[t](n,x[n].startTag+e+x[n].endTag):"="===t?i.ogcComparisonOperators[t](n,x[n].startTag+e+x[n].endTag+"<"+n+":Literal>"+r+"</"+n+":Literal>"):i.ogcComparisonOperators[t](n,x[n].startTag+e+x[n].endTag+"<"+n+":Literal>*"+r+"*</"+n+":Literal>")),o},C=function(e,t,r,n){var o="";return O(r,t)&&"="===t&&""!==r&&(o=i.ogcComparisonOperators[t](n,x[n].startTag+e+x[n].endTag+"<"+n+":Literal>"+r+"</"+n+":Literal>")),o},T=function(e,t,r,n){var o;if("><"===t)Object(f.isNil)(r)||null===r.lowBound||void 0===r.lowBound||null!==r.upBound&&void 0!==r.upBound?Object(f.isNil)(r)||null===r.upBound||void 0===r.upBound||null!==r.lowBound&&void 0!==r.lowBound?Object(f.isNil)(r)||null===r.upBound||void 0===r.upBound||null===r.lowBound||void 0===r.lowBound||(o=i.ogcComparisonOperators[t](n,x[n].startTag+e+x[n].endTag+"<"+n+":LowerBoundary><"+n+":Literal>"+r.lowBound+"</"+n+":Literal></"+n+":LowerBoundary><"+n+":UpperBoundary><"+n+":Literal>"+r.upBound+"</"+n+":Literal></"+n+":UpperBoundary>")):o=i.ogcComparisonOperators["<="](n,x[n].startTag+e+x[n].endTag+"<"+n+":Literal>"+r.upBound+"</"+n+":Literal>"):o=i.ogcComparisonOperators[">="](n,x[n].startTag+e+x[n].endTag+"<"+n+":Literal>"+r.lowBound+"</"+n+":Literal>");else{var a=Object(f.isNil)(r)||null===r.lowBound||void 0===r.lowBound?r:r.lowBound;Object(f.isNil)(a)||(o=i.ogcComparisonOperators[t](n,x[n].startTag+e+x[n].endTag+"<"+n+":Literal>"+a+"</"+n+":Literal>"))}return o},I=function(e,t){var r="";switch(e.type){case"date":r=P(e.attribute,e.operator,e.values,t);break;case"number":r=T(e.attribute,e.operator,e.values,t);break;case"string":r=L(e.attribute,e.operator,e.values,t);break;case"boolean":r=C(e.attribute,e.operator,e.values,t);break;case"list":if(e.values&&e.values.length>0){r=e.values.reduce((function(r,n){var o=null===n||"null"===n?"isNull":"=";return r+L(e.attribute,o,n,t)}),""),r=i.ogcLogicalOperators.OR(t,r)}}return r},A=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.typeName,r=e.geometryName,n=e.cqlFilter,o=void 0===n?"INCLUDE":n;return"queryCollection('".concat(t,"', '").concat(r,"','").concat(S(o),"')")},N=function(e){return"collectGeometries(".concat(e,")")},R=function(e,t,r){var n,a,s,l,u=[];if(e.filterFields&&e.filterFields.length>0)""!==(n=e.groupFields&&e.groupFields.length>0?b.processOGCFilterGroup(e.groupFields[0],e,r):b.processOGCFilterFields(null,e,r))&&u.push(n);else if(e.simpleFilterFields&&e.simpleFilterFields.length>0){var c=i.ogcLogicalOperators.AND(r,e.simpleFilterFields.map((function(e){return I(e,r)})).join(""));u.push(c)}if(Object(f.isArray)(e.spatialField)?(l=Object(f.find)(e.spatialField,(function(e){return"BBOX"===e.operation})))||(s=e.spatialField):e.spatialField&&("BBOX"===e.spatialField.operation?l=e.spatialField:s=[e.spatialField]),l){if(Object(f.isArray)(l.geometry&&l.geometry.extent[0])){var p=l.geometry.extent.reduce((function(e,n){var o=Object.assign({},l);return l.geometry.extent=n,e+b.processOGCSpatialFilter(t,o,r)}),"");a=i.ogcLogicalOperators.OR(r,p)}u.push(a)}else if(s&&(s=s.filter((function(e){return e&&e.geometry&&e.operation}))).length>0){var d=s.map((function(e){return b.processOGCSpatialFilter(t,e,r)})).join("");a=s.length>1?i.ogcLogicalOperators[e.spatialFieldOperator||"AND"](r,d):d,u.push(a)}if(e.crossLayerFilter&&e.crossLayerFilter.operation){var m=h(h({},e.crossLayerFilter),{},{attribute:e.crossLayerFilter.attribute});Array.isArray()?m.forEach((function(e){return u.push(b.processOGCCrossLayerFilter(e,r))})):u.push(b.processOGCCrossLayerFilter(m,r))}return e.options&&e.options.cqlFilter&&u.push(v(e.options.cqlFilter,{filterNS:r,wfsVersion:t,gmlVersion:Object(o.wfsToGmlVersion)(t)})),u},F=function(e,t,r){var n,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,i=arguments.length>4&&void 0!==arguments[4]&&arguments[4],a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,l=arguments.length>7&&void 0!==arguments[7]?arguments[7]:"EPSG:4326";try{n=t instanceof Object?t:JSON.parse(t)}catch(e){return e}var u=M(r||"2.0"),c="2.0"===u?"fes":"ogc",p=b.getGetFeatureBase(u,n.pagination,i,a,t&&t.options),f=b.toOGCFilterParts(n,u,c),d="";return f.length>0&&(d="<"+c+":Filter>",1===f.length?d+=f[0]:(d+="<"+c+":And>",f.forEach((function(e){d+=e})),d+="</"+c+":And>"),d+="</"+c+":Filter>"),p+="<wfs:Query ".concat("2.0"===u?"typeNames":"typeName",'="').concat(e,'" ').concat("native"!==l&&'srsName="'.concat(l,'"')||"",">"),p+=d,s&&(p+=s.map((function(e){return x[c].startTag+e+x[c].endTag})).join("")),o&&o.sortBy&&o.sortOrder&&(p+="<"+c+":SortBy><"+c+":SortProperty>"+x[c].startTag+o.sortBy+x[c].endTag+"<"+c+":SortOrder>"+o.sortOrder+"</"+c+":SortOrder></"+c+":SortProperty></"+c+":SortBy>"),p+="</wfs:Query></wfs:GetFeature>"},k=function(e,t,r){var n=b.processOGCFilterFields(e,t,r),o=b.findSubGroups(e,t.groupFields);return o.length>0&&o.forEach((function(e){n+=b.processOGCFilterGroup(e,t,r)})),""!==n?i.ogcLogicalOperators[e.logic](r,n):""},D=function(e,t,r){var n=e?t.filterFields.filter((function(t){return t.groupId===e.id&&O(t.value,t.operator)})):t.filterFields.filter((function(e){return O(e.value,e.operator)}));return n.length?n.reduce((function(e,t){var n;switch(t.type){case"date":case"date-time":case"time":n=P(t.attribute,t.operator,t.value,r);break;case"number":n=T(t.attribute,t.operator,t.value,r);break;case"string":n=L(t.attribute,t.operator,t.value,r);break;case"boolean":n=C(t.attribute,t.operator,t.value,r);break;case"list":n=E(t.attribute,t.operator,t.value,r)}return"isNull"===t.operator&&(n=L(t.attribute,t.operator,t.operator,r)),n&&e.push(n),e}),[]).join(""):""},G=function(e,t,r){return Object(n.pointElement)(e,t,Object(o.wfsToGmlVersion)(r))},U=function(e,t,r){return Object(n.polygonElement)(e,t,Object(o.wfsToGmlVersion)(r))},B=function(e,t,r){return Object(n.lineStringElement)(e,t,Object(o.wfsToGmlVersion)(r))},z=function(e,t){return Object(n.processOGCGeometry)(Object(o.wfsToGmlVersion)(e),t)},q=function(e,t,r){if(t.collectGeometries)return b.processOGCCrossLayerFilter(t);var a=x[r].startTag+t.attribute+x[r].endTag;switch(t.operation){case"INTERSECTS":case"DWITHIN":case"WITHIN":case"CONTAINS":a+=Object(n.processOGCGeometry)(Object(o.wfsToGmlVersion)(e),t.geometry),"DWITHIN"===t.operation&&(a+="<"+r+':Distance units="m">'+(t.geometry.distance||0)+"</"+r+":Distance>");break;case"BBOX":var s=t.geometry.extent[0]+" "+t.geometry.extent[1],l=t.geometry.extent[2]+" "+t.geometry.extent[3];a+='<gml:Envelope srsName="'+t.geometry.projection+'"><gml:lowerCorner>'+s+"</gml:lowerCorner><gml:upperCorner>"+l+"</gml:upperCorner></gml:Envelope>"}return i.ogcSpatialOperators[t.operation](r,a)},W=function(e,t,r,n){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},i=M(e),a="<wfs:GetFeature ";switch(a+=n?'outputFormat="'+n+'" ':"",a+=t&&(t.startIndex||0===t.startIndex)?'startIndex="'+t.startIndex+'" ':"",a+=o.viewParams?' viewParams="'.concat(o.viewParams,'" '):"",i){case"1.0.0":a+=t&&t.maxFeatures?'maxFeatures="'+t.maxFeatures+'" ':"",a=r?a+' resultType="hits"':a,a+='service="WFS" version="'+i+'" outputFormat="GML2" xmlns:gml="http://www.opengis.net/gml" xmlns:wfs="http://www.opengis.net/wfs" xmlns:ogc="http://www.opengis.net/ogc" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" '+(o.noSchemaLocation?"":'xsi:schemaLocation="http://www.opengis.net/wfs http://schemas.opengis.net/wfs/1.0.0/WFS-basic.xsd"')+">";break;case"1.1.0":a+=t&&t.maxFeatures?'maxFeatures="'+t.maxFeatures+'" ':"",a=r?a+' resultType="hits"':a,a+='service="WFS" version="'+i+'" xmlns:gml="http://www.opengis.net/gml" xmlns:wfs="http://www.opengis.net/wfs" xmlns:ogc="http://www.opengis.net/ogc" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" '+(o.noSchemaLocation?"":'xsi:schemaLocation="http://www.opengis.net/wfs http://schemas.opengis.net/wfs/1.1.0/wfs.xsd"')+">";break;default:a+=t&&t.maxFeatures?'count="'+t.maxFeatures+'" ':"",a=r&&!t?a+' resultType="hits"':a,a+='service="WFS" version="'+i+'" xmlns:wfs="http://www.opengis.net/wfs/2.0" xmlns:fes="http://www.opengis.net/fes/2.0" xmlns:gml="http://www.opengis.net/gml/3.2" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" '+(o.noSchemaLocation?"":'xsi:schemaLocation="http://www.opengis.net/wfs/2.0 http://schemas.opengis.net/wfs/2.0/wfs.xsd http://www.opengis.net/gml/3.2 http://schemas.opengis.net/gml/3.2.1/gml.xsd"')+">"}return a},Z=function(e){return Object(f.get)(e,"collectGeometries.queryCollection.cqlFilter")||(Object(f.get)(e,"collectGeometries.queryCollection.filterFields")||[]).length>0&&(Object(f.get)(e,"collectGeometries.queryCollection.groupFields")||[]).length>0&&b.toCQLFilter(e.collectGeometries.queryCollection)||"INCLUDE"},V=function(e,t){var r=t||"ogc",n=x[r].startTag+e.attribute+x[r].endTag;if(e.collectGeometries){var o=b.getCrossLayerCqlFilter(e);n+='<ogc:Function name="collectGeometries"><ogc:Function name="queryCollection">'+"<ogc:Literal>".concat(e.collectGeometries.queryCollection.typeName,"</ogc:Literal>")+"<ogc:Literal>".concat(e.collectGeometries.queryCollection.geometryName,"</ogc:Literal>")+"<ogc:Literal><![CDATA[".concat(o,"]]></ogc:Literal>")+"</ogc:Function></ogc:Function>"}return"DWITHIN"===e.operation&&(n+="<"+r+':Distance units="m">'+(e.distance||0)+"</"+r+":Distance>"),i.ogcSpatialOperators[e.operation](r,n)},H=function(e){var t;try{t=e instanceof Object?e:JSON.parse(e)}catch(e){return e}var r,n,o=[];if(t.filterFields&&t.filterFields.length>0)(r=b.processCQLFilterGroup(t.groupFields[0],t))&&o.push(r);else if(t.simpleFilterFields&&t.simpleFilterFields.length>0){var i=t.simpleFilterFields.reduce((function(e,t){var r=e,n=b.processCQLSimpleFilterField(t);return!1!==n&&(r=e.length>0?e+" AND ("+n+")":"("+n+")"),r}),"");i=i.length>0?i:"INCLUDE",o.push(i)}if(t.spatialField&&(n=b.processCQLSpatialFilter(t))&&o.push(n),t.crossLayerFilter){var a=t.crossLayerFilter,s=a.operation,l=a.attribute,u=a.collectGeometries&&a.collectGeometries.queryCollection;if(s&&l&&u){var c=u.typeName,p=u.geometryName,f=b.getCrossLayerCqlFilter(a),d=N(A({typeName:c,geometryName:p,cqlFilter:f}));o.push("".concat(s,"(").concat(l,",").concat(d,")"))}}return o.length?"("+(o.length>1?o.join(") AND ("):o[0])+")":null},K=function(e,t){var r="NOR"===e.logic?h(h({},e),{},{logic:"AND",negateAll:!0}):e,n=b.processCQLFilterFields(r,t),o=b.findSubGroups(r,t.groupFields);if(o.length>0){var i=o.map((function(e){return(r.negateAll?"NOT (":"(")+b.processCQLFilterGroup(e,t)+")"})).join(" "+r.logic+" ");return n?[n,i].join(" "+r.logic+" "):i}return n},Y=function(e,t){var r=t+"(";switch(t){case"Point":r+=e.join(" ");break;case"MultiPoint":e.forEach((function(t,n){r+=t.join(" "),r+=n<e.length-1?", ":""}));break;case"Polygon":e.forEach((function(t,o){r+="(";var i=Object(n.closePolygon)(t).map((function(e){return e[0]+" "+e[1]}));r+=i.join(", "),r+=")",r+=o<e.length-1?", ":""}));break;case"MultiPolygon":e.forEach((function(t,o){r+="(",t.forEach((function(e,o){r+="(";var i=Object(n.closePolygon)(e).map((function(e){return e[0]+" "+e[1]}));r+=i.join(", "),r+=")",r+=o<t.length-1?", ":""})),r+=")",r+=o<e.length-1?", ":""}))}return r+=")"},X=function(e){var t=(Object(f.isArray)(e.spatialField)?e.spatialField:[e.spatialField]).filter((function(e){return e&&e.geometry&&e.operation})),r="";return t.forEach((function(n,o){if(r+=n.operation+'("'+n.attribute+'",',n.collectGeometries&&n.collectGeometries.queryCollection)r+=N(A(n.collectGeometries.queryCollection));else{var i=n.geometry.projection||"";i=2===i.split(":").length?"SRID="+i.split(":")[1]+";":"",r+=i+b.getCQLGeometryElement(n.geometry.coordinates,n.geometry.type)}r+=")",o<t.length-1&&(r+=" ".concat(e.spatialFieldOperator||"AND"," "))})),r},J=function(e,t,r){var n;"><"===t?r.startDate&&r.endDate&&(n="("+e+">='"+(r.startDate.toISOString?r.startDate.toISOString():r.startDate)+"' AND "+e+"<='"+(r.endDate.toISOString?r.endDate.toISOString():r.endDate)+"')"):r.startDate&&(n=e+t+"'"+(r.startDate.toISOString?r.startDate.toISOString():r.startDate)+"'");return n},Q=function(e,t,r){var n,o=j(e);if(!Object(f.isNil)(r))if("isNull"===t)n="isNull("+o+")=true";else if("="===t){n=o+t+("'"+S(r)+"'")}else if("ilike"===t){n="strToLowerCase("+o+") LIKE "+("'%"+S(r).toLowerCase()+"%'")}else{n=o+" LIKE "+("'%"+S(r)+"%'")}return n},$=function(e,t,r){var n="";Object(f.isNil)(r)||""===r||"="===t&&(n='"'+e+'"'+t+("'"+r+"'"));return n},ee=function(e,t,r){var n,o=j(e);if("><"===t)Object(f.isNil)(r)||null===r.lowBound||void 0===r.lowBound||null!==r.upBound&&void 0!==r.upBound?Object(f.isNil)(r)||null===r.upBound||void 0===r.upBound||null!==r.lowBound&&void 0!==r.lowBound?Object(f.isNil)(r)||null===r.upBound||void 0===r.upBound||null===r.lowBound||void 0===r.lowBound||(n="("+o+">='"+r.lowBound+"' AND "+o+"<='"+r.upBound+"')"):n="("+o+"<='"+r.upBound+"')":n="("+o+">='"+r.lowBound+"')";else{var i=Object(f.isNil)(r)||null===r.lowBound||void 0===r.lowBound?r:r.lowBound;Object(f.isNil)(i)||(n=o+" "+t+" '"+i+"'")}return n},te=function(e,t){return t.filter((function(t){return t.groupId===e.id}))},re=function(e,t,r){return b.cqlStringField(e,t,r)},ne=function(e,t){var r=t.filterFields.filter((function(t){return t.groupId===e.id})),n=[];return r&&(r.forEach((function(t){var r;switch(t.type){case"date":case"time":case"date-time":r=b.cqlDateField(t.attribute,t.operator,t.value);break;case"number":r=b.cqlNumberField(t.attribute,t.operator,t.value);break;case"string":r=b.cqlStringField(t.attribute,t.operator,t.value);break;case"boolean":r=b.cqlBooleanField(t.attribute,t.operator,t.value);break;case"list":r=b.cqlListField(t.attribute,t.operator,t.value)}r&&n.push(e.negateAll?"NOT ("+r+")":r)})),n=n.join(" "+e.logic+" ")),n},oe=function(e){var t=!1;switch(e.type){case"date":t=b.cqlDateField(e.attribute,e.operator,e.values);break;case"number":t=b.cqlNumberField(e.attribute,e.operator,e.values);break;case"string":t=b.cqlStringField(e.attribute,e.operator,e.values);break;case"boolean":t=b.cqlBooleanField(e.attribute,e.operator,e.values);break;case"list":if(e.values.length!==e.optionsValues.length){var r=!1,n=e.values.reduce((function(e,t){return null===t||"null"===t?r=!0:e.push("'"+t+"'"),e}),[]);t=n.length>0?e.attribute+" IN("+n.join(",")+")":t,r&&(t=t?t+" OR isNull("+e.attribute+")=true":"isNull("+e.attribute+")=true")}}return!!(t&&t.length>0)&&t},ie=function(e,t){return'<wfs:GetPropertyValue service="WFS" valueReference=\''.concat(t,'\'\n                version="2.0" xmlns:fes="http://www.opengis.net/fes/2.0"\n                xmlns:gml="http://www.opengis.net/gml/3.2"\n                xmlns:wfs="http://www.opengis.net/wfs/2.0"\n                xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"\n                xsi:schemaLocation="http://www.opengis.net/wfs/2.0 http://schemas.opengis.net/wfs/2.0/wfs.xsd http://www.opengis.net/gml/3.2 http://schemas.opengis.net/gml/3.2.1/gml.xsd">\n                    <wfs:Query typeNames="').concat(e,'"/>\n            </wfs:GetPropertyValue>')},ae=function(e,t,r){var n=b.toOGCFilter(e,t,r),o=n.search("<".concat(b.nsplaceholder,":Filter>"));if(-1!==o){var i=n.search("</wfs:Query>");n=n.substr(o,i-o)}else n="";return'<StyledLayerDescriptor version="1.0.0"\n            xsi:schemaLocation="http://www.opengis.net/sld StyledLayerDescriptor.xsd" xmlns:ogc="http://www.opengis.net/ogc" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:gml="http://www.opengis.net/gml" xmlns:gsml="urn:cgi:xmlns:CGI:GeoSciML:2.0" xmlns:sld="http://www.opengis.net/sld" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><NamedLayer><Name>'.concat(e,"</Name><UserStyle><FeatureTypeStyle><Rule >").concat(n,'<PointSymbolizer><Graphic><Mark><WellKnownName>circle</WellKnownName><Fill><CssParameter name="fill">#0000FF</CssParameter></Fill></Mark><Size>20</Size></Graphic></PointSymbolizer></Rule></FeatureTypeStyle></UserStyle></NamedLayer></StyledLayerDescriptor>')},se=function(e,t){return"string"==typeof e?e:"OGC"===e.filterType?b.toOGCFilter(e.featureTypeName,h(h({},e),{},{options:t}),e.ogcVersion,e.sortOptions,e.hits):b.toCQLFilter(e)},le=function(e){return"ilike"===e||"like"===e},ue=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.filterFields,r=void 0===t?[]:t,n=e.spatialField,o=void 0===n?{}:n,i=e.crossLayerFilter,a=void 0===i?{}:i;return!(r.filter((function(e){return e.value||0===e.value})).length>0||o.geometry||a&&a.attribute&&a.operation)},ce=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e.filterFields&&e.filterFields.length>0||e.simpleFilterFields&&e.simpleFilterFields.length>0||e.spatialField&&e.spatialField.geometry&&e.spatialField.operation||Object(f.isArray)(e.spatialField)&&Object(f.findIndex)(e.spatialField,(function(e){return e.operation&&e.geometry}))>-1||e.crossLayerFilter&&e.crossLayerFilter.collectGeometries&&e.crossLayerFilter.collectGeometries.queryCollection&&e.crossLayerFilter.collectGeometries.queryCollection.geometryName&&e.crossLayerFilter.collectGeometries.queryCollection.typeName},pe=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return Object(f.flatten)(t.filter((function(e){return!!e})))},fe=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"AND",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"AND",n={id:(new Date).getTime(),index:0,logic:t};return e.reduce((function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=t.filterFields,i=void 0===o?[]:o,a=t.groupFields,s=void 0===a?[]:a,l=t.spatialField,u=arguments.length>2?arguments[2]:void 0;return{groupFields:e.groupFields.concat(i.length>0&&s.map((function(e){return{groupId:0===e.index&&n.id||"".concat(e.groupId,"_").concat(u),logic:e.logic,id:"".concat(e.id,"_").concat(u),index:1+e.index}}))||[]),filterFields:e.filterFields.concat(i.map((function(e){return h(h({},e),{},{groupId:"".concat(e.groupId,"_").concat(u)})}))),spatialField:pe(e.spatialField,l),spatialFieldOperator:r}}),{groupFields:[n],filterFields:[],spatialField:[]})},de=function(e,t){var r,n=e.spatialField.geometry.projection,o=e.spatialField.geometry.center,i=e.spatialField.geometry.radius,a=Object(p.reprojectGeoJson)(e.spatialField.geometry,e.spatialField.geometry.projection||"EPSG:3857",t).coordinates,s=o&&[(r=Object(p.reproject)(o,n,t)).x,r.y],l=i&&Object(p.reproject)([i,0],n,t).x;return h(h({},e),{},{spatialField:h(h({},e.spatialField),{},{geometry:h(h({},e.spatialField.geometry),{},{center:s,radius:l,coordinates:a,projection:t})})})},me=function(e,t){return e&&e.spatialField&&e.spatialField.geometry&&e.spatialField.geometry.coordinates&&e.spatialField.geometry.coordinates[0]&&(e.spatialField.projection||"EPSG:3857")!==t?t?b.reprojectFilterInNativeCrs(e,t):h(h({},e),{},{spatialField:void 0}):e},ye=function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.nsPlaceholder,r=void 0===t?"ogc":t,n=e.ogcVersion,i=void 0===n?"2.0":n,s=e.addXmlnsToRoot,u=void 0!==s&&s,p=e.xmlnsToAdd,m=void 0===p?[]:p,y=c()({filterNS:r,wfsVersion:i,gmlVersion:Object(o.wfsToGmlVersion)(i)}),h=l()(y),g=arguments.length,b=new Array(g>1?g-1:0),v=1;v<g;v++)b[v-1]=arguments[v];var S=y.filter(y.and.apply(y,d(Object(f.flatten)(b.filter((function(e){return!!e&&(Object(f.isString)(e)||ce(e)&&!e.disabled)})).map((function(e){return Object(f.isString)(e)?[h(Object(a.read)(e))]:R(e,i,r)}))))));if(u){var O=S.indexOf(">");return"".concat(S.slice(0,O)).concat(m.length>0?" ".concat(m.join(" ")):"").concat(S.slice(O))}return S};b={processOGCFilterGroup:k,processOGCFilterFields:D,processOGCCrossLayerFilter:V,getGetFeatureBase:W,toOGCFilterParts:R,findSubGroups:te,toCQLFilter:H,getCrossLayerCqlFilter:Z,processCQLFilterGroup:K,processCQLSimpleFilterField:oe,processCQLSpatialFilter:X,processCQLFilterFields:ne,getCQLGeometryElement:Y,cqlStringField:Q,cqlDateField:J,cqlNumberField:ee,cqlBooleanField:$,cqlListField:re,toOGCFilter:F,reprojectFilterInNativeCrs:de,processOGCSpatialFilter:q,mergeFiltersToOGC:ye}},"./MapStore2/web/client/utils/IdentifyUtils.js":function(e,t,r){"use strict";r.d(t,"a",(function(){return i})),r.d(t,"b",(function(){return a}));var n=r("./MapStore2/node_modules/lodash/lodash.js"),o=r("./MapStore2/web/client/utils/FeatureInfoUtils.js"),i=function(e,t){var r=e.format,n=e.queryParams,i=void 0===n?{}:n;return i.info_format||i.outputFormat||r&&o.a[r]||t.format},a=function(e){return!!Object(n.get)(e,"layer.search.url")}},"./MapStore2/web/client/utils/ImmutableUtils.js":function(e,t,r){"use strict";r.d(t,"e",(function(){return c})),r.d(t,"f",(function(){return p})),r.d(t,"d",(function(){return f})),r.d(t,"c",(function(){return d})),r.d(t,"b",(function(){return m})),r.d(t,"a",(function(){return y}));var n=r("./MapStore2/node_modules/lodash/lodash.js"),o=r("./MapStore2/node_modules/lodash/fp/set.js"),i=r.n(o),a=r("./MapStore2/node_modules/lodash/fp/unset.js"),s=r.n(a),l=r("./MapStore2/node_modules/lodash/fp/compose.js"),u=r.n(l),c=i.a,p=s.a,f=u.a,d=function(e,t,r,o){var i=e?Object(n.get)(o,e)||[]:o,a=Object(n.findIndex)(i,r);if(a>=0){var s=i.slice();return s.splice(a,1,t),e?c(e,s,o):s}return e?c(e,i.concat(t),o):i.concat(t)},m=function(e,t,r,o){var i=e?Object(n.get)(o,e)||[]:o,a=Object(n.findIndex)(i,r);if(a>=0){var s=i.slice();return s.splice(a,1,t),e?c(e,s,o):s}return o},y=function(e,t,r){var o=e?Object(n.get)(r,e)||[]:r,i=Object(n.findIndex)(o,t);if(i>=0){var a=o.slice();return a.splice(i,1),e?c(e,a,r):a()}return r}},"./MapStore2/web/client/utils/LayerLocalizationUtils.js":function(e,t,r){"use strict";r.r(t),r.d(t,"generateEnvString",(function(){return n}));var n=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return e.length?e.map((function(e){var t=e.name,r=e.value;return"".concat(t,":").concat(r)})).join(";"):""}},"./MapStore2/web/client/utils/MapInfoUtils.js":function(e,t,r){"use strict";r.d(t,"d",(function(){return x})),r.d(t,"e",(function(){return P})),r.d(t,"f",(function(){return E})),r.d(t,"h",(function(){return L})),r.d(t,"a",(function(){return C})),r.d(t,"g",(function(){return T})),r.d(t,"i",(function(){return I})),r.d(t,"k",(function(){return A})),r.d(t,"b",(function(){return N})),r.d(t,"j",(function(){return F})),r.d(t,"c",(function(){return k}));var n,o=r("./MapStore2/web/client/utils/FeatureInfoUtils.js"),i=r("./MapStore2/node_modules/turf-point-on-surface/index.js"),a=r.n(i),s=r("./MapStore2/node_modules/lodash/lodash.js"),l=r("./MapStore2/web/client/components/map/openlayers/img/marker-icon.png"),u=r.n(l),c=r("./MapStore2/web/client/components/data/identify/viewers/JSONViewer.jsx"),p=r("./MapStore2/web/client/components/data/identify/viewers/HTMLViewer.jsx"),f=r("./MapStore2/web/client/components/data/identify/viewers/TextViewer.jsx"),d=r("./MapStore2/web/client/utils/mapinfo/wfs.js"),m=r.n(d),y=r("./MapStore2/web/client/utils/mapinfo/wms.js"),h=r.n(y),g=r("./MapStore2/web/client/utils/mapinfo/wmts.js"),b=r.n(g),v=r("./MapStore2/web/client/utils/mapinfo/vector.js"),S=r.n(v);function O(e){return function(e){if(Array.isArray(e))return w(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return w(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return w(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function w(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function j(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function _(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?j(Object(r),!0).forEach((function(t){M(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):j(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function M(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var x=function(){return Object.keys(o.a).filter((function(e){return-1!==n.AVAILABLE_FORMAT.indexOf(e)})).reduce((function(e,t){return e[t]=o.a[t],e}),{})},P=function(){return Object.keys(n.getAvailableInfoFormat()).map((function(e){return o.a[e]}))},E=function(){return o.a[n.AVAILABLE_FORMAT[0]]},L=function(e,t,r,o,i){return _({type:"vector",visibility:!0,name:e||"GetFeatureInfo",styleName:r||"marker",label:i,features:n.clickedPointToGeoJson(t)},o)},C=function(e,t){if(n.services[e.type]){var r=n.getDefaultInfoFormatValueFromLayer(e,t),o=n.getLayerFeatureInfoViewer(e),i=n.getLayerFeatureInfo(e);return n.services[e.type].buildRequest(e,t,r,o,i)}return{}},T=function(e,t,r){return n.services[e.type]&&n.services[e.type].getIdentifyFlow?n.services[e.type].getIdentifyFlow(e,t,r):null},I=function(e){var t={getValidResponses:function(e){return e},getNoValidResponses:function(){return[]}};return{getValidResponses:function(r){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return r.reduce((function(r,i){if(i){var a;i.queryParams&&i.queryParams.hasOwnProperty("info_format")&&(a=i.queryParams.info_format),i.queryParams&&i.queryParams.hasOwnProperty("outputFormat")&&(a=i.queryParams.outputFormat);var s=(o.c[i.format||o.b[a]||o.b[e]]||t).getValidResponses([i],n);return[].concat(O(r),O(s))}return O(r)}),[])},getNoValidResponses:function(r){return r.reduce((function(r,n){if(n){var i;n.queryParams&&n.queryParams.hasOwnProperty("info_format")&&(i=n.queryParams.info_format),n.queryParams&&n.queryParams.hasOwnProperty("outputFormat")&&(i=n.queryParams.outputFormat);var a=(o.c[n.format||o.b[i]||o.b[e]]||t).getNoValidResponses([n]);return[].concat(O(r),O(a))}return O(r)}),[])}}},A=function(){var e;return M(e={},o.a.PROPERTIES,c.a),M(e,o.a.JSON,c.a),M(e,o.a.HTML,p.a),M(e,o.a.TEXT,f.a),e},N=function(e){var t;return e.visibility&&n.services[e.type]&&(void 0===e.queryable||e.queryable)&&"background"!==e.group&&"HIDDEN"!==(null==e||null===(t=e.featureInfo)||void 0===t?void 0:t.format)},R={wfs:m.a,wms:h.a,wmts:b.a,vector:S.a},F=function(e){return n.VIEWERS[e]?n.VIEWERS[e]:null},k=function(e,t,r){var n=t||[],o=r||[];return Object.keys(e).reduce((function(t,r){if("params"!==r&&-1!==n.indexOf(r))t[r]=e[r];else if("params"===r&&o.length>0){var i=e[r];Object.keys(i).forEach((function(e){-1===Object(s.findIndex)(o,(function(t){return t===e}))&&(t[e]=i[e])}),{})}return t}),{})};n={AVAILABLE_FORMAT:["TEXT","PROPERTIES","HTML","TEMPLATE"],getAvailableInfoFormatLabels:function(){return Object.keys(n.getAvailableInfoFormat())},getAvailableInfoFormat:x,getDefaultInfoFormatValue:E,clickedPointToGeoJson:function(e){if(!e)return[];if("Feature"===e.type){var t=[a()(e)];return e&&e.geometry&&"Point"!==e.geometry.type&&t.push(e),t}return void 0===e.lng||void 0===e.lat?e.features||[]:[].concat(O(e.features||[]),[{id:"get-feature-info-point",type:"Feature",geometry:{type:"Point",coordinates:[parseFloat(e.lng),parseFloat(e.lat)]},style:[{iconUrl:u.a,iconAnchor:[12,41],iconSize:[25,41]}]}])},services:R,getDefaultInfoFormatValueFromLayer:function(e,t){return e.featureInfo&&e.featureInfo.format&&o.a[e.featureInfo.format]||t.format||n.getDefaultInfoFormatValue()},getLayerFeatureInfoViewer:function(e){return e.featureInfo&&e.featureInfo.viewer?e.featureInfo.viewer:{}},getLayerFeatureInfo:function(e){return e&&e.featureInfo&&_({},e.featureInfo)||{}},VIEWERS:{}}},"./MapStore2/web/client/utils/MapUtils.js":function(e,t,r){"use strict";r.r(t),r.d(t,"DEFAULT_SCREEN_DPI",(function(){return b})),r.d(t,"METERS_PER_UNIT",(function(){return v})),r.d(t,"GOOGLE_MERCATOR",(function(){return S})),r.d(t,"EXTENT_TO_ZOOM_HOOK",(function(){return O})),r.d(t,"ZOOM_TO_EXTENT_HOOK",(function(){return w})),r.d(t,"RESOLUTIONS_HOOK",(function(){return j})),r.d(t,"RESOLUTION_HOOK",(function(){return _})),r.d(t,"COMPUTE_BBOX_HOOK",(function(){return M})),r.d(t,"GET_PIXEL_FROM_COORDINATES_HOOK",(function(){return x})),r.d(t,"GET_COORDINATES_FROM_PIXEL_HOOK",(function(){return P})),r.d(t,"registerHook",(function(){return L})),r.d(t,"getHook",(function(){return C})),r.d(t,"executeHook",(function(){return T})),r.d(t,"clearHooks",(function(){return I})),r.d(t,"dpi2dpm",(function(){return A})),r.d(t,"dpi2dpu",(function(){return N})),r.d(t,"getSphericalMercatorScale",(function(){return R})),r.d(t,"getGoogleMercatorScale",(function(){return F})),r.d(t,"getSphericalMercatorScales",(function(){return k})),r.d(t,"getGoogleMercatorScales",(function(){return D})),r.d(t,"getResolutionsForScales",(function(){return G})),r.d(t,"getGoogleMercatorResolutions",(function(){return U})),r.d(t,"getResolutions",(function(){return B})),r.d(t,"getScales",(function(){return z})),r.d(t,"defaultGetZoomForExtent",(function(){return q})),r.d(t,"getZoomForExtent",(function(){return W})),r.d(t,"getCurrentResolution",(function(){return Z})),r.d(t,"getCenterForExtent",(function(){return V})),r.d(t,"getBbox",(function(){return H})),r.d(t,"isNearlyEqual",(function(){return K})),r.d(t,"mapUpdated",(function(){return Y})),r.d(t,"transformExtent",(function(){return X})),r.d(t,"groupSaveFormatted",(function(){return J})),r.d(t,"saveMapConfiguration",(function(){return Q})),r.d(t,"generateNewUUIDs",(function(){return $})),r.d(t,"mergeMapConfigs",(function(){return ee})),r.d(t,"addRootParentGroup",(function(){return te})),r.d(t,"isSimpleGeomType",(function(){return re})),r.d(t,"getSimpleGeomType",(function(){return ne})),r.d(t,"getIdFromUri",(function(){return oe})),r.d(t,"parseLayoutValue",(function(){return ie})),r.d(t,"prepareMapObjectToCompare",(function(){return ae})),r.d(t,"updateObjectFieldKey",(function(){return se})),r.d(t,"compareMapChanges",(function(){return le})),r.d(t,"createRegisterHooks",(function(){return ue}));var n=r("./MapStore2/node_modules/lodash/lodash.js"),o=r("./MapStore2/node_modules/uuid/v1.js"),i=r.n(o),a=r("./MapStore2/web/client/utils/CoordinatesUtils.js"),s=r("./MapStore2/web/client/utils/ImmutableUtils.js"),l=r("./MapStore2/web/client/utils/LayersUtils.js"),u=r("./MapStore2/node_modules/object-assign/index.js"),c=r.n(u);function p(e){return(p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function f(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}function d(e){return function(e){if(Array.isArray(e))return m(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return m(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return m(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function m(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function y(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function h(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?y(Object(r),!0).forEach((function(t){g(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):y(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function g(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var b=96,v={m:1,degrees:111194.87428468118,ft:.3048,"us-ft":1200/3937},S={RADIUS:6378137,TILE_WIDTH:256,ZOOM_FACTOR:2},O="EXTENT_TO_ZOOM_HOOK",w="ZOOM_TO_EXTENT_HOOK",j="RESOLUTIONS_HOOK",_="RESOLUTION_HOOK",M="COMPUTE_BBOX_HOOK",x="GET_PIXEL_FROM_COORDINATES_HOOK",P="GET_COORDINATES_FROM_PIXEL_HOOK",E={};function L(e,t){E[e]=t}function C(e){return E[e]}function T(e,t,r){var n=C(e);return n?t(n):r?r():null}function I(){E={}}function A(e){return e*(100/2.54)}function N(e,t){var r=Object(a.getUnits)(t||"EPSG:3857");return v[r]*A(e||b)}function R(e,t,r,n,o){return 2*Math.PI*e/(t*Math.pow(r,n)/A(o||b))}function F(e,t){return R(S.RADIUS,S.TILE_WIDTH,S.ZOOM_FACTOR,e,t)}function k(e,t,r,n,o,i){for(var a=[],s=n;s<=o;s++)a.push(R(e,t,r,s,i));return a}function D(e,t,r){return k(S.RADIUS,S.TILE_WIDTH,S.ZOOM_FACTOR,e,t,r)}function G(e,t,r){var n=N(r,t);return e.map((function(e){return e/n}))}function U(e,t,r){return G(D(e,t,r),"EPSG:3857",r)}function B(){return C("RESOLUTIONS_HOOK")?C("RESOLUTIONS_HOOK")():U(0,21,b)}function z(e,t){var r=N(t,e);return B().map((function(e){return e*r}))}function q(e,t,r,n,o,i){var a=e[2]-e[0],s=e[3]-e[1],l=Math.abs(a/t.width),u=Math.abs(s/t.height),c=Math.max(l,u),p=(i||G(D(r,n,o||b),"EPSG:3857",o)).reduce((function(e,t,r){var n=Math.abs(t-c);return n>e.diff?e:{diff:n,zoom:r}}),{diff:Number.POSITIVE_INFINITY,zoom:0}).zoom;return Math.max(0,Math.min(p,n))}function W(e,t,r,n,o){return C("EXTENT_TO_ZOOM_HOOK")?C("EXTENT_TO_ZOOM_HOOK")(e,t,r,n,o):q(e,t,r,n,o,C("RESOLUTIONS_HOOK")?C("RESOLUTIONS_HOOK")(e,t,r,n,o,A(o||b)):null)}function Z(e,t,r,n){return C("RESOLUTION_HOOK")?C("RESOLUTION_HOOK")(e,t,r,n):U(t,r,n)[e]}function V(e,t){var r=(e[2]-e[0])/2,n=(e[3]-e[1])/2;return{x:e[0]+r,y:e[1]+n,crs:t}}function H(e,t){return T("COMPUTE_BBOX_HOOK",(function(r){return r(e,t)}))}var K=function(e,t){return void 0!==e&&void 0!==t&&e.toFixed(12)-t.toFixed(12)==0};function Y(e,t){var r,o,i,a;return!(!e||Object(n.isEmpty)(e)||!t||Object(n.isEmpty)(t))&&(!(K(null==t||null===(r=t.center)||void 0===r?void 0:r.x,null==e||null===(o=e.center)||void 0===o?void 0:o.x)&&K(null==t||null===(i=t.center)||void 0===i?void 0:i.y,null==e||null===(a=e.center)||void 0===a?void 0:a.y))||(null==t?void 0:t.zoom)!==(null==e?void 0:e.zoom))}function X(e,t,r,n){var o=Object(a.getUnits)(e);return"ft"===o?{width:r/v.ft,height:n/v.ft}:"us-ft"===o?{width:r/v["us-ft"],height:n/v["us-ft"]}:"degrees"===o?{width:r/(111132.92-559.82*Math.cos(2*t.y)+1.175*Math.cos(4*t.y)),height:n/(111412.84*Math.cos(t.y)-93.5*Math.cos(3*t.y))}:{width:r,height:n}}var J=function(e){return{id:e.id,title:e.title,description:e.description,tooltipOptions:e.tooltipOptions,tooltipPlacement:e.tooltipPlacement,expanded:e.expanded}};function Q(e,t,r,o,i,a,u){var p={center:e.center,maxExtent:e.maxExtent,projection:e.projection,units:e.units,mapInfoControl:e.mapInfoControl,zoom:e.zoom,mapOptions:e.mapOptions||{}},f=t.map((function(e){return Object(l.saveLayer)(e)})),d=r.reduce((function(e,t){return e.concat(Object(l.getGroupNodes)(t))}),[].concat(r.map((function(e){return e.id})))).map((function(e){var t=Object(l.getNode)(r,e);return t&&t.nodes?J(t):null})).filter((function(e){return e})),m=o.filter((function(e){return!!e.thumbnail})),y=Object(l.extractSourcesFromLayers)(f),g=f.map((function(e){return c()({},e,{tileMatrixSet:e.tileMatrixSet&&e.tileMatrixSet.length>0,matrixIds:e.matrixIds&&Object.keys(e.matrixIds)})})),b=Object(n.findIndex)(g,(function(e){return"annotations"===e.id}));if(-1!==b){var v=g[b].features.map((function(e){return"FeatureCollection"===e.type?h(h({},e),{},{features:e.features.map((function(e){return e.properties.geometryGeodesic?Object(s.e)("properties.geometryGeodesic",null,e):e}))}):e.properties.geometryGeodesic?Object(s.e)("properties.geometryGeodesic",null,e):{}}));g[b]=Object(s.e)("features",v,g[b])}return h({version:2,map:c()({},p,{layers:g,groups:d,backgrounds:m,text_search_config:i,bookmark_search_config:a},!Object(n.isEmpty)(y)&&{sources:y}||{})},u)}var $=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Object(n.cloneDeep)(e),r=h(h({},Object(n.get)(e,"map.layers",[]).reduce((function(e,t){return h(h({},e),{},g({},t.id,"annotations"===t.id?t.id:i()()))}),{})),Object(n.get)(e,"widgetsConfig.widgets",[]).reduce((function(e,t){return h(h({},e),{},g({},t.id,i()()))}),{}));return Object(s.e)("map.backgrounds",Object(n.get)(e,"map.backgrounds",[]).map((function(e){return h(h({},e),{},{id:r[e.id]})})),Object(s.e)("widgetsConfig",{collapsed:Object(n.mapValues)(Object(n.mapKeys)(Object(n.get)(e,"widgetsConfig.collapsed",{}),(function(e,t){return r[t]})),(function(e){return h(h({},e),{},{layouts:Object(n.mapValues)(e.layouts,(function(e){return h(h({},e),{},{i:r[e.i]})}))})})),layouts:Object(n.mapValues)(Object(n.get)(e,"widgetsConfig.layouts",{}),(function(e){return e.map((function(e){return h(h({},e),{},{i:r[e.i]})}))})),widgets:Object(n.get)(e,"widgetsConfig.widgets",[]).map((function(e){return h(h({},e),{},{id:r[e.id],layer:h(h({},Object(n.get)(e,"layer",{})),{},{id:r[Object(n.get)(e,"layer.id")]})})}))},Object(s.e)("map.layers",Object(n.get)(e,"map.layers",[]).map((function(e){return h(h({},e),{},{id:r[e.id]})})),t)))},ee=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return e.map((function(e){return Object(n.pick)(e,Object(n.keys)(e).filter((function(t){return void 0!==e[t]})))}))},o=$(t),i=[].concat(d(Object(n.get)(e,"map.backgrounds",[])),d(Object(n.get)(o,"map.backgrounds",[]))),a=r(Object(n.get)(e,"map.layers",[])),s=r(Object(n.get)(o,"map.layers",[])),l=Object(n.find)(a,(function(e){return"annotations"===e.id})),u=Object(n.find)(s,(function(e){return"annotations"===e.id})),c=[].concat(d(s.filter((function(e){return"annotations"!==e.id}))),d(a.filter((function(e){return"annotations"!==e.id}))),d(l||u?[h(h(h({},l||{}),u||{}),{},{features:[].concat(d(Object(n.get)(l,"features",[])),d(Object(n.get)(u,"features",[])))})]:[])),p=c.filter((function(e){return"background"===e.group})),f=Object(n.findIndex)(p,(function(e){return e.visibility})),m=Object(n.get)(e,"map.sources",{}),y=Object(n.get)(o,"map.sources",{}),b=h(h({},m),y),v=Object(n.get)(e,"widgetsConfig",{}),S=Object(n.get)(o,"widgetsConfig",{});return h(h(h({},o),e),{},{catalogServices:h(h({},Object(n.get)(e,"catalogServices",{})),{},{services:h(h({},Object(n.get)(e,"catalogServices.services",{})),Object(n.get)(o,"catalogServices.services",{}))}),map:h(h(h({},o.map),e.map),{},{backgrounds:i,groups:Object(n.uniqWith)([].concat(d(Object(n.get)(e,"map.groups",[])),d(Object(n.get)(o,"map.groups",[]))),(function(e,t){return e.id===t.id})),layers:[].concat(d(p.slice(0,f+1)),d(p.slice(f+1).map((function(e){return h(h({},e),{},{visibility:!1})}))),d(c.filter((function(e){return"background"!==e.group})))),sources:Object(n.isEmpty)(b)?void 0:b}),widgetsConfig:{collapsed:h(h({},v.collapsed),S.collapsed),layouts:Object(n.uniq)([].concat(d(Object(n.keys)(v.layouts)),d(Object(n.keys)(S.layouts)))).reduce((function(e,t){return h(h({},e),{},g({},t,[].concat(d(Object(n.get)(v,"layouts.".concat(t),[])),d(Object(n.get)(S,"layouts.".concat(t),[])))))}),{}),widgets:[].concat(d(Object(n.get)(v,"widgets",[])),d(Object(n.get)(S,"widgets",[])))},timelineData:h(h({},Object(n.get)(e,"timelineData",{})),Object(n.get)(o,"timelineData",{})),dimensionData:h(h({},Object(n.get)(e,"dimensionData",{})),Object(n.get)(o,"dimensionData",{}))})},te=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"RootGroup",r=Object(n.get)(e,"map.groups",[]),o=r.filter((function(e){return"Default"!==e.id})),a=Object(n.find)(r,(function(e){return"Default"===e.id})),s=a&&{id:i()(),title:t,expanded:a.expanded},l=a?[].concat(d(o.map((function(e){var t=e.id,r=f(e,["id"]);return h({id:"".concat(s.id,".").concat(t)},r)}))),[s]):o;return h(h({},e),{},{map:h(h({},e.map),{},{groups:l,layers:Object(n.get)(e,"map.layers",[]).map((function(e){var t,r=e.group;return h(h({},f(e,["group"])),{},{group:!a||"background"===r||"Default"!==r&&r?a&&(null===(t=Object(n.find)(l,(function(e){var t=e.id;return t.slice(t.indexOf(".")+1)===r})))||void 0===t?void 0:t.id)||r:s.id})}))})})};function re(e){switch(e){case"MultiPoint":case"MultiLineString":case"MultiPolygon":case"GeometryCollection":case"Text":return!1;case"Point":case"Circle":case"LineString":case"Polygon":default:return!0}}function ne(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Point";switch(e){case"Point":case"LineString":case"Polygon":case"Circle":return e;case"MultiPoint":case"Marker":return"Point";case"MultiLineString":return"LineString";case"MultiPolygon":return"Polygon";case"GeometryCollection":return"GeometryCollection";case"Text":return"Point";default:return e}}var oe=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:/data\/(\d+)/,r=decodeURIComponent(e),n=t.exec(r);return n&&n.length&&n.length>1?n[1]:null},ie=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return Object(n.isString)(e)&&-1!==e.indexOf("%")?parseFloat(Object(n.trim)(e))*t/100:Object(n.isNumber)(e)?e:0},ae=function e(t){var r=["apiKey","time","args","fixed"],n=function(e){return r.reduce((function(t,r){return t||e===r}),!1)};Object.keys(t).forEach((function(r){var o=t[r],i=p(o);"object"!==i||null===o||n(r)?"undefined"!==i&&o&&!n(r)||delete t[r]:(e(o),Object.keys(o).length||delete t[r])}))},se=function(e,t,r){e[t]&&(Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(e,t)),delete e[t])},le=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=["map.layers","map.backgrounds","map.text_search_config","map.bookmark_search_config","map.text_serch_config","map.zoom","widgetsConfig"],o=Object(n.pick)(Object(n.cloneDeep)(e),r),i=Object(n.pick)(Object(n.cloneDeep)(t),r);return se(o.map,"text_serch_config","text_search_config"),se(i.map,"text_serch_config","text_search_config"),ae(o),ae(i),Object(n.isEqual)(o,i)},ue=function(){var e={};return{registerHook:function(t,r){e[t]=r},getHook:function(t){return e[t]},executeHook:function(t,r,n){var o=e[t];return o?r(o):n?n():null}}};t.default={createRegisterHooks:ue,EXTENT_TO_ZOOM_HOOK:O,RESOLUTIONS_HOOK:j,RESOLUTION_HOOK:_,COMPUTE_BBOX_HOOK:M,GET_PIXEL_FROM_COORDINATES_HOOK:x,GET_COORDINATES_FROM_PIXEL_HOOK:P,DEFAULT_SCREEN_DPI:b,ZOOM_TO_EXTENT_HOOK:w,registerHook:L,getHook:C,dpi2dpm:A,getSphericalMercatorScales:k,getSphericalMercatorScale:R,getGoogleMercatorScales:D,getGoogleMercatorResolutions:U,getGoogleMercatorScale:F,getResolutionsForScales:G,getZoomForExtent:W,defaultGetZoomForExtent:q,getCenterForExtent:V,getResolutions:B,getScales:z,getBbox:H,mapUpdated:Y,getCurrentResolution:Z,transformExtent:X,saveMapConfiguration:Q,generateNewUUIDs:$,mergeMapConfigs:ee,addRootParentGroup:te,isSimpleGeomType:re,getSimpleGeomType:ne,getIdFromUri:oe,parseLayoutValue:ie,prepareMapObjectToCompare:ae,updateObjectFieldKey:se,compareMapChanges:le,clearHooks:I}},"./MapStore2/web/client/utils/MeasureUtils.js":function(e,t,r){"use strict";r.r(t),r.d(t,"degToDms",(function(){return o})),r.d(t,"getFormattedBearingValue",(function(){return i})),r.d(t,"CONVERSION_RATE",(function(){return a})),r.d(t,"convertUom",(function(){return s})),r.d(t,"validateCoord",(function(){return l})),r.d(t,"validateFeatureCoordinates",(function(){return u})),r.d(t,"isValidGeometry",(function(){return c}));var n=r("./MapStore2/node_modules/lodash/lodash.js");function o(e){var t=Math.floor(e),r=60*(e-t),n=Math.floor(r),o=60*(r-n);return t+"° "+n+"' "+Math.floor(o)+"'' "}function i(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.measureTrueBearing,n=void 0!==r&&r,i=t.fractionDigits,a=void 0===i?0:i,s="";if(n){var l="";e>=0&&e<10?l="00":e>10&&e<100&&(l="0");var u=a>0?e.toFixed(a):Math.floor(e);s=l+u+"° T"}else e>=0&&e<90?s="N "+o(e)+"E":e>90&&e<=180?s="S "+o(180-e)+"E":e>180&&e<270?s="S "+o(e-180)+"W":e>=270&&e<=360&&(s="N "+o(360-e)+"W");return s}var a={yd:{ft:3,m:.9144,km:9144e-7,yd:1,mi:.00056818181818,nm:.00049373650107},ft:{ft:1,m:.3048,km:3048e-7,yd:.33333333333334,mi:.0001893932,nm:164579e-9},m:{ft:3.28084,m:1,km:.001,yd:1.0936132983377,mi:621371e-9,nm:.000539956803},km:{ft:3280.84,m:1e3,km:1,yd:1093.6132983377,mi:.62137121212121,nm:.5399568207343395},mi:{ft:5280.000168959982,m:1609.3440514990027,km:1.6093440514990027,yd:1760,mi:1,nm:.8689762697078849},nm:{ft:6076.115679999979,m:1852.0000592639938,km:1.8520000592639938,yd:2025.3718285214,mi:1.150779484848481,nm:1},sqft:{sqft:1,sqm:.09290304,sqkm:9.2903043596611e-8,sqmi:3.587e-8,sqnm:2.7051601137505e-8},sqyd:{sqft:8.9999247491639,sqm:.83612040133779,sqkm:8.3612040133779e-7,sqyd:1,sqmi:3.228278917579e-7,sqnm:2.4346237458194e-7},sqm:{sqft:10.76391,sqm:1,sqkm:1e-6,sqyd:1.196,sqmi:3.8610215854245e-7,sqnm:2.91181e-7},sqkm:{sqft:10763910,sqm:1e6,sqkm:1,sqyd:1196e3,sqmi:.38610215854245,sqnm:.291181},sqmi:{sqft:27878398.920726,sqm:2589988.110336,sqkm:2.589988110336,sqyd:27878398.920726,sqmi:1,sqnm:.75415532795574},sqnm:{sqft:36966388.603652,sqm:3434290.0120544,sqkm:3.4342900120544,sqyd:36966388.603652,sqmi:1.325986786715,sqnm:1}};function s(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"m",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"m";return a[t]&&a[t][r]?e*a[t][r]:e}var l=function(e){return!Object(n.isNaN)(parseFloat(e[0]))&&!Object(n.isNaN)(parseFloat(e[1]))},u=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.coordinates,r=e.type,o=t;if("LineString"===r){if((o=t.filter(l)).length<2)return[]}else if("Polygon"===r){if((o=Object(n.head)(t).filter(l)).length<3)return[[]];o=[o.concat([Object(n.head)(o)])]}return o},c=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.coordinates,r=e.type;if(!r||!t||t&&Object(n.isArray)(t)&&0===t.length)return!1;var o=u({coordinates:t,type:r});return(o="Polygon"===r?Object(n.head)(o):o).length>0}},"./MapStore2/web/client/utils/PopupUtils.js":function(e,t,r){"use strict";r.d(t,"b",(function(){return i})),r.d(t,"c",(function(){return a})),r.d(t,"a",(function(){return s}));var n=r("./MapStore2/node_modules/uuid/index.js"),o=r.n(n),i=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:o()(),t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"ms-map-popup",r=document.createElement("div");return r.setAttribute("id",e+"-map-popup"),r.setAttribute("class",t),r},a=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return e.startsWith("<")},s=function(e,t){if(!t)return e;if(t instanceof Node){var r=document.createDocumentFragment();r.appendChild(t),e.appendChild(r)}else a(t)?e.innerHTML=t:e.append(document.createTextNode(String(t)));return e}},"./MapStore2/web/client/utils/StringUtils.js":function(e,t,r){"use strict";r.d(t,"a",(function(){return n})),r.d(t,"b",(function(){return o}));var n=function(e){return new RegExp("<(.|\\n)*?>","g").test(e)},o=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:/[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?/;return t.test(e)}},"./MapStore2/web/client/utils/TemplateUtils.js":function(e,t,r){"use strict";r.r(t),r.d(t,"validateStringAttribute",(function(){return i})),r.d(t,"getCleanTemplate",(function(){return a})),r.d(t,"parseCustomTemplate",(function(){return s})),r.d(t,"generateTemplateString",(function(){return l})),r.d(t,"parseTemplate",(function(){return u}));var n,o=r("./MapStore2/node_modules/lodash/lodash.js"),i=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=Object(o.isString)(t)&&Object(o.trim)(t.substring(r,t.length-n))||"";return Object(o.has)(e,i)},a=function(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:function(){return""},l=Object(o.isString)(e)&&e.match(r),u=l&&l.map((function(e){var r=e.replace(/(<([^>]+)>)/gi,"");return{previous:e,next:i(t,r,n,a)?r:s(e)}}))||null;return u&&u.reduce((function(e,t){return e.replace(t.previous,t.next)}),e)||e||""},s=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(e){return"".concat(Object(o.trim)(e.substring(2,e.length-1))," Not Available")};return Object(o.template)(a(e||"",t,/\$\{.*?\}/g,2,1,r))(t)},l=(n={},function(e,t){var r=n[e];return r&&!t||(r=function(r){var n=e.replace(/\$\{([\s]*[^;\s\{]+[\s]*)\}/g,(function(e,n){return(t||function(e){return e})(n.trim().split(".").reduce((function(e,t){return e&&e[t]}),r))}));return Object(o.isString)(n)&&n||""},t||(n[e]=r)),r}),u=function(e,t){r.e(31).then(function(){var n=r("./MapStore2/node_modules/babel-standalone/babel.js"),o="function"==typeof e?e():e;try{var i=n.transform(o,{presets:["es2015","react","stage-0"]}).code;t(i)}catch(e){t(null,e)}}.bind(null,r)).catch(r.oe)},c={generateTemplateString:l,parseTemplate:u,validateStringAttribute:i,getCleanTemplate:a,parseCustomTemplate:s};t.default=c},"./MapStore2/web/client/utils/TileConfigProvider.js":function(e,t,r){"use strict";r.r(t),r.d(t,"getLayerConfig",(function(){return u}));var n=r("./MapStore2/node_modules/lodash/lodash.js"),o=r("./MapStore2/web/client/utils/ConfigProvider.js"),i=r("./MapStore2/web/client/utils/ConfigUtils.js");function a(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function s(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?a(Object(r),!0).forEach((function(t){l(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):a(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function l(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var u=function(e,t){var r,a,l,u,c=o.a;if("custom"===e)r=t;else if(l=(u=e.split("."))[0],a=u[1],!(r=c[l]))throw new Error("No such provider ("+l+")");var p={url:r.url,options:r.options||{}};if(a&&"variants"in r){if(!(a in r.variants))throw new Error("No such variant of "+(l||r.url)+" ("+a+")");var f,d=r.variants[a];f="string"==typeof d?{variant:d}:d.options,p={url:d.url||p.url,options:s(s({},p.options||{}),f)}}else"function"==typeof p.url&&(p.url=p.url(u.splice(1,u.length-1).join(".")));var m="file:"===window.location.protocol||p.options.forceHTTP;0===p.url.indexOf("//")&&m&&(p.url="http:"+p.url),p.options.retina&&(t.detectRetina&&i.default.getBrowserProperties().retina?t.detectRetina=!1:p.options.retina="");p.options.attribution&&(p.options.attribution=function e(t){return-1===t.indexOf("{attribution.")?t:t.replace(/\{attribution.(\w*)\}/,(function(t,r){return e(c[r].options.attribution)}))}(p.options.attribution));var y=s(s({},p.options),Object(n.pickBy)(t,(function(e){return void 0!==e})));return[p.url,y]};t.default={getLayerConfig:u}},"./MapStore2/web/client/utils/VectorStyleUtils.js":function(e,t,r){"use strict";r.r(t),r.d(t,"isAttrPresent",(function(){return h})),r.d(t,"isStrokeStyle",(function(){return g})),r.d(t,"isFillStyle",(function(){return b})),r.d(t,"isTextStyle",(function(){return v})),r.d(t,"isCircleStyle",(function(){return S})),r.d(t,"isMarkerStyle",(function(){return O})),r.d(t,"isSymbolStyle",(function(){return w})),r.d(t,"getStylerTitle",(function(){return j})),r.d(t,"geometryFunctions",(function(){return _})),r.d(t,"getGeometryFunction",(function(){return M})),r.d(t,"registerGeometryFunctions",(function(){return x})),r.d(t,"addOpacityToColor",(function(){return P})),r.d(t,"hashCode",(function(){return E})),r.d(t,"registerStyle",(function(){return C})),r.d(t,"setSymbolsStyles",(function(){return T})),r.d(t,"fetchStyle",(function(){return I})),r.d(t,"getSymbolsStyles",(function(){return A})),r.d(t,"hashAndStringify",(function(){return N})),r.d(t,"domNodeToString",(function(){return R})),r.d(t,"createSvgUrl",(function(){return F})),r.d(t,"createStylesAsync",(function(){return k})),r.d(t,"getStyleParser",(function(){return D}));var n=r("./MapStore2/node_modules/lodash/lodash.js"),o=r("./MapStore2/web/client/utils/ImmutableUtils.js"),i=r("./MapStore2/web/client/utils/ColorUtils.js"),a=r("./MapStore2/node_modules/axios/index.js"),s=r.n(a),l=r("./MapStore2/node_modules/geostyler-sld-parser/build/dist/SldStyleParser.js"),u=r.n(l),c=r("./MapStore2/node_modules/geostyler-geocss-parser/build/dist/GeoCSSStyleParser.js"),p=r.n(c);function f(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function d(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?f(Object(r),!0).forEach((function(t){m(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):f(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function m(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var y={sld:new u.a,css:new p.a},h=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;return t.filter((function(t){return!Object(n.isNil)(e[t])})).length>0},g=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:["color","opacity","dashArray","dashOffset","lineCap","lineJoin","weight"];return h(e,t)},b=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:["fillColor","fillOpacity"];return h(e,t)},v=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:["label","font","fontFamily","fontSize","fontStyle","fontWeight","textAlign","textRotationDeg"];return h(e,t)},S=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:["radius"];return h(e,t)},O=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:["iconGlyph","iconShape","iconUrl"];return h(e,t)},w=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:["symbolUrl"];return h(e,t)},j=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return O(e)?"Marker":w(e)?"Symbol":v(e)?"Text":S(e)||"Circle Style"===e.title?"Circle":b(e)?"Polygon":g(e)?"Polyline":""},_={centerPoint:{type:"Point",func:function(){}},lineToArc:{type:"LineString",func:function(){}},startPoint:{type:"Point",func:function(){}},endPoint:{type:"Point",func:function(){}}},M=function(e,t){return _[e]&&_[e][t]},x=function(e,t,r){if(!(e&&t&&r))throw new Error("specify all the params: functionName, func, type");_[e]={func:t,type:r}},P=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"#FFCC33",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.2;return Object(o.e)("a",t,e)},E=function(e){var t,r=0;if(0===e.length)return r;for(t=0;t<e.length;t++)r=(r<<5)-r+e.charCodeAt(t),r|=0;return r},L={},C=function(e,t){if(!e||!t)throw new Error("specify all the params: sha, style");L[e]=t},T=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};L=e},I=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"style";return L[e]&&L[e][t]},A=function(){return L},N=function(e){if(e)return E(JSON.stringify(e));throw new Error("hashAndStringify: specify mandatory params: style")},R=function(e){var t=document.createElement("div");return t.appendChild(e),t.innerHTML},F=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;return w(e)&&e.symbolUrl?s.a.get(t,{"Content-Type":"image/svg+xml;charset=utf-8"}).then((function(t){var r=window.URL||window.webkitURL||window,o=(new DOMParser).parseFromString(t.data,"image/svg+xml").firstElementChild;o.setAttribute("fill",e.fillColor||"#FFCC33"),o.setAttribute("fill-opacity",Object(n.isNil)(e.fillOpacity)?.2:e.fillOpacity),o.setAttribute("stroke",Object(i.b)(e.color||"#FFCC33",Object(n.isNil)(e.opacity)?1:e.opacity)),o.setAttribute("stroke-opacity",Object(n.isNil)(e.opacity)?1:e.opacity),o.setAttribute("stroke-width",e.weight||1),o.setAttribute("width",e.size||32),o.setAttribute("height",e.size||32),o.setAttribute("stroke-dasharray",e.dashArray||"none");var a=new Blob([R(o)],{type:"image/svg+xml;charset=utf-8"}),s=r.createObjectURL(a),l=document.createElement("canvas");l.width=e.size,l.height=e.size;var u=l.getContext("2d"),c=new Image;c.src=s;var p="",f=N(e);return c.onload=function(){try{u.drawImage(c,l.width/2-c.width/2,l.height/2-c.height/2),p=l.toDataURL("image/png"),l=null,C(f,{style:d(d({},e),{},{symbolUrlCustomized:s}),base64:p})}catch(e){return}},C(f,{style:d(d({},e),{},{symbolUrlCustomized:s}),svg:o,base64:p}),s})).catch((function(){return r("./MapStore2/web/client/product/assets/symbols/symbolMissing.svg")})):new Promise((function(e){e(null)}))},k=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return e.map((function(e){return w(e)&&!I(N(e))?F(e,e.symbolUrl||e.symbolUrlCustomized).then((function(t){return t?d(d({},e),{},{symbolUrlCustomized:t}):I(N(e))})).catch((function(){return d(d({},e),{},{symbolUrlCustomized:r("./MapStore2/web/client/product/assets/symbols/symbolMissing.svg")})})):new Promise((function(t){t(w(e)?I(N(e)):e)}))}))},D=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"sld";return y[e]}},"./MapStore2/web/client/utils/VectorTileUtils.js":function(e,t,r){"use strict";r.r(t),r.d(t,"VECTOR_FORMATS",(function(){return n})),r.d(t,"isVectorFormat",(function(){return o}));var n=["application/vnd.mapbox-vector-tile","application/json;type=geojson","application/json;type=topojson"],o=function(e){return-1!==n.indexOf(e)}},"./MapStore2/web/client/utils/VendorParamsUtils.js":function(e,t,r){"use strict";r.r(t),r.d(t,"optionsToVendorParams",(function(){return s}));var n=r("./MapStore2/web/client/utils/FilterUtils.js");r("./MapStore2/web/client/utils/ConfigUtils.js");function o(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function i(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?o(Object(r),!0).forEach((function(t){a(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function a(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var s=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,o=t.layerFilter,a=t.filterObj,s=[Object(n.isFilterValid)(o)&&!o.disabled&&Object(n.toCQLFilter)(o),Object(n.isFilterValid)(a)&&Object(n.toCQLFilter)(a),t&&t.params&&t.params.CQL_FILTER,r];return(e=(s=s.filter((function(e){return!!e}))).length>1?s.map((function(e){return"(".concat(e,")")})).join(" AND "):s.pop())?i(i({},t.params),{},{CQL_FILTER:e}):t.params}},"./MapStore2/web/client/utils/WFSLayerUtils.js":function(e,t,r){"use strict";r.r(t),r.d(t,"needsReload",(function(){return c})),r.d(t,"toDescribeURL",(function(){return p})),r.d(t,"extractGeometryType",(function(){return f})),r.d(t,"extractGeometryAttributeName",(function(){return d}));var n=r("./MapStore2/web/client/utils/VendorParamsUtils.js"),o=r("./node_modules/url/url.js"),i=r.n(o),a=r("./MapStore2/node_modules/lodash/lodash.js");function s(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function l(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?s(Object(r),!0).forEach((function(t){u(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):s(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function u(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var c=function(e,t){var r=l(l({},Object(n.optionsToVendorParams)(e)||{}),{},{_v_:e._v_}),o=l(l({},Object(n.optionsToVendorParams)(t)||{}),{},{_v_:t._v_});return["_v_","CQL_FILTER","VIEWPARAMS"].reduce((function(e,t){return r[t]!==o[t]||e}),!1)},p=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.name,r=e.search,n=void 0===r?{}:r,o=e.url,a=e.describeFeatureTypeURL,s=i.a.parse(a||n.url||o,!0);return i.a.format(l(l({},s),{},{search:void 0,query:l(l({},s.query),{},{service:"WFS",version:"1.1.0",typeName:t,outputFormat:"application/json",request:"DescribeFeatureType"})}))},f=function(e){var t=Object(a.get)(e,"featureTypes[0].properties")||[];return t&&Object(a.head)(t.filter((function(e){return 0===e.type.indexOf("gml:")})).map((function(e){return e.type.split(":")[1]})))},d=function(e){var t=Object(a.get)(e,"featureTypes[0].properties")||[];return t&&Object(a.head)(t.filter((function(e){return 0===e.type.indexOf("gml:")})).map((function(e){return e.name})))}},"./MapStore2/web/client/utils/WMTSUtils.js":function(e,t,r){"use strict";r.r(t),r.d(t,"getDefaultMatrixId",(function(){return u})),r.d(t,"getMatrixIds",(function(){return c})),r.d(t,"limitMatrix",(function(){return p})),r.d(t,"getTileMatrixSet",(function(){return f})),r.d(t,"getRequestEncoding",(function(){return d})),r.d(t,"getOperations",(function(){return m})),r.d(t,"getOperation",(function(){return y})),r.d(t,"getGetTileURL",(function(){return h})),r.d(t,"getCapabilitiesURL",(function(){return g})),r.d(t,"getDefaultStyleIdentifier",(function(){return b})),r.d(t,"getDefaultFormat",(function(){return v})),r.d(t,"sortTileMatrix",(function(){return S})),r.d(t,"getTileMatrix",(function(){return O}));var n,o=r("./MapStore2/web/client/utils/CoordinatesUtils.js"),i=r("./MapStore2/node_modules/lodash/lodash.js");function a(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function s(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?a(Object(r),!0).forEach((function(t){l(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):a(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function l(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var u=function(e){for(var t=new Array(30),r=0;r<30;++r)t[r]=e.tileMatrixPrefix+r;return t},c=function(e,t){return Object(i.isObject)(e)&&Object(i.isArray)(e[t])&&e[t]||Object(i.isArray)(e)&&e||[]},p=function(e,t){return e.length>t?Object(i.slice)(e,0,t):e.length<t?e.concat(new Array(t-e.length)):e},f=function(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:t;return e&&Object(i.isString)(e)?e:e?Object(o.getEquivalentSRS)(t,r).reduce((function(t,r){if(Object(i.isArray)(e)){var a=Object(i.head)(e.filter((function(e){return(e["ows:Identifier"]===r||Object(o.getEPSGCode)(e["ows:SupportedCRS"])===r)&&n[e["ows:Identifier"]]})));return a&&a["ows:Identifier"]?a["ows:Identifier"]:t}return Object(i.isObject)(e)&&e[r]||t}),a):a},d=function(e){var t=n.getOperations(e);return n.getOperation(t,"GetTile","KVP")?"KVP":n.getOperation(t,"GetTile","RESTful")&&"RESTful"},m=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(i.castArray)(e.Capabilities["ows:OperationsMetadata"]["ows:Operation"])},y=function(e,t,r){return Object(i.head)(Object(i.castArray)(Object(i.head)(e.filter((function(e){return e.$.name===t})).map((function(e){return Object(i.castArray)(e["ows:DCP"]["ows:HTTP"]["ows:Get"])})))||[]).filter((function(e){return(e["ows:Constraint"]&&e["ows:Constraint"]["ows:AllowedValues"]["ows:Value"])===r})).map((function(e){return e.$["xlink:href"]})))},h=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.ResourceURL,r=e.GetTileURL,n=e.requestEncoding;return"KVP"===n?r:t&&Object(i.castArray)(t).map((function(e){var t=e.$,r=void 0===t?{}:t;return r.template||r.value}))||r},g=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(i.head)(Object(i.castArray)(e.capabilitiesURL||e.GetTileURL))},b=function(e){return Object(i.head)(Object(i.castArray)(e.Style).filter((function(e){var t=e.$;return"true"===(void 0===t?{}:t).isDefault})).map((function(e){return e["ows:Identifier"]})))},v=function(e){return Object(i.head)(Object(i.castArray)(e.Format))},S=function(e,t){return e?s(s({},e),{},{TileMatrix:Object(i.sortBy)(null==e?void 0:e.TileMatrix.map((function(e){return s(s({},e),{},{ScaleDenominator:Number(e.ScaleDenominator)})})),"ScaleDenominator").reverse().filter((function(e){return!t||t.map((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.identifier;return t})).indexOf(e["ows:Identifier"])>=0}))}):e},O=function(e,t){var r,n,o=f(e.tileMatrixSet,t,e.allowedSRS,e.matrixIds),a=e.matrixIds&&c(e.matrixIds,o||t),s=S(Object(i.head)(e.tileMatrixSet.filter((function(e){return e["ows:Identifier"]===o}))),a),l=null==s||null===(r=(n=s.TileMatrix).map)||void 0===r?void 0:r.call(n,(function(e){return e["ows:Identifier"]}));return{matrixIds:l&&a?a.sort((function(e,t){return l.indexOf(e.identifier)-l.indexOf(t.identifier)})):a,tileMatrixSetName:o,tileMatrixSet:s}};n={getOperations:m,getOperation:y}},"./MapStore2/web/client/utils/leaflet/DrawSupportUtils.js":function(e,t,r){"use strict";r.r(t),r.d(t,"boundsToOLExtent",(function(){return n})),r.d(t,"fromLeafletFeatureToQueryform",(function(){return o}));var n=function(e){return[e.getWest(),e.getSouth(),e.getEast(),e.getNorth()]},o=function(e){var t=e.toGeoJSON(),r=e.getBounds(),o=n(r),i=r.getCenter(),a=e.getRadius?e.getRadius():0,s=t.features[0].geometry.coordinates;return{type:t.features[0].geometry.type,extent:o,center:i,coordinates:s,radius:a,projection:"EPSG:4326"}}},"./MapStore2/web/client/utils/leaflet/Icons.js":function(e,t,r){var n=r("./MapStore2/web/client/libs/leaflet.js"),o=r("./MapStore2/node_modules/lodash/lodash.js").isFunction;r("./MapStore2/node_modules/leaflet-extra-markers/src/assets/js/leaflet.extra-markers.js"),r("./MapStore2/node_modules/leaflet-extra-markers/dist/css/leaflet.extra-markers.min.css"),e.exports={extra:{getIcon:function(e){var t=e.iconPrefix||"fa";return n.ExtraMarkers.icon({icon:t+"-"+e.iconGlyph,markerColor:e.iconColor||"blue",shape:e.iconShape||"square",prefix:t,extraClasses:e.highlight?"marker-selected":""})}},standard:{getIcon:function(e){return n.icon({iconUrl:e.iconUrl||e.symbolUrlCustomized||e.symbolUrl,shadowUrl:e.shadowUrl,iconSize:e.iconSize,shadowSize:e.shadowSize,iconAnchor:e.iconAnchor,shadowAnchor:e.shadowAnchor,popupAnchor:e.popupAnchor})}},html:{getIcon:function(e,t){return n.divIcon(o(e.html)?e.html(t):e.html)}}}},"./MapStore2/web/client/utils/leaflet/Vector.js":function(e,t,r){function n(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function o(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?n(Object(r),!0).forEach((function(t){i(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):n(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function i(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var a=r("./MapStore2/web/client/libs/leaflet.js"),s=r("./MapStore2/web/client/utils/leaflet/Icons.js"),l=r("./MapStore2/node_modules/object-assign/index.js"),u=r("./MapStore2/web/client/utils/VectorStyleUtils.js"),c=u.isMarkerStyle,p=u.isSymbolStyle,f=function e(t,r,n){for(var o,i=[],a=t.length,s=0;s<a;s++)o=r?e(t[s],r-1,n):(n||this.coordsToLatLng)(t[s]),i.push(o);return i},d=function(e){if("GeometryCollection"===e.geometry.type)return!1;var t=e.style;return t&&(c(t)||p(t)||t.iconUrl||t.iconGlyph)},m={coordsToLatLngF:function(e){return new a.LatLng(e[1],e[0],e[2])},coordsToLatLngs:f,isMarker:d,getPointLayer:function(e,t,r,n){return e?e(t,r):m.pointToLayer(r,t,o(o({},n.style),{},{styleName:n.styleName,highlight:n.highlight}))},pointToLayer:function(e,t,r){var n=r.Point||r.MultiPoint||r,o=function(e,t){if(e&&e.iconGlyph){var r=e.iconLibrary||"extra";if(s[r])return s[r].getIcon(e)}return e&&e.html&&t?s.html.getIcon(e,t):e&&e.iconUrl||e.symbolUrlCustomized||e.symbolUrl?s.standard.getIcon(e):null}(n,t);return o?a.marker(e,{icon:o,opacity:n&&n.opacity||1}):a.marker(e,{opacity:n&&n.opacity||1})},toValidGeoJSON:function(){},createTextPointMarkerLayer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.pointToLayer,r=e.geojson,n=e.latlng,i=e.options,s=e.style,l=void 0===s?{}:s,u=e.highlight,c=void 0!==u&&u;if(r.properties&&r.properties.isText){var p=a.divIcon({html:'<span style="\n                font:'.concat(l.font,";\n                color:").concat(l.fillColor,";\n                -webkit-text-stroke-width:",1,"px;\n                -webkit-text-stroke-color:").concat(l.color,';">').concat(r.properties.valueText,"</span>"),className:""});return new a.Marker(n,{icon:p})}return m.getPointLayer(t,r,n,o(o({},i),{},{style:l,highlight:c}))},createPolygonCircleLayer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.geojson,r=e.style,n=void 0===r?{}:r,i=e.latlngs,s=void 0===i?[]:i,l=e.coordsToLatLng,u=void 0===l?function(){}:l;if(t.properties&&t.properties.isCircle){var c=u(t.properties.center);return a.circle(c,o(o({},n),{},{radius:t.properties.radius}))}return new a.Polygon(s,n)},geometryToLayer:function(e,t){var r,n="Feature"===e.type?e.geometry:e,i=n?n.coordinates:null,s=[],u=o({styleName:t.styleName,style:t.style&&t.style[0]||t.style},e),c=t&&!d(u)?function(e,t){return"marker"===u.styleName?a.marker(t,u.style):a.circleMarker(t,u.style&&u.style[0]||u.style)}:null,p=t&&t.coordsToLatLng||m.coordsToLatLngF;if(!i&&!n)return null;var y,h,g,b,v=u.style||l({},t.style&&t.style[n.type]||t.style,{highlight:t.style&&t.style.highlight});switch(n.type){case"Point":return y=p(i),r=m.createTextPointMarkerLayer({pointToLayer:c,geojson:e,latlng:y,options:t,style:v,highlight:v&&v.highlight});case"MultiPoint":for(g=0,b=i.length;g<b;g++)y=p(i[g]),(r=m.createTextPointMarkerLayer({pointToLayer:c,geojson:e,latlng:y,options:t,style:v,highlight:v&&v.highlight})).msId=e.id,s.push(r);return new a.FeatureGroup(s);case"LineString":return v=m.updateHighlightStyle(v),h=f(i,"LineString"===n.type?0:1,p),(r=new a.Polyline(h,v)).msId=e.id,r;case"MultiLineString":for(v=m.updateHighlightStyle(v),g=0,b=(h=f(i,"LineString"===n.type?0:1,p)).length;g<b;g++)(r=new a.Polyline(h[g],v)).msId=e.id,r&&s.push(r);return new a.FeatureGroup(s);case"Polygon":return v=m.updateHighlightStyle(v),h=f(i,"Polygon"===n.type?1:2,p),(r=m.createPolygonCircleLayer({geojson:e,style:v,latlngs:h,coordsToLatLng:p})).msId=e.id,r;case"MultiPolygon":for(v=m.updateHighlightStyle(v),g=0,b=(h=f(i,"Polygon"===n.type?1:2,p)).length;g<b;g++)(r=m.createPolygonCircleLayer({geojson:e,style:v,latlngs:h,coordsToLatLng:p})).msId=e.id,r&&s.push(r);return new a.FeatureGroup(s);case"GeometryCollection":for(g=0,b=n.geometries.length;g<b;g++)(r=m.geometryToLayer({geometry:n.geometries[g],type:"Feature",properties:e.properties},t))&&s.push(r);return new a.FeatureGroup(s);default:throw new Error("Invalid GeoJSON object.")}},updateHighlightStyle:function(e){var t=e.highlight;return t?l({},e,{dashArray:t?"10":null}):e}};e.exports=m},"./MapStore2/web/client/utils/leaflet/WMSUtils.js":function(e,t,r){var n=r("./MapStore2/node_modules/object-assign/index.js"),o={PARAM_OPTIONS:["layers","styles","format","transparent","version","tiled","zindex","_v_","cql_filter","sld"],wmsToLeafletOptions:function(e){var t=void 0!==e.opacity?e.opacity:1;return n({layers:e.name,styles:e.style||"",format:e.format||"image/png",transparent:void 0===e.transparent||e.transparent,tiled:void 0===e.tiled||e.tiled,opacity:t},e.params||{})},getWMSURL:function(e){return e.split("?")[0]},filterWMSParamOptions:function(e){var t={};return Object.keys(e).forEach((function(r){r&&r.toLowerCase&&o.PARAM_OPTIONS.indexOf(r.toLowerCase())>=0&&(t[r]=e[r])})),t}};e.exports=o},"./MapStore2/web/client/utils/leaflet/WMTS.js":function(e,t,r){function n(e){return function(e){if(Array.isArray(e))return o(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return o(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return o(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var i=r("./MapStore2/web/client/libs/leaflet.js"),a=r("./MapStore2/web/client/utils/MapUtils.js").getScales,s=r("./MapStore2/web/client/utils/CoordinatesUtils.js").parseString,l=r("./MapStore2/node_modules/lodash/lodash.js"),u=l.head,c=l.isNumber,p=i.TileLayer.extend({defaultWmtsParams:{service:"WMTS",request:"GetTile",version:"1.3.0",layer:"",style:"",tileMatrixSet:"",format:"image/jpeg"},initialize:function(e,t,r){this._url=e[0],this._urls=e,this._urlsIndex=0;var n=i.extend({},this.defaultWmtsParams),o=t.tileSize||this.options.tileSize;for(var a in t.detectRetina&&i.Browser.retina?n.width=n.height=2*o:n.width=n.height=o,t)this.options.hasOwnProperty(a)||"crs"===a||(n[a]=t[a]);this.wmtsParams=n,this.matrixIds=r.matrixIds&&this.getMatrix(r.matrixIds,r)||this.getDefaultMatrix(r),this.matrixSet=r.matrixSet&&r.matrixSet.TileMatrix||[],this.ignoreErrors=r.ignoreErrors||!1,i.setOptions(this,t)},getWMTSParams:function(e,t,r,n,o){var i=a()[r],l=u(e.map((function(t,r){if(r===e.length-1)return null;var n=parseFloat(t.ScaleDenominator),o=parseFloat(e[r+1].ScaleDenominator);return n>=i&&o<i?i-o>(n-o)/2?{id:r,data:t}:{id:r+1,data:e[r+1]}:null})).filter((function(e){return e}))),p=l&&c(l.id)&&l.id+""||0===e.length&&r||null;if(!t[p])return null;var f=t[p].identifier,d=l.data&&l.data.TopLeftCorner&&s(l.data.TopLeftCorner)||t[p].topLeftCorner,m=d.lng||d.x,y=d.lat||d.y,h=Math.round((n.x-m)/o),g=-Math.round((n.y-y)/o),b=l.data&&l.data.MatrixWidth&&l.data.MatrixHeight&&{cols:{min:0,max:l.data.MatrixWidth-1},rows:{min:0,max:l.data.MatrixHeight-1}},v=t[p].ranges||b;return v&&!function(e,t,r){return!(e<r.cols.min||e>r.cols.max)&&!(t<r.rows.min||t>r.rows.max)}(h,g,v)?null:{ident:f,tilecol:h,tilerow:g}},getTileUrl:function(e){var t=this._map,r=t.options.crs,o=this.options.tileSize,a=e.multiplyBy(o);a.x+=1,a.y-=1;var s=a.add([o,o]),l=r.project(t.unproject(a,e.z)),u=r.project(t.unproject(s,e.z)).x-l.x,c=this.getWMTSParams(n(this.matrixSet),n(this.matrixIds),e.z,l,u);if(!c)return"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7";this._urlsIndex++,this._urlsIndex===this._urls.length&&(this._urlsIndex=0);var p=i.Util.template(this._urls[this._urlsIndex],{s:this._getSubdomain(e),TileRow:c.tilerow,TileCol:c.tilecol,TileMatrixSet:this.options.tileMatrixSet,TileMatrix:c.ident,Style:this.options.style});return"RESTful"===this.options.requestEncoding?p:p+i.Util.getParamString(this.wmtsParams,p,!0)+"&tilematrix="+c.ident+"&tilerow="+c.tilerow+"&tilecol="+c.tilecol},getMatrix:function(e,t){return e.map((function(e){return{identifier:e.identifier,topLeftCorner:new i.LatLng(t.originY,t.originX),ranges:e.ranges||null}}))},getDefaultMatrix:function(e){for(var t=new Array(22),r=0;r<22;r++)t[r]={identifier:e.tileMatrixPrefix+r,topLeftCorner:new i.LatLng(e.originY,e.originX)};return t},onError:function(){return!this.ignoreErrors}});e.exports=p},"./MapStore2/web/client/utils/mapinfo/vector.js":function(e,t,r){var n=r("./MapStore2/web/client/utils/MapUtils.js").getCurrentResolution;e.exports={buildRequest:function(e,t){var r,o;return{request:{lat:t.point.latlng.lat,lng:t.point.latlng.lng},metadata:{fields:(null===(r=e.features)||void 0===r||null===(o=r[0])||void 0===o?void 0:o.properties)&&Object.keys(e.features[0].properties)||[],title:e.name,resolution:t.map&&t.map&&t.map.zoom&&n(t.map.zoom,0,21,96),buffer:t.buffer||2,units:t.map&&t.map.units,rowViewer:e.rowViewer,viewer:e.viewer},url:""}}}},"./MapStore2/web/client/utils/mapinfo/wfs.js":function(e,t,r){function n(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}function o(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function i(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?o(Object(r),!0).forEach((function(t){a(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function a(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var s=r("./MapStore2/node_modules/rxjs/Rx.js").Observable,l=r("./MapStore2/web/client/utils/CoordinatesUtils.js").normalizeSRS,u=r("./MapStore2/web/client/utils/LayersUtils.js").getLayerUrl,c=r("./MapStore2/node_modules/lodash/lodash.js").isObject,p=r("./MapStore2/web/client/utils/VendorParamsUtils.js").optionsToVendorParams,f=r("./MapStore2/web/client/api/WFS.js"),d=f.describeFeatureType,m=f.getFeature,y=r("./MapStore2/web/client/utils/WFSLayerUtils.js").extractGeometryAttributeName,h=r("./MapStore2/web/client/utils/SecurityUtils.js").addAuthenticationToSLD,g=r("./MapStore2/node_modules/object-assign/index.js");e.exports={buildRequest:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.map,n=void 0===r?{}:r,o=t.point,a=t.currentLocale,s=t.params,p=t.maxItems,f=void 0===p?10:p,d=arguments.length>3?arguments[3]:void 0,m=arguments.length>4?arguments[4]:void 0;return{request:h(i({point:o,service:"WFS",version:"1.1.1",request:"GetFeature",outputFormat:"application/json",exceptions:"application/json",id:e.id,typeName:e.name,srs:l(n.projection)||"EPSG:4326",feature_count:f},g({params:s})),e),metadata:{title:c(e.title)?e.title[a]||e.title.default:e.title,regex:e.featureInfoRegex,viewer:d,featureInfo:m},url:u(e).replace(/[?].*$/g,"")}},getIdentifyFlow:function(e,t,r){var o=r.point,i=n(r,["point"]),a=function(e){var t,r,n=null==e||null===(t=e.geometricFilter)||void 0===t||null===(r=t.value)||void 0===r?void 0:r.geometry;if(n)return n;var o=e.latlng.lng;return{coordinates:[o-360*Math.floor(o/360+.5),e.latlng.lat],projection:"EPSG:4326",type:"Point"}}(o);return s.defer((function(){return d(e.url,e.name).then((function(r){var n=y(r),o=p({layerFilter:e.layerFilter,filterObj:{spatialField:{attribute:n,operation:"INTERSECTS",geometry:a}},params:g({},e.baseParams,e.params,i)});return m(t,e.name,o)}))}))}}},"./MapStore2/web/client/utils/mapinfo/wms.js":function(e,t,r){function n(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function o(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?n(Object(r),!0).forEach((function(t){i(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):n(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function i(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var a=r("./MapStore2/web/client/utils/MapUtils.js").getCurrentResolution,s=r("./MapStore2/web/client/utils/CoordinatesUtils.js"),l=s.reproject,u=s.getProjectedBBox,c=s.normalizeSRS,p=r("./MapStore2/web/client/utils/LayersUtils.js").getLayerUrl,f=r("./MapStore2/node_modules/lodash/lodash.js").isObject,d=r("./MapStore2/web/client/utils/VendorParamsUtils.js").optionsToVendorParams,m=r("./MapStore2/web/client/utils/LayerLocalizationUtils.js").generateEnvString,y=r("./MapStore2/web/client/utils/SecurityUtils.js").addAuthenticationToSLD,h=r("./MapStore2/node_modules/object-assign/index.js");e.exports={buildRequest:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.sizeBBox,n=t.map,i=void 0===n?{}:n,s=t.point,g=t.currentLocale,b=t.params,v=t.maxItems,S=void 0===v?10:v,O=t.env,w=arguments.length>2?arguments[2]:void 0,j=arguments.length>3?arguments[3]:void 0,_=arguments.length>4?arguments[4]:void 0,M=r&&r.height||101,x=r&&r.width||101,P=[M,x],E=0,L=a(Math.ceil(i.zoom),0,21,96),C=s.latlng.lng,T=C-360*Math.floor(C/360+.5),I={x:T,y:s.latlng.lat},A=l(I,"EPSG:4326",i.projection),N=u(A,L,E,P,null),R=e.name;e.queryLayers&&(R=e.queryLayers.join(","));var F=m(O),k=d({layerFilter:e.layerFilter,filterObj:e.filterObj,params:h({},e.baseParams,e.params,b)});return{request:y(o({service:"WMS",version:"1.1.1",request:"GetFeatureInfo",exceptions:"application/json",id:e.id,layers:e.name,query_layers:R,styles:e.style,x:x%2==1?Math.ceil(x/2):x/2,y:x%2==1?Math.ceil(x/2):x/2,height:M,width:x,srs:c(i.projection)||"EPSG:4326",bbox:N.minx+","+N.miny+","+N.maxx+","+N.maxy,feature_count:S,info_format:w,ENV:F},h({},k)),e),metadata:{title:f(e.title)?e.title[g]||e.title.default:e.title,regex:e.featureInfoRegex,viewer:j,featureInfo:_},url:p(e).replace(/[?].*$/g,"")}}}},"./MapStore2/web/client/utils/mapinfo/wmts.js":function(e,t,r){function n(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function o(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?n(Object(r),!0).forEach((function(t){i(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):n(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function i(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var a=r("./MapStore2/web/client/utils/MapUtils.js"),s=a.getCurrentResolution,l=a.getResolutions,u=r("./MapStore2/web/client/utils/CoordinatesUtils.js"),c=u.reproject,p=u.normalizeSRS,f=r("./MapStore2/web/client/utils/WMTSUtils.js"),d=f.getTileMatrixSet,m=f.limitMatrix,y=f.getMatrixIds,h=f.getDefaultMatrixId,g=r("./MapStore2/web/client/utils/LayersUtils.js").getLayerUrl,b=r("./MapStore2/web/client/utils/VendorParamsUtils.js").optionsToVendorParams,v=r("./MapStore2/node_modules/lodash/lodash.js").isObject,S=r("./MapStore2/node_modules/object-assign/index.js");e.exports={buildRequest:function(e,t){var r=s(Math.round(t.map.zoom),0,21,96),n=e.resolutions||l(),i=e.tileSize||256,a=[e.originX||-20037508.3428,e.originY||20037508.3428],u=t.point.latlng.lng,f={x:u-360*Math.floor(u/360+.5),y:t.point.latlng.lat},O=c(f,"EPSG:4326",t.map.projection),w=p(e.srs||t.map.projection||"EPSG:3857",e.allowedSRS),j=d(e.tileMatrixSet,w,e.allowedSRS,e.matrixIds),_=(O.x-a[0])/(r*i),M=(a[1]-O.y)/(r*i),x=Math.floor(_),P=Math.floor(M),E=Math.floor((_-x)*i),L=Math.floor((M-P)*i),C=m(e.matrixIds&&y(e.matrixIds,j||w)||h(e),n.length),T=b({layerFilter:e.layerFilter,filterObj:e.filterObj,params:S({},e.baseParams,e.params,t.params)});return{request:o(o({service:"WMTS",request:"GetFeatureInfo",layer:e.name,infoformat:t.format,style:e.style||""},S({},T)),{},{tilecol:x,tilerow:P,tilematrix:C[Math.round(t.map.zoom)],tilematrixset:j,i:E,j:L}),metadata:{title:v(e.title)?e.title[t.currentLocale]||e.title.default:e.title,regex:e.featureInfoRegex},url:g(e).replace(/[?].*$/g,"")}}}},"./MapStore2/web/client/utils/ogc/Filter/CQL/parser.js":function(e,t){var r="INTERSECTS",n="BBOX",o="CONTAINS",i="DWITHIN",a="WITHIN",s={PROPERTY:/^[_a-zA-Z]\w*/,COMPARISON:/^(=|<>|<=|<|>=|>|LIKE)/i,IS_NULL:/^IS NULL/i,COMMA:/^,/,LOGICAL:/^(AND|OR)/i,VALUE:/^('([^']|'')*'|-?\d+(\.\d*)?|\.\d+)/,LPAREN:/^\(/,RPAREN:/^\)/,SPATIAL:/^(BBOX|INTERSECTS|DWITHIN|WITHIN|CONTAINS)/i,NOT:/^NOT/i,BETWEEN:/^BETWEEN/i,GEOMETRY:function(e){var t=/^(POINT|LINESTRING|POLYGON|MULTIPOINT|MULTILINESTRING|MULTIPOLYGON|GEOMETRYCOLLECTION)/.exec(e);if(t){var r=e.length,n=e.indexOf("(",t[0].length);if(n>-1)for(var o=1;n<r&&o>0;)switch(n++,e.charAt(n)){case"(":o++;break;case")":o--}return[e.substr(0,n+1)]}return null},END:/^$/},l={LPAREN:["GEOMETRY","SPATIAL","PROPERTY","VALUE","LPAREN"],RPAREN:["NOT","LOGICAL","END","RPAREN"],PROPERTY:["COMPARISON","BETWEEN","COMMA","IS_NULL"],BETWEEN:["VALUE"],IS_NULL:["END"],COMPARISON:["VALUE"],COMMA:["GEOMETRY","VALUE","PROPERTY"],VALUE:["LOGICAL","COMMA","RPAREN","END"],SPATIAL:["LPAREN"],LOGICAL:["NOT","VALUE","SPATIAL","PROPERTY","LPAREN"],NOT:["PROPERTY","LPAREN"],GEOMETRY:["COMMA","RPAREN"]},u={"=":"=","<>":"<>","<":"<","<=":"<=",">":">",">=":">=",LIKE:"like",ILIKE:"ilike",BETWEEN:"><","IS NULL":"isNull"},c={AND:"and",OR:"or",NOT:"not"},p={RPAREN:3,LOGICAL:2,COMPARISON:1},f=function(e,t){return t instanceof RegExp?t.exec(e):t(e)},d=function(e,t){var r,n,o=t.length;for(r=0;r<o;r++){n=t[r];var i=f(e,s[n]);if(i){var a=i[0];return{type:n,text:a,remainder:e.substr(a.length).replace(/^\s*/,"")}}}var l="ERROR: In parsing: ["+e+"], expected one of: ";for(r=0;r<o;r++)l+="\n    "+(n=t[r])+": "+s[n];throw new Error(l)},m=function(e){for(var t=[],s=[];e.length;){var l=e.shift();switch(l.type){case"PROPERTY":case"GEOMETRY":case"VALUE":s.push(l);break;case"COMPARISON":case"BETWEEN":case"IS_NULL":case"LOGICAL":for(var f=p[l.type];t.length>0&&p[t[t.length-1].type]<=f;)s.push(t.pop());t.push(l);break;case"SPATIAL":case"NOT":case"LPAREN":t.push(l);break;case"RPAREN":for(;t.length>0&&"LPAREN"!==t[t.length-1].type;)s.push(t.pop());t.pop(),t.length>0&&"SPATIAL"===t[t.length-1].type&&s.push(t.pop());break;case"COMMA":case"END":break;default:throw new Error("Unknown token type "+l.type)}}for(;t.length>0;)s.push(t.pop());var d=function e(){var t=s.pop();switch(t.type){case"LOGICAL":var l=e();return{filters:[e(),l],type:c[t.text.toUpperCase()]};case"NOT":return{filters:[e()],type:c.NOT};case"BETWEEN":s.pop();var p=e(),f=e();return{property:e(),lowerBoundary:f,upperBoundary:p,type:u.BETWEEN};case"COMPARISON":var d=e();return{property:e(),value:d,type:u[t.text.toUpperCase()]};case"IS_NULL":return{property:e(),type:u[t.text.toUpperCase()]};case"VALUE":var m=t.text.match(/^'(.*)'$/);return m?m[1].replace(/''/g,"'"):Number(t.text);case"SPATIAL":switch(t.text.toUpperCase()){case"BBOX":var y=e(),h=e(),g=e(),b=e(),v=e();return{type:n,property:v,value:[b,g,h,y]};case"INTERSECTS":var S=e(),O=e();return{type:r,property:O,value:S};case"WITHIN":var w=e(),j=e();return{type:a,property:j,value:w};case"CONTAINS":var _=e(),M=e();return{type:o,property:M,value:_};case"DWITHIN":var x=e(),P=e(),E=e();return{type:i,value:P,property:E,distance:Number(x)};default:return null}case"GEOMETRY":return function(){throw new Error("WKT parsing for CQL filter not supported yet")}(t.text);default:return t.text}}();if(s.length>0){for(var m="Remaining tokens after building AST: \n",y=s.length-1;y>=0;y--)m+=s[y].type+": "+s[y].text+"\n";throw new Error(m)}return d};e.exports={read:function(e){return m(function(e){var t,r=[],n=e,o=["NOT","GEOMETRY","SPATIAL","PROPERTY","LPAREN"];do{if(n=(t=d(n,o)).remainder,o=l[t.type],"END"!==t.type&&!o)throw new Error("No follows list for "+t.type);r.push(t)}while("END"!==t.type);return r}(e))}}},"./MapStore2/web/client/utils/ogc/Filter/FilterBuilder.js":function(e,t,r){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var o=r("./MapStore2/web/client/utils/ogc/Filter/operators.js"),i=o.logical,a=o.spatial,s=o.comparison,l=o.literal,u=o.propertyName,c=o.valueReference,p=o.distance,f=o.lower,d=o.upper,m=r("./MapStore2/web/client/utils/ogc/Filter/filter.js"),y=m.filter,h=m.fidFilter,g=r("./MapStore2/web/client/utils/ogc/GML/index.js").processOGCGeometry;e.exports=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.filterNS,r=void 0===t?"ogc":t,o=e.gmlVersion,m=e.wfsVersion,b=void 0===m?"1.1.0":m,v=o||"3.1.1",S=function(e){return g(v,e)},O=function(e){return"object"===n(e)&&Date,l(r,e)},w=0===b.indexOf("2.")?c:u;return{filter:y.bind(null,r),fidFilter:h.bind(null,r),and:i.and.bind(null,r),or:i.or.bind(null,r),not:i.not.bind(null,r),property:function(e){return{equalTo:function(t){return s.equal(r,w(r,e),O(t))},greaterThen:function(t){return s.greater(r,w(r,e),O(t))},greaterThenOrEqualTo:function(t){return s.greaterOrEqual(r,w(r,e),O(t))},lessThen:function(t){return s.less(r,w(r,e),O(t))},lessThenOrEqualTo:function(t){return s.lessOrEqual(r,w(r,e),O(t))},notEqualTo:function(t){return s.notEqual(r,w(r,e),O(t))},between:function(t,n){return s.between(r,w(r,e),f(r,O(t)),d(r,O(n)))},like:function(t,n){return s.like(r,w(r,e),O(t),n)},ilike:function(t,n){return s.ilike(r,w(r,e),O(t),n)},isNull:function(){return s.isNull(r,w(r,e))},intersects:function(t){return a.intersects(r,w(r,e),S(t))},within:function(t){return a.within(r,w(r,e),S(t))},dwithin:function(t,n){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"m";return a.dwithin(r,w(r,e),S(t),p(r,n,o))},contains:function(t){return a.contains(r,w(r,e),S(t))}}}}}},"./MapStore2/web/client/utils/ogc/Filter/filter.js":function(e,t){var r=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"ogc",t=arguments.length>1?arguments[1]:void 0;return"<".concat(e,":Filter>").concat(Array.isArray(t)?t.join(""):t,"</").concat(e,":Filter>")};e.exports={fidFilter:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"ogc",t=arguments.length>1?arguments[1]:void 0;return r(e,"<".concat(e,':FeatureId fid="').concat(t,'"/>'))},filter:r}},"./MapStore2/web/client/utils/ogc/Filter/fromObject.js":function(e,t,r){function n(e){return function(e){if(Array.isArray(e))return o(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return o(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return o(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var i=r("./MapStore2/node_modules/lodash/lodash.js"),a=i.includes,s=i.isNil,l=["and","or","not"],u={"=":"equalTo","<>":"notEqualTo","><":"between","<":"lessThen","<=":"lessThenOrEqualTo",">":"greaterThen",">=":"greaterThenOrEqualTo",like:"like",ilike:"ilike"};e.exports=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(r){var o=r.type,i=r.filters,c=void 0===i?[]:i,p=r.value,f=r.property,d=r.lowerBoundary,m=r.upperBoundary;return a(l,o)?t[o].apply(t,n(c.map(e(t)))):t.property(f)[u[o]](s(p)?d:p,m)}}},"./MapStore2/web/client/utils/ogc/Filter/operators.js":function(e,t){var r={"=":function(e,t){return"<".concat(e,":PropertyIsEqualTo>").concat(t,"</").concat(e,":PropertyIsEqualTo>")},">":function(e,t){return"<".concat(e,":PropertyIsGreaterThan>").concat(t,"</").concat(e,":PropertyIsGreaterThan>")},"<":function(e,t){return"<".concat(e,":PropertyIsLessThan>").concat(t,"</").concat(e,":PropertyIsLessThan>")},">=":function(e,t){return"<".concat(e,":PropertyIsGreaterThanOrEqualTo>").concat(t,"</").concat(e,":PropertyIsGreaterThanOrEqualTo>")},"<=":function(e,t){return"<".concat(e,":PropertyIsLessThanOrEqualTo>").concat(t,"</").concat(e,":PropertyIsLessThanOrEqualTo>")},"<>":function(e,t){return"<".concat(e,":PropertyIsNotEqualTo>").concat(t,"</").concat(e,":PropertyIsNotEqualTo>")},"><":function(e,t){return"<".concat(e,":PropertyIsBetween>").concat(t,"</").concat(e,":PropertyIsBetween>")},like:function(e,t){return"<".concat(e,':PropertyIsLike matchCase="true" wildCard="*" singleChar="." escapeChar="!">').concat(t,"</").concat(e,":PropertyIsLike>")},ilike:function(e,t){return"<".concat(e,':PropertyIsLike matchCase="false" wildCard="*" singleChar="." escapeChar="!">').concat(t,"</").concat(e,":PropertyIsLike>")},isNull:function(e,t){return"<".concat(e,":PropertyIsNull>").concat(t,"</").concat(e,":PropertyIsNull>")}},n={AND:function(e,t){return"<".concat(e,":And>").concat(t,"</").concat(e,":And>")},OR:function(e,t){return"<".concat(e,":Or>").concat(t,"</").concat(e,":Or>")},NOR:function(e,t){return"<".concat(e,":Not><").concat(e,":Or>").concat(t,"</").concat(e,":Or></").concat(e,":Not>")},NOT:function(e,t){return"<".concat(e,":Not>").concat(t,"</").concat(e,":Not>")}},o={INTERSECTS:function(e,t){return"<".concat(e,":Intersects>").concat(t,"</").concat(e,":Intersects>")},BBOX:function(e,t){return"<".concat(e,":BBOX>").concat(t,"</").concat(e,":BBOX>")},CONTAINS:function(e,t){return"<".concat(e,":Contains>").concat(t,"</").concat(e,":Contains>")},DWITHIN:function(e,t){return"<".concat(e,":DWithin>").concat(t,"</").concat(e,":DWithin>")},WITHIN:function(e,t){return"<".concat(e,":Within>").concat(t,"</").concat(e,":Within>")}},i=function(e,t,r){return t(e,Array.isArray(r)?r.join(""):r)},a={and:function(e,t){for(var r=arguments.length,o=new Array(r>2?r-2:0),a=2;a<r;a++)o[a-2]=arguments[a];return o&&o.length>0?i(e,n.AND,[t].concat(o)):i(e,n.AND,t)},or:function(e,t){for(var r=arguments.length,o=new Array(r>2?r-2:0),a=2;a<r;a++)o[a-2]=arguments[a];return o&&o.length>0?i(e,n.OR,[t].concat(o)):i(e,n.OR,t)},not:function(e,t){return i(e,n.NOT,t)},nor:function(e,t){for(var r=arguments.length,o=new Array(r>2?r-2:0),a=2;a<r;a++)o[a-2]=arguments[a];return o&&o.length>0?i(e,n.NOR,[t].concat(o)):i(e,n.NOR,t)}},s={intersects:function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return i(e,o.INTERSECTS,r)},within:function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return i(e,o.WITHIN,r)},bbox:function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return i(e,o.BBOX,r)},dwithin:function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return i(e,o.DWITHIN,r)},contains:function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return i(e,o.CONTAINS,r)}},l={equal:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),o=1;o<t;o++)n[o-1]=arguments[o];return i(e,r["="],n)},greater:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),o=1;o<t;o++)n[o-1]=arguments[o];return i(e,r[">"],n)},less:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),o=1;o<t;o++)n[o-1]=arguments[o];return i(e,r["<"],n)},greaterOrEqual:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),o=1;o<t;o++)n[o-1]=arguments[o];return i(e,r[">="],n)},lessOrEqual:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),o=1;o<t;o++)n[o-1]=arguments[o];return i(e,r["<="],n)},notEqual:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),o=1;o<t;o++)n[o-1]=arguments[o];return i(e,r["<>"],n)},between:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),o=1;o<t;o++)n[o-1]=arguments[o];return i(e,r["><"],n)},like:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),o=1;o<t;o++)n[o-1]=arguments[o];return i(e,r.like,n)},ilike:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),o=1;o<t;o++)n[o-1]=arguments[o];return i(e,r.ilike,n)},isNull:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),o=1;o<t;o++)n[o-1]=arguments[o];return i(e,r.isNull,n)}};e.exports={ogcComparisonOperators:r,ogcLogicalOperators:n,ogcSpatialOperators:o,propertyName:function(e,t){return"<".concat(e,":PropertyName>").concat(t,"</").concat(e,":PropertyName>")},valueReference:function(e,t){return"<".concat(e,":ValueReference>").concat(t,"</").concat(e,":ValueReference>")},distance:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"m";return"<".concat(e,':Distance units="').concat(r,'">').concat(t,"</").concat(e,":Distance>")},literal:function(e,t){return"<".concat(e,":Literal>").concat(t,"</").concat(e,":Literal>")},logical:a,spatial:s,comparison:l,lower:function(e,t){return"<".concat(e,":LowerBoundary>").concat(t,"</").concat(e,":LowerBoundary>")},upper:function(e,t){return"<".concat(e,":UpperBoundary>").concat(t,"</").concat(e,":UpperBoundary>")}}},"./MapStore2/web/client/utils/ogc/GML/index.js":function(e,t,r){var n=r("./MapStore2/node_modules/lodash/lodash.js").isArray,o=function(e){return 0===e.indexOf("2.")},i=function(e){if(e.length>=3){var t=e[0],r=e[e.length-1];if(t[0]!==r[0]||t[1]!==r[1])return e.concat([e[0]])}return e},a=function(e,t,r){var n='<gml:Point srsDimension="2"';return n+=t?' srsName="'+t+'">':">",n+=o(r)?"<gml:coord><X>"+e[0]+"</X><Y>"+e[1]+"</Y></gml:coord>":"<gml:pos>"+e.join(" ")+"</gml:pos>",n+="</gml:Point>"},s=function(e,t,r){var a=o(r),s="<gml:Polygon";return s+=t?' srsName="'+t+'">':">",(e.length&&n(e[0])&&e[0].length&&n(e[0][0])?e:[e]).forEach((function(e,t){var r=i(e).map((function(e){return e[0]+(a?",":" ")+e[1]})),n=a?"outerBoundaryIs":"exterior",o=a?"innerBoundaryIs":"exterior";s+=(t<1?"<gml:"+n+">":"<gml:"+o+">")+"<gml:LinearRing>"+(a?"<gml:coordinates>":"<gml:posList>")+r.join(" ")+(a?"</gml:coordinates>":"</gml:posList>")+"</gml:LinearRing>"+(t<1?"</gml:"+n+">":"</gml:"+o+">")})),s+="</gml:Polygon>"},l=function(e,t,r){var n=o(r),i="<gml:LineString";i+=t?' srsName="'+t+'">':">";var a=e.map((function(e){return e[0]+(n?",":" ")+e[1]}));return i+=(n?"<gml:coordinates>":"<gml:posList>")+a.join(" ")+(n?"</gml:coordinates>":"</gml:posList>"),i+="</gml:LineString>"};e.exports={closePolygon:i,pointElement:a,polygonElement:s,lineStringElement:l,processOGCGeometry:function(e,t){var r="",n=t.projection||"EPSG:4326";switch(t.type){case"Point":r+=a(t.coordinates,n,e);break;case"MultiPoint":r+='<gml:MultiPoint srsName="'+(t.projection||"EPSG:4326")+'">',t.coordinates.forEach((function(t){t&&(r+="<gml:pointMember>",r+=a(t,n,e),r+="</gml:pointMember>")})),r+="</gml:MultiPoint>";break;case"LineString":r+=l(t.coordinates,n,e);break;case"MultiLineString":var o="3.2"===e?"MultiCurve":"MultiLineString",i="3.2"===e?"curveMember":"lineStringMember";r+="<gml:".concat(o,' srsName="').concat(n,'">'),t.coordinates.forEach((function(t){t&&(r+="<gml:"+i+">",r+=l(t,n,e),r+="</gml:"+i+">")})),r+="</gml:"+o+">";break;case"Polygon":r+=s(t.coordinates,n,e);break;case"MultiPolygon":var u="3.2"===e?"MultiSurface":"MultiPolygon",c="3.2"===e?"surfaceMembers":"polygonMember";r+="<gml:".concat(u,' srsName="').concat(n,'">'),t.coordinates.forEach((function(t){t&&(r+="<gml:"+c+">",r+=s(t,n,e),r+="</gml:"+c+">")})),r+="</gml:"+u+">"}return r}}},"./MapStore2/web/client/utils/ogc/WFS/base.js":function(e,t,r){var n=r("./MapStore2/node_modules/lodash/lodash.js"),o=n.head,i=n.get,a=function(e){return/[<>&'"]/.test(e)?"<![CDATA[".concat(e,"]]>"):e},s=r("./MapStore2/web/client/utils/ogc/GML/index.js").processOGCGeometry,l={"1.0.0":"2.0","1.1.0":"3.1.1","2.0":"3.2","2.0.0":"3.2"},u=function(e){return i(e,"featureTypes[0].properties")},c=function(e,t){return o((u(t)||[]).filter((function(t){return t.name===e})))},p=function(e){return e.targetNamespace},f=function(e){return 0===e.type.indexOf("gml:")},d=function(e,t){return null==t||t&&!0===t.nillable||t&&!1===t.nillable&&null!=e},m=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.geom,r=e.properties,n=arguments.length>1?arguments[1]:void 0;return d(f(n)?t:r[n.name],n)};e.exports={schemaLocation:p,isGeometryType:f,featureTypeSchema:function(e){return"xmlns:".concat(e.targetPrefix,'="').concat(p(e),'"')},getValue:function(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"1.1.0",o=f(c(t,r));return o?e?s(n,{type:e.type,coordinates:e.coordinates}):"":null==e?"":"string"==typeof e?a(e):e},getPropertyDesciptor:c,findGeometryProperty:function(e){return o((u(e)||[]).filter((function(e){return 0===e.type.indexOf("gml:")})))},getFeatureTypeProperties:u,getTypeName:function(e){return e.targetPrefix?e.targetPrefix+":"+e.featureTypes[0].typeName:e.featureTypes[0].typeName},wfsToGmlVersion:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"1.1.0";return l[e]},processOGCGeometry:s,isValid:function(e,t){return u(t).map((function(t){return m(e,t)}))},isValidProperty:m,isValidValueForPropertyName:function(e,t,r){return d(e,c(t,r))},isValidValue:d}},"./node_modules/css-loader/index.js!./node_modules/postcss-loader/src/index.js?!./MapStore2/node_modules/leaflet-simple-graticule/L.SimpleGraticule.css":function(e,t,r){(e.exports=r("./node_modules/css-loader/lib/css-base.js")()).push([e.i,".msgapi .leaflet-grid-label .gridlabel-vert {\n    margin-left: 8px;\n    -webkit-transform: rotate(90deg);\n    transform: rotate(90deg);\n}\n\n.msgapi .leaflet-grid-label .gridlabel-vert,\n.msgapi .leaflet-grid-label .gridlabel-horiz {\n    padding-left:2px;\n    text-shadow: -2px 0 #FFFFFF, 0 2px #FFFFFF, 2px 0 #FFFFFF, 0 -2px #FFFFFF;\n}\n",""])},"./node_modules/css-loader/index.js!./node_modules/postcss-loader/src/index.js?!./MapStore2/web/client/components/map/leaflet/overview.css":function(e,t,r){(e.exports=r("./node_modules/css-loader/lib/css-base.js")()).push([e.i,".msgapi .leaflet-control-minimap {\n    border:solid rgba(255, 255, 255, 1.0) 4px;\n    box-shadow: 0 1px 5px rgba(0,0,0,0.65);\n    border-radius: 3px;\n    background: #f8f8f9;\n    transition: all .2s;\n}\n.msgapi .leafletbottom.leafletright, .msgapi .leaflet-control-minimap{\n    position:relative;\n    bottom:5px;\n}\n.msgapi .leaflet-control-minimap a {\n    background-color: rgba(255, 255, 255, 1.0);\n    background-repeat: no-repeat;\n    z-index: 99999;\n    transition: all .2s;\n}\n\n.msgapi .leaflet-control-minimap a.minimized-bottomright {\n    -webkit-transform: rotate(180deg);\n    transform: rotate(180deg);\n    border-radius: 0px;\n    bottom: -3px;\n    right: -3px;\n}\n\n.msgapi .leaflet-control-minimap a.minimized-topleft {\n    -webkit-transform: rotate(0deg);\n    transform: rotate(0deg);\n    border-radius: 0px;\n}\n\n.msgapi .leaflet-control-minimap a.minimized-bottomleft {\n    -webkit-transform: rotate(270deg);\n    transform: rotate(270deg);\n    border-radius: 0px;\n}\n\n.msgapi .leaflet-control-minimap a.minimized-topright {\n    -webkit-transform: rotate(90deg);\n    transform: rotate(90deg);\n    border-radius: 0px;\n}\n\n.msgapi .leaflet-control-minimap-toggle-display{\n    background-image: url("+r("./MapStore2/web/client/components/map/leaflet/img/toggle.svg")+");\n    background-size: cover;\n    position: absolute;\n    border-radius: 3px 0px 0px 0px;\n}\n\n.msgapi .leaflet-oldie .leaflet-control-minimap-toggle-display{\n    background-image: url("+r("./MapStore2/web/client/components/map/leaflet/img/toggle.png")+");\n}\n\n.msgapi .leaflet-control-minimap-toggle-display-bottomright {\n    bottom: 0;\n    right: 0;\n}\n\n.msgapi .leaflet-control-minimap-toggle-display-topleft{\n    top: 0;\n    left: 0;\n    -webkit-transform: rotate(180deg);\n    transform: rotate(180deg);\n}\n\n.msgapi .leaflet-control-minimap-toggle-display-bottomleft{\n    bottom: 0;\n    left: 0;\n    -webkit-transform: rotate(90deg);\n    transform: rotate(90deg);\n}\n\n.msgapi .leaflet-control-minimap-toggle-display-topright{\n    top: 0;\n    right: 0;\n    -webkit-transform: rotate(270deg);\n    transform: rotate(270deg);\n}\n\n/* Old IE */\n.msgapi .leaflet-oldie .leaflet-control-minimap {\n    border: 1px solid #999;\n}\n\n.msgapi .leaflet-oldie .leaflet-control-minimap a {\n    background-color: #fff;\n}\n\n.msgapi .leaflet-oldie .leaflet-control-minimap a.minimized {\n    filter: progid:DXImageTransform.Microsoft.BasicImage(rotation=2);\n}\n",""])}}]);